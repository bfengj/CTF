define("@baidu/data-channel/data-channel",["require"],function(t){function n(){this.events={}}function e(t){d[t]=1}function i(){d={}}function r(t,n){u[n]||(u[n]=[]),u[n].push(t)}function a(){return this.data={},this.listeners={},this.length=0,this}function o(t){return this.action="action="+t,this}function s(t){var n=document.createElement("iframe"),e=document.body;n.style.display="none",n.src=t,e.appendChild(n),setTimeout(function(){e.removeChild(n),n=null},0)}function c(t,n){var e,i=new URL(t)
;for(e in n)n.hasOwnProperty(e)&&("object"==typeof n[e]&&(n[e]=JSON.stringify(n[e])),i.searchParams.append(e,n[e]));return i}var f=n.prototype,u={},d={};f.on=function(t,n,e){if("string"==typeof t&&!("function"!=typeof n||e&&e.name&&"string"!=typeof e.name)){e=e||{};var i=this.getEvent(t),r=i.listeners;i.length+=1;var a=e.name||i.length+"";r[a]={fn:n,name:a,doAfter:e.doAfter||"",once:e.once||!1}}},f.one=function(t,n,e){e=e||{},e.once=!0,this.on(t,n,e)},f.off=function(t,n){var e=this.events[t]
;if(e){var i=e.listeners;if("string"==typeof n)return void(i[n]&&delete i[n]);if("function"==typeof n)for(var r in i)i.hasOwnProperty(r)&&i[r].fn===n&&delete i[r]}},f.exec=function(t,n,i,r){var a;try{if(i.fn.call(n,r||{}),!0===i.once&&this.off(t,i.fn),e(i.name),a=u[i.name]){for(var o=0,s=a.length;o<s;o++)this.exec(t,n,a[o],r);delete u[i.name]}}catch(t){}},f.trigger=function(t,n){var e=this.events[t];if(e){var a=e.listeners,o=null;for(var s in a)a.hasOwnProperty(s)&&(o=a[s],
1!==d[o.doAfter]&&o.doAfter&&"string"==typeof o.doAfter?r(o,o.doAfter):this.exec(t,e,o,n));var c;for(s in u)if(u.hasOwnProperty(s)){c=u[s];for(var f=0,h=c.length;f<h;f++)this.exec(t,e,c[f],n);delete u[s]}i()}},f.getEvent=function(t){return void 0===this.events[t]&&(this.events[t]=new a),this.events[t]},a.prototype.getData=function(){return this.data},a.prototype.setData=function(t,n){var e=this.data;if("string"==typeof t&&void 0!==n)return void(e[t]=n)
;"[object Object]"===String(t)&&(e=$.extend(!0,e,t))};var h=new n,l="baiduboxapp://v5/datachannel";return o.prototype.register=function(t,n){if(t=t||{},t.jscallback&&n){var e=l+"/register?"+this.action;e=c(e,t);var i=t.jscallback.split(".")[1];window[i]||(window[i]=n,s(e))}},o.prototype.sendbroadcast=function(t){var n=l+"/sendbroadcast?"+this.action;t=t||{},n=c(n,t),s(n)},o.prototype.unregister=function(){var t=l+"/unregister?"+this.action,n="dataChannel_"+this.action.split(".").join("_")
;window[n]||(window[n]=!0,s(t))},o.create=function(t){var n=new o(t);return n.unregister(),n},{DatachannelAction:o,events:h,createScheme:c}}),define("@baidu/data-channel",["@baidu/data-channel/data-channel"],function(t){return t});