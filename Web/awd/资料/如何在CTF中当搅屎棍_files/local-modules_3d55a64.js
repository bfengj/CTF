define("next/m/filters/json",["require","next-atom"],function(t){function e(){n.filter("json",function(t){return JSON.stringify(t,null,0)})}var n=t("next-atom");return{init:e}}),define("next/m/filters/strip-tags",["require","next-atom"],function(t){function e(){n.filter("stripTags",function(t,e){var n="";return e&&e.length>2&&(n=function(t){return t.replace("/","")===e?t:""}),String(t).replace(/<\/?([^>]*)>/g,n)})}var n=t("next-atom");return{init:e}}),
define("next/m/filters/index",["require","next/m/filters/json","next/m/filters/strip-tags"],function(t){function e(){n.init(),i.init()}var n=t("next/m/filters/json"),i=t("next/m/filters/strip-tags");return{init:e}}),define("next/m/log/tclog",["require","sfr","next/m/utils/md5"],function(t){function e(t,e){var n=Date.now(),i=window[n]=new Image;for(var r in e)e.hasOwnProperty(r)&&"object"==typeof e[r]&&(e[r]=JSON.stringify(e[r]));i.onload=i.onerror=i.onabort=function(){window[n]=null},
i.src=t+"?"+$.param(e)}function n(t){return t.split("&").reduce(function(t,e){var n=e.split("=");if(t[n[0]]=decodeURIComponent(n[1]),"extra"===n[0])try{t[n[0]]=JSON.parse(t[n[0]])}catch(t){}return t},{})}function i(t,e){var n,r={};for(n in e)e.hasOwnProperty(n)&&("object"==typeof t[n]&&"object"==typeof e[n]?r[n]=i(t[n],e[n]):r[n]=e[n]);for(n in t)t.hasOwnProperty(n)&&(r[n]||(r[n]=t[n]));return r}function r(t,e){this.dom=t,this.commData=e,this.init()}var o=t("sfr")._,a=t("next/m/utils/md5"),c={
WA_LOG_BTN:"b",WA_LOG_TAB:"t",WA_LOG_OTHER:"o",WA_LOG_SF:"sf",WA_LOG_MSC:"msc",WA_LOG_VD:"vd",WA_LOG_LIGHT:"scheme",WA_LOG_NA:"na",WA_LOG_XCX:"xcx"},s=new RegExp(Object.keys(c).join("|")),u={module:1,pd:1,tn:1,tcreq4log:1,q:1,order:1,nsrc:1,src:1,lid:1,extra:1,clk_info:1,cyc:1,pu:"",hwj:"",ct:1,cst:1,filter:0};return r.prototype.send=function(t){t=this.getCommonLog(t),t.tcreq4log=1,e("https://m.baidu.com/tc",t)},r.prototype.setLog=function(t,e){
var r=$(t),o=r.attr("href"),a=o.indexOf("?"),c=o.substr(0,a+1),s=o.substr(a+1),u=n(s);e=this.getCommonLog(e);var l=i(u,e);for(var d in l)l.hasOwnProperty(d)&&"object"==typeof l[d]&&(l[d]=JSON.stringify(l[d]));s=$.param(l),r.attr("href",c+s)},r.prototype.getCommonLog=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&n in u&&(e[n]=t[n]);var r=this.commData;return i({module:"sf",pd:r.pd||"",tn:r.tn||"",q:r.query||"",lid:r.lid||"",applid:r.applid,pu:r.pu||"",clk_info:{
atn:$(this.dom).data("atn"),applid:r.applid,t:(new Date).getTime(),type:"o"},extra:{}},e)},r.prototype.init=function(){var t,e=this,n="[data-log], a";n+=", ."+Object.keys(c).join(", ."),$(this.dom).on("click",n,function(n){var r=$(this);if(!r.data("nolog")){var u,l=r.data("log");if(l){if("string"==typeof l)try{l=JSON.parse(l.replace(/'/g,'"'))}catch(n){l={}}}else l={};for(var d=n.target,m=[];d&&d!==e.dom;){for(var f=d.previousSibling,p=1;f;)1===f.nodeType&&f.nodeName===d.nodeName&&p++,
f=f.previousSibling;var g=$(d).data("module");g=g?"("+g+")":"",m.push(d.nodeName.toLowerCase()+(p>1?p:"")+g),d=d.parentNode}l.clk_info||(l.clk_info={}),l.clk_info.xpath=m.reverse().join("-"),l.clk_info.atn=$(e.dom).data("atn");var h=page.comm||{};if("video"===h.pd&&/\/tc\?/.test(this.href)&&r.data("sf-href")&&!r.data("xcx")){var x=a(h.lid+"_"+new Date);page.utils.cookie("seClickID",x,{expires:36e5,domain:"baidu.com",path:"/"}),l.clk_info.seClickID=x
}else"video"===h.pd&&page.utils.cookie("seClickID",null);if("A"===this.tagName&&/\/tc\?/.test(this.href)&&!r.data("sf-href")&&!r.data("url")&&!r.data("light")&&!r.data("xcx"))return void e.setLog(this,l);r.data("light")&&(l=i(l,{cyc:1})),t=r.get(0).className.match(s),t&&(u=c[t[0]],o.get(l,"clk_info.type")||(l=i(l,{clk_info:{type:u}}))),!l.hasOwnProperty("cyc")&&l.hasOwnProperty("c")&&(l.cyc=l.c,delete l.c),e.send(l)}})},r}),define("next/m/utils/page-event",["require"],function(t){function e(){
i||(i=!0,r=!1,a.forEach(function(t){t()}))}function n(){r||(r=!0,i=!1,o.forEach(function(t){t()}))}var i=!1,r=!1,o=[],a=[];return function(){window.addEventListener("visibilitychange",function(){document.hidden?n():e()}),window.addEventListener("beforeunload",n),window.addEventListener("bbabeepagewillinactive",n),window.addEventListener("pageHide",n),window.addEventListener("blur",n),window.addEventListener("unload",n),window.addEventListener("pageshow",e),
window.addEventListener("bbabeepagewillactive",e),window.addEventListener("foucs",e)}(),{onPageShow:function(t){"function"==typeof t&&a.push(t)},onPageHide:function(t){"function"==typeof t&&o.push(t)}}});var pageDurationLogger;view.on("start",function(){if(pageDurationLogger)return void pageDurationLogger.init();require(["next/m/log/page_duration"],function(t){pageDurationLogger=t,pageDurationLogger.init()})}),view.on("stop",function(){pageDurationLogger&&pageDurationLogger.send()}),
define("next/m/log/page_duration",["require","@baidu/ubc-report-sdk/dist/ubc-web-sdk.umd.min"],function(t){function e(){return!!localStorage.getItem("wise_dur_clkparams")}function n(){e()&&(a=!1,c=Date.now(),s=location.href,u=document.title,l=page.comm.applid,d=page.comm.lid,m=page.comm.sids,f=localStorage.getItem("wise_dur_clkparams"))}function i(t){!a&&e()&&(a=!0,p=Date.now(),r("843.event",{type:"h5",ext:{starttime:c,endtime:p,url:s,extclickparams:f,title:u,sid:m,lid:d,applid:l,duration:p-c}
}))}var r=t("@baidu/ubc-report-sdk/dist/ubc-web-sdk.umd.min"),o={page:"result",from:"search",version:"2.0",queryParams:{appname:"baiduboxapp"},useSendBeacon:!0};r("843.init",843,o),r("843.config",o);var a,c,s,u,l,d,m,f,p;return t(["next/m/utils/page-event"],function(t){t.onPageHide(i),t.onPageShow(n)}),{init:n,send:i}}),define("next/m/inline/inline-module",["require","next/m/inline/some"],function(t){var e=t("next/m/inline/some");return console.log("Loaded inline-module"),
t(["next/m/dynamic"],function(t){console.log("Dynamic module loaded, say: "+t)}),"Hello from inline-module, and "+e}),define("next/m/inline/some",["require"],function(t){return console.log("Loaded some"),"Hello from some"}),define("next/m/main",["require","next-atom","zepto","next/m/log/page_duration","next/m/utils/logger","next/m/router","next/m/log/tclog","next/m/utils/tcurl","next/m/directives/lifecycle","next/m/filters/index","webb/instance"],function(t){function e(t){
t=t||window.location.href;for(var e={},n=t.substring(t.indexOf("?")+1).split("&"),i=0;i<n.length;i++)if(n[i]){var r=n[i].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}function n(t,n){var i,r=n.selector,s=n.atomData,m=new l(a(r)[0],n.page.comm),h=new d(n.page.comm);f.init(),c.init();var x=e();return i=new o({el:a(r)[0],render:function(t){return t("NextPage",{props:s,attrs:{"data-atn":x.atn,"atom-page":""}})},components:{NextPage:t},data:s,created:function(){
this.page=n.page||{},this.view=n.view||{},this.vw=n.vw||{},this.page.sendLog=function(t){m.send(t)},this.page.makeTcUrl=function(t){return h.makeTcUrl(t)},this.timeStamp=n.timeStamp},mounted:function(){this.$nextTick(function(){this.view&&this.view.emit&&this.view.emit("atomMounted"),this.$emit("mounted")})},updated:function(){this.$nextTick(function(){this.$emit("updated")})},errorCaptured:function(t,e,n){return p.send("et_js",{msg:t.message,file:t.fileName,ln:t.lineNumber,col:t.columnNumber,
stack:t.stack?t.stack.slice(0,g):"",hook:n,env:"next-page"},{pd:x.pd,atn:x.atn,pageType:"next-page"}),!0}}),u.start(i,n.pd,n.timeStamp),i}function i(t,e){if(!t)return void s.debug("vue app destroy skipped");c.send(),t.$destroy(),u.stop(t,e),s.debug("vue app destroyed")}function r(t){var e=[];try{for(var n=a(t).closest("[srcid]")[0];t&&t!==n;){for(var i=t.previousSibling,r=1;i;)1===i.nodeType&&i.nodeName===t.nodeName&&r++,i=i.previousSibling;var o=a(t).data("module");o=o?"("+o+")":"",
e.push(t.nodeName.toLowerCase()+(r>1?r:"")+o),t=t.parentNode}}catch(t){e=[]}return e.reverse().join("-")}var o=t("next-atom"),a=t("zepto"),c=t("next/m/log/page_duration"),s=t("next/m/utils/logger"),u=t("next/m/router"),l=t("next/m/log/tclog"),d=t("next/m/utils/tcurl"),m=t("next/m/directives/lifecycle"),f=t("next/m/filters/index"),p=t("webb/instance").getInstance("4_145"),g=350,h=0;return o.use(m),{create:function(e,i){var r=e;h++,t([r.componentId],function(t){i(n(t,r))})},destroy:i,parseUrl:e,
getXpath:r}}),define("next/m/utils/logger",["require"],function(t){function e(){o=r=Date.now()}function n(){var t=Array.prototype.slice.call(arguments).join(" "),e=Date.now();t="["+(e-r)/1e3+"(+"+(e-o)+")] "+t,i(t),o=e}function i(t){console.log(t)}var r=Date.now(),o=r;return{debug:n,log:n,reset:e}}),define("next/m/utils/md5",["require"],function(t){return function(t,e){function n(t,e){return t<<e|t>>>32-e}function i(t,e){
var n=2147483648&t,i=2147483648&e,r=1073741824&t,o=1073741824&e,a=(1073741823&t)+(1073741823&e);return r&o?2147483648^a^n^i:r|o?1073741824&a?3221225472^a^n^i:1073741824^a^n^i:a^n^i}function r(t,e,n){return t&e|~t&n}function o(t,e,n){return t&n|e&~n}function a(t,e,n){return t^e^n}function c(t,e,n){return e^(t|~n)}function s(t,e,o,a,c,s,u){return t=i(t,i(i(r(e,o,a),c),u)),i(n(t,s),e)}function u(t,e,r,a,c,s,u){return t=i(t,i(i(o(e,r,a),c),u)),i(n(t,s),e)}function l(t,e,r,o,c,s,u){
return t=i(t,i(i(a(e,r,o),c),u)),i(n(t,s),e)}function d(t,e,r,o,a,s,u){return t=i(t,i(i(c(e,r,o),a),u)),i(n(t,s),e)}function m(t){var e,n,i="",r="";for(n=0;n<=3;n++)e=t>>>8*n&255,r="0"+e.toString(16),i+=r.substr(r.length-2,2);return i}var f,p,g,h,x,v,y,w,b,k=Array();for(k=function(t){for(var e,n=t.length,i=n+8,r=(i-i%64)/64,o=16*(r+1),a=Array(o-1),c=0,s=0;s<n;)e=(s-s%4)/4,c=s%4*8,a[e]=a[e]|t.charCodeAt(s)<<c,s++;return e=(s-s%4)/4,c=s%4*8,a[e]=a[e]|128<<c,a[o-2]=n<<3,a[o-1]=n>>>29,a}(t),
v=1732584193,y=4023233417,w=2562383102,b=271733878,f=0;f<k.length;f+=16)p=v,g=y,h=w,x=b,v=s(v,y,w,b,k[f+0],7,3614090360),b=s(b,v,y,w,k[f+1],12,3905402710),w=s(w,b,v,y,k[f+2],17,606105819),y=s(y,w,b,v,k[f+3],22,3250441966),v=s(v,y,w,b,k[f+4],7,4118548399),b=s(b,v,y,w,k[f+5],12,1200080426),w=s(w,b,v,y,k[f+6],17,2821735955),y=s(y,w,b,v,k[f+7],22,4249261313),v=s(v,y,w,b,k[f+8],7,1770035416),b=s(b,v,y,w,k[f+9],12,2336552879),w=s(w,b,v,y,k[f+10],17,4294925233),y=s(y,w,b,v,k[f+11],22,2304563134),
v=s(v,y,w,b,k[f+12],7,1804603682),b=s(b,v,y,w,k[f+13],12,4254626195),w=s(w,b,v,y,k[f+14],17,2792965006),y=s(y,w,b,v,k[f+15],22,1236535329),v=u(v,y,w,b,k[f+1],5,4129170786),b=u(b,v,y,w,k[f+6],9,3225465664),w=u(w,b,v,y,k[f+11],14,643717713),y=u(y,w,b,v,k[f+0],20,3921069994),v=u(v,y,w,b,k[f+5],5,3593408605),b=u(b,v,y,w,k[f+10],9,38016083),w=u(w,b,v,y,k[f+15],14,3634488961),y=u(y,w,b,v,k[f+4],20,3889429448),v=u(v,y,w,b,k[f+9],5,568446438),b=u(b,v,y,w,k[f+14],9,3275163606),
w=u(w,b,v,y,k[f+3],14,4107603335),y=u(y,w,b,v,k[f+8],20,1163531501),v=u(v,y,w,b,k[f+13],5,2850285829),b=u(b,v,y,w,k[f+2],9,4243563512),w=u(w,b,v,y,k[f+7],14,1735328473),y=u(y,w,b,v,k[f+12],20,2368359562),v=l(v,y,w,b,k[f+5],4,4294588738),b=l(b,v,y,w,k[f+8],11,2272392833),w=l(w,b,v,y,k[f+11],16,1839030562),y=l(y,w,b,v,k[f+14],23,4259657740),v=l(v,y,w,b,k[f+1],4,2763975236),b=l(b,v,y,w,k[f+4],11,1272893353),w=l(w,b,v,y,k[f+7],16,4139469664),y=l(y,w,b,v,k[f+10],23,3200236656),
v=l(v,y,w,b,k[f+13],4,681279174),b=l(b,v,y,w,k[f+0],11,3936430074),w=l(w,b,v,y,k[f+3],16,3572445317),y=l(y,w,b,v,k[f+6],23,76029189),v=l(v,y,w,b,k[f+9],4,3654602809),b=l(b,v,y,w,k[f+12],11,3873151461),w=l(w,b,v,y,k[f+15],16,530742520),y=l(y,w,b,v,k[f+2],23,3299628645),v=d(v,y,w,b,k[f+0],6,4096336452),b=d(b,v,y,w,k[f+7],10,1126891415),w=d(w,b,v,y,k[f+14],15,2878612391),y=d(y,w,b,v,k[f+5],21,4237533241),v=d(v,y,w,b,k[f+12],6,1700485571),b=d(b,v,y,w,k[f+3],10,2399980690),
w=d(w,b,v,y,k[f+10],15,4293915773),y=d(y,w,b,v,k[f+1],21,2240044497),v=d(v,y,w,b,k[f+8],6,1873313359),b=d(b,v,y,w,k[f+15],10,4264355552),w=d(w,b,v,y,k[f+6],15,2734768916),y=d(y,w,b,v,k[f+13],21,1309151649),v=d(v,y,w,b,k[f+4],6,4149444226),b=d(b,v,y,w,k[f+11],10,3174756917),w=d(w,b,v,y,k[f+2],15,718787259),y=d(y,w,b,v,k[f+9],21,3951481745),v=i(v,p),y=i(y,g),w=i(w,h),b=i(b,x);return 32==e?m(v)+m(y)+m(w)+m(b):m(y)+m(w)}}),define("next/m/utils/animate-detect",["require"],function(t){
var e=window.navigator.userAgent.toLocaleLowerCase(),n=!1,i=/android/gi.test(e)&&/android[\s|/]([\d.]+);?/gi.exec(e)?parseFloat(/android[\s|/]([\d.]+);?/gi.exec(e)[1]):0;return(e.indexOf("iphone")>-1||i>=5)&&(n=!0),n}),define("next/m/utils/tcurl",["require"],function(t){function e(t){this.commData=t||{}}return e.prototype.buildParamsString=function(t,e,n){var i="";return $.each(t,function(t,n){i+=e+t+"="+n}),n?i:i.substring(1)},e.prototype.getJumpLinkUrl=function(t){
var e=this,n="https://m.baidu.com",i=this.commData,r={module:"sf",pd:i.pd||"",tn:i.tn||"",lid:i.lid,ref:i.ref},o=["nsrc","nt","sto","tj","waplogo","ref","lid","fm","order","dict","src","di","sec","clk_info","l","vipsign","module"];if(t){$.each(o,function(e,n){if(t[n]){var i=t[n];r[n]="object"==typeof i?encodeURIComponent(JSON.stringify(i)):encodeURIComponent(i)}});var a={from:i.from||0,ssid:i.ssid||0,uid:i.uid||0,bd_page_type:i.bd_page_type||0,pu:i.pu||0,baiduid:i.baiduid||0,
w:i.pn+"_"+i.rn+"_"+encodeURIComponent(i.query),t:i.abct||0,l:1};return n+=e.buildParamsString(a,"/",!0),n+="/tc?",n+=e.buildParamsString(r,"&",!1)}},e.prototype.makeTcUrl=function(t){return this.getJumpLinkUrl(t)},e}),define("next/m/utils/pack-collect",["require","webb/instance"],function(t){function e(t,e,r){var o={pd:t||"",atn:e||"",url:r||"",diff:{count:0}};i.packs.length>0?(i.packs.forEach(function(t){t.pd===o.pd&&t.atn===o.atn&&(t.url!==o.url&&(t.url=o.url,t.diff.count++,
o.diff.count=t.diff.count,i.isEqual=!1),i.isExist=!0)}),i.isExist||i.packs.push(o),i.isEqual||n&&n.send("et_httpres",{msg:o.url},{pd:t,atn:e})):i.packs.push(o)}var n=t("webb/instance").getInstance("1_21"),i={packs:[],isExist:!1,isEqual:!0};return{packHandler:e}}),define("next/m/mixin/lifecycle",["require","next-atom"],function(t){function e(t){n.mixin({mounted:function(){var e=this;e.bindEventStatus||(t.onStart(function(){e.sfAttach()}),t.onStop(function(){e.sfDetach()}))},methods:{
sfAttach:function(){},sfDetach:function(){}}})}var n=t("next-atom");return{init:e}}),define("next/m/directives/lifecycle",["require","next-atom"],function(t){function e(){n.prototype.$bindSfAttach=function(){var t=this;t.$root.page.attached?t.sfAttach():t.$root.view.onStart(function(){t.$root.page.attached=1,t.sfAttach()})},n.prototype.$bindSfDetach=function(t){var e=this;e.$root.view.onStop(function(){e.$root.page.attached=0,e.sfDetach(),e.$root.view.one("start",function(){e.sfAttach()})})},
n.mixin({methods:{sfAttach:function(){},sfDetach:function(){}}})}var n=t("next-atom");return{install:e}}),define("next/m/mixin/index",["require","next/m/mixin/lifecycle"],function(t){function e(t){n.init(t)}var n=t("next/m/mixin/lifecycle");return{init:e}}),define("next/m/router-conf",["require","sfr"],function(t){var e,n={image_content:{page:"list",mediacy:"mediacy",albumdetail:"albumdetail",browsedetail:"browsedetail",storydetail:"storydetail",connectlist:"connectlist",
connectdetail:"connectdetail",collectlist:"collectlist",collectdetail:"collectdetail",memelist:"memelist",memedetail:"memedetail"},image_scene:{collectlist:"collectlist",collectdetail:"collectdetail",memelist:"memelist",memedetail:"memedetail"},jinnang:{page:"index",article:"article"}},i=t("sfr").cache;return e=i.has("historyRouterConf")?i.using("historyRouterConf"):i.create("historyRouterConf",{limit:200}),e.set("image_content",{page:"list",mediacy:"mediacy",albumdetail:"albumdetail",
browsedetail:"browsedetail",storydetail:"storydetail",connectlist:"connectlist",connectdetail:"connectdetail",collectlist:"collectlist",collectdetail:"collectdetail",memelist:"memelist",memedetail:"memedetail"}),e.set("image_scene",{collectlist:"collectlist",collectdetail:"collectdetail",memelist:"memelist",memedetail:"memedetail"}),e.set("jinnang",{page:"index",article:"article"}),{conf:n,historyRouterCache:e}}),
define("next/m/router",["require","next/m/utils/logger","sfr","next/m/router-conf","zepto"],function(t){function e(t){t=t||window.location.href;var e={};return p.url.parse(t).query.split("&").forEach(function(t){var n=t.split("=")[0],i=t.split("=")[1];n&&i&&(e[n]=decodeURIComponent(i))}),e}function n(t){var n=e(),r=n.pd,o=v(t.target).closest("a"),c=o.attr("href"),s=o.attr("to"),u=o.attr("from"),l=o.attr("extra"),d=o.attr("timestamp"),p=r+d,g=y[p];if(w=d,!i(s,r,d)){
if(u!==s)return void(location.href=c);if(l===g.$data.extra)return void(location.href=c)}b++,m=f.assign(a(),{disableServiceDispatch:!0,from:u,to:s,href:c,extra:l,silent:!0}),g.$data.extra=l,g.$data.componentName=s,x.redirect(c,{},m),x.reset(c,{},m),k.push(m),t.preventDefault()}function i(t,e,n){var i=e+n,r=y[i];return!!r&&!!r.$children[0].$options.components[t]}function r(t){var n=e(),i=n.pd,r=n.atn,a=w,c=history.state||{},s=c.extra||void 0,u=g.get(i);u&&o(u[r],i,a,s)}function o(t,e,n,r){
var o=y[e+n];i(t,e,n)&&o?(o.$data.componentName=t,r&&(o.$data.extra=r)):o&&o.$data.componentName===t&&r&&(o.$data.extra=r)}function a(t){var e=history.state||{};return e.atomPageId=b,t&&t.$data.extra&&(e.extra=t.$data.extra),e}function c(t,e,n,i){var r=f.assign(history.state,n);x.reset(t,e,r,i)}function s(t,e,n,i){b++,x.redirect(t,e,n,i)}function u(){return"state"in window.history}function l(t,e,i){h(t,"empty pageVm");var o=a(t);y[e+i]=t,history.replaceState(o,null),k.push(o),
u()&&(v(t.$el).on("click","a[router-link]",n),v(window).on("popstate",r))}function d(t,e,i){h(t,"not started, cannot stop");var r=e+i;v(t.$el).off("click",n),g.remove(e),y[r]=null,k=[],_=[]}var m,f=(t("next/m/utils/logger"),t("sfr")._),p=t("sfr"),g=(t("next/m/router-conf").conf,t("next/m/router-conf").historyRouterCache),h=t("sfr").assert,x=t("sfr").action,v=t("zepto"),y={},w="",b=1,k=[],_=[];return{start:l,stop:d,redirect:s,reset:c}}),
define("next",["require","next/m/router","next/m/utils/animate-detect"],function(t){return{router:t("next/m/router"),animateDetect:t("next/m/utils/animate-detect")}}),define("next/m/make_link_url",["require"],function(t){function e(){this.commData=page.comm}return e.prototype.buildParamsString=function(t,e,n){var i="";return $.each(t,function(t,n){i+=e+t+"="+n}),n?i:i.substring(1)},e.prototype.getJumpLinkUrl=function(t){var e=this,n="https://m.baidu.com",i=this.commData,r={module:"sf",
pd:i.pd||"",tn:i.tn||"",lid:i.lid,ref:i.ref},o=["nsrc","nt","sto","tj","waplogo","ref","lid","fm","order","dict","src","di","sec","clk_info","l","vipsign","module","cyc","extra"];if(t){$.each(o,function(e,n){if(t[n]){var i=t[n],o="object"==typeof i?JSON.stringify(i):i;"extra"===n&&o.length>1e3&&(o=o.slice(0,1e3)),r[n]=encodeURIComponent(o)}});var a={from:i.from||0,ssid:i.ssid||0,uid:i.uid||0,bd_page_type:i.bd_page_type||0,pu:i.pu||0,baiduid:i.baiduid||0,
w:i.pn+"_"+i.rn+"_"+encodeURIComponent(i.query),t:i.abct||0,l:1};return 0===a.from&&/^http(s)?:\/\/.+\.baidu\.com/.test(t.src)&&delete a.from,n+=e.buildParamsString(a,"/",!0),n+="/tc?",n+=e.buildParamsString(r,"&",!1)}},e.prototype.getOriginUrl=function(t){var e;return t&&"string"==typeof t?e=t:t&&t.url&&(e=t.url),e},e.prototype.decodeRestfulUrl=function(t){var e=t.replace(new RegExp("/","g"),"%2F");return decodeURIComponent(e)},e.prototype.encodeRestfulUrl=function(t){
var e=encodeURIComponent(t);e=e.replace(/%2F/g,"/");for(var n=0;n<e.length;n++){var i=e.charAt(n),r=e.charAt(n+1);if("/"!==i||"/"===r)for(;"/"===e.charAt(n)&&n<e.length;)e=e.slice(0,n)+"%2F"+e.slice(n+1),n+=3}return e},e.prototype.processUrl=function(t,e){var n={type:"",mipUrl:"",cacheUrl:"",baiduUrl:"",mainUrl:"",isHttps:!1,hasQuery:!1},i="https://mipcache.bdstatic.com/c/",r="https://m.baidu.com/mip/c/";e&&(r="https://m.baidu.com/"+e+"/c/");var o,a
;return 0===t.indexOf(i)?(n.type="MIP-Cache Url",o=new RegExp(i+"(s/)?(\\S+)")):0===t.indexOf(r)?(n.type="Baidu Url",o=new RegExp(r+"(s/)?(\\S+)")):(n.type="MIP Url",o=new RegExp("http(s)?://(\\S+)")),!!(a=o.exec(t))&&(a[1]&&(n.isHttps=!0),n.mainUrl=this.decodeRestfulUrl(a[2]),n.mipUrl="http"+(n.isHttps?"s":"")+"://"+n.mainUrl,n.cacheUrl=i+(n.isHttps?"s/":"")+n.mainUrl,n.baiduUrl=r+(n.isHttps?"s/":"")+this.encodeRestfulUrl(n.mainUrl),n)},e.prototype.makeTcLink=function(t){
return!!t.url&&(t.src=t.url,this.getJumpLinkUrl(t))},e.prototype.makeSfLink=function(t){var e=this.getOriginUrl(t.url),n={mu:e};t.cyc&&(n.c=t.cyc),t.extra&&t.extra.length>1e3&&(t.extra=t.extra.slice(0,1e3)),t.extra&&(n.extra=t.extra),/word=/.test(e)||(e+="&word="+this.commData.query),/title=/.test(e)||(e+="&title="+this.commData.title);var i=e.replace(/^http(s)?:\/\/m.baidu.com/,"")+"&lid="+this.commData.lid+"&ms=1";return t.anchor&&(i+="#"+t.anchor),{type:"sf",sfUrl:i,options:t.options,
log:JSON.stringify(n),tcUrl:this.makeTcLink({url:location.protocol+"//"+location.host+i,cyc:t.cyc,extra:t.extra})}},e.prototype.makeMipLink=function(t){var e=this.getOriginUrl(t.url),n=this.commData.mipAladdinPrefix,i={};if(t.cyc&&(i.c=t.cyc),t.extra&&t.extra.length>10&&(t.extra=t.extra.slice(0,10)),t.extra&&(i.extra=t.extra),!e||!/^http(s)?:\/\//.test(e))throw new Error('makeMipLink parameter error: "url" or "url.url" can not be empty, and must start with "http://" or "https://".')
;if(!t.title)throw new Error('makeMipLink parameter error: "title" can not be empty.');t.isInstanceServices&&(n=page.comm.mipInstantServicesPrefix);var r=this.processUrl(e,n);if(!r)throw new Error("makeMipLink parameter error: wrong url format.");var o=r.baiduUrl.slice("https://m.baidu.com".length),a="",c=e.indexOf("#");c>=0&&c<e.length-1&&(a=e.slice(c+1)+"&");var s="#"+a,u=s+["word=",this.commData.query,"&lid=",this.commData.lid,"&mipanchor=",a].join(""),l={title:t.title,lid:this.commData.lid,
mipCustomHash:encodeURIComponent(u)};return{type:"sf",sfUrl:o,options:JSON.stringify(l),log:JSON.stringify(i),tcUrl:this.makeTcLink({url:location.protocol+"//m.baidu.com"+o,cyc:t.cyc,extra:t.extra})}},e});