define("@baidu/video-decoder-player/dist/index",function(e){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},
t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(t){return e[t]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)
}([function(e,t,n){"use strict";function r(e,t){function n(){this.constructor=e}if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");I(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0
;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function i(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function a(e,t){
return function(n,r){t(n,r,e)}}function s(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}u((r=r.apply(e,t||[])).next())})}function l(e,t){function n(n){return function(a){return function(n){
if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(i=2&n[0]?o.return:n[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,o=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!((i=i.length>0&&i[i.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}
if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){s.label=n[1];break}if(6===n[0]&&s.label<i[1]){s.label=i[1],i=n;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(n);break}i[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],o=0}finally{r=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}var r,o,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},
"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a}function f(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||A(t,e,n)}function c(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function d(e,t){
var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function h(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e}function p(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0
;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}function _(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||t)}function E(e){return this instanceof E?(this.v=e,this):new E(e)}function m(e,t,n){function r(e){l[e]&&(u[e]=function(t){return new Promise(function(n,r){f.push([e,t,n,r])>1||o(e,t)})})}function o(e,t){try{
(n=l[e](t)).value instanceof E?Promise.resolve(n.value.v).then(i,a):s(f[0][2],n)}catch(e){s(f[0][3],e)}var n}function i(e){o("next",e)}function a(e){o("throw",e)}function s(e,t){e(t),f.shift(),f.length&&o(f[0][0],f[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var u,l=n.apply(e,t||[]),f=[];return u={},r("next"),r("throw"),r("return"),u[Symbol.asyncIterator]=function(){return this},u}function y(e){function t(t,o){n[t]=e[t]?function(n){return(r=!r)?{
value:E(e[t](n)),done:"return"===t}:o?o(n):n}:o}var n,r;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n}function g(e){function t(t){n[t]=e[t]&&function(n){return new Promise(function(r,o){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}(r,o,(n=e[t](n)).done,n.value)})}}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=e[Symbol.asyncIterator]
;return r?r.call(e):(e=c(e),n={},t("next"),t("throw"),t("return"),n[Symbol.asyncIterator]=function(){return this},n)}function v(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&A(t,e,n);return w(t,e),t}function D(e){return e&&e.__esModule?e:{default:e}}function O(e,t,n,r){
if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function S(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter")
;if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n}n.r(t),n.d(t,"__extends",function(){return r}),n.d(t,"__assign",function(){return R}),n.d(t,"__rest",function(){return o}),n.d(t,"__decorate",function(){return i}),n.d(t,"__param",function(){return a}),n.d(t,"__metadata",function(){return s}),n.d(t,"__awaiter",function(){return u}),
n.d(t,"__generator",function(){return l}),n.d(t,"__createBinding",function(){return A}),n.d(t,"__exportStar",function(){return f}),n.d(t,"__values",function(){return c}),n.d(t,"__read",function(){return d}),n.d(t,"__spread",function(){return h}),n.d(t,"__spreadArrays",function(){return p}),n.d(t,"__spreadArray",function(){return _}),n.d(t,"__await",function(){return E}),n.d(t,"__asyncGenerator",function(){return m}),n.d(t,"__asyncDelegator",function(){return y}),n.d(t,"__asyncValues",function(){
return g}),n.d(t,"__makeTemplateObject",function(){return v}),n.d(t,"__importStar",function(){return T}),n.d(t,"__importDefault",function(){return D}),n.d(t,"__classPrivateFieldGet",function(){return O}),n.d(t,"__classPrivateFieldSet",function(){return S});var I=function(e,t){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},R=function(){
return(R=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},A=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]},w=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}},function(e,t,n){
"use strict";e.exports=function(e,t,n,r){var o=self||window;try{try{var i;try{i=new o.Blob([e])}catch(t){(i=new(o.BlobBuilder||o.WebKitBlobBuilder||o.MozBlobBuilder||o.MSBlobBuilder)).append(e),i=i.getBlob()}var a=o.URL||o.webkitURL,s=a.createObjectURL(i),u=new o[t](s,n);return a.revokeObjectURL(s),u}catch(r){return new o[t]("data:application/javascript,".concat(encodeURIComponent(e)),n)}}catch(e){if(!r)throw Error("Inline worker is not supported");return new o[t](r,n)}}},function(e,t,n){var r
;void 0===(r=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONTROL_GROUP_WASM_URL=t.CORE_WASM_URL=t.VIDEOHANDLER=t.STSZ=t.CO64=t.STCO=t.MDAT=t.FTYP=t.FREE=t.MOOV=t.VIDEO_EVENT=t.MAX_CHUNCK_SIZE=t.DOWNLOAD_BUFFER_SIZE=t.INIT_CHUNCK_SIZE=t.WAIT_HEADER_LENGTH=t.VIDEO_FRAME_DIFF=t.MAX_DECODING_TIME_LENGTH=t.MAX_BUFFER_TIME_LENGTH=t.PLAYER_STATE_PAUSING=t.PLAYER_STATE_PLAYING=t.PLAYER_STATE_IDLE=void 0,t.PLAYER_STATE_IDLE=0,t.PLAYER_STATE_PLAYING=1,
t.PLAYER_STATE_PAUSING=2,t.MAX_BUFFER_TIME_LENGTH=1.5,t.MAX_DECODING_TIME_LENGTH=3,t.VIDEO_FRAME_DIFF=40,t.WAIT_HEADER_LENGTH=1048576,t.INIT_CHUNCK_SIZE=Math.pow(2,16),t.DOWNLOAD_BUFFER_SIZE=1048576,t.MAX_CHUNCK_SIZE=6*t.INIT_CHUNCK_SIZE,t.VIDEO_EVENT={playing:"playing",waiting:"waiting",seeking:"seeking",seeked:"seeked",ended:"ended",loadedmetadata:"loadedmetadata",loadeddata:"loadeddata",canplay:"canplay",timeupdate:"timeupdate",play:"play",pause:"pause",volumechange:"volumechange"},
t.MOOV=[109,111,111,118],t.FREE=[102,114,101,101],t.FTYP=[102,116,121,112],t.MDAT=[109,100,97,116],t.STCO=[115,116,99,111],t.CO64=[99,111,54,52],t.STSZ=[115,116,115,122],t.VIDEOHANDLER=[118,105,100,101],t.CORE_WASM_URL="https://psstatic.cdn.bcebos.com/video/wasm/libffmpeg_core3_1645772133000.wasm",t.CONTROL_GROUP_WASM_URL="https://psstatic.cdn.bcebos.com/video/wasm/libffmpeg25_1646724447000.wasm"}.apply(t,[n,t]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(e,t){"use strict"
;function n(e){var t=e&&e.ownerDocument||document,n=t.compatMode;return n&&"CSS1Compat"!==n?t.body:t.documentElement}Object.defineProperty(t,"__esModule",{value:!0}),t.getClientHeight=t.getClientWidth=t.getPosition=void 0,t.getPosition=function(e){var t=e.getBoundingClientRect(),n=document.documentElement,r=document.body,o=n.clientTop||r.clientTop||0,i=n.clientLeft||r.clientLeft||0,a=window.pageYOffset||n.scrollTop,s=window.pageXOffset||n.scrollLeft;return{left:t.left+s-i,top:t.top+a-o,
width:t.width,height:t.height}},t.getClientWidth=function(){return n().clientWidth},t.getClientHeight=function(){return n().clientHeight}}.apply(t,[n,t]))||(e.exports=r)},function(e,t,n){var r,o;r=[n,t,n(2)],void 0===(o=function(e,t,n){"use strict";function r(e,t){if(e.length!==t.length)return!1;for(var n=!0,r=0;r<e.length;r++)if(e[r]!==t[r]){n=!1;break}return n}function o(e){for(var t=0,n=e.length-1;n>=0;n--)t+=Math.pow(16,2*(e.length-n-1))*e[n];return t}function i(e,t,n){void 0===n&&(n=0)
;for(var r=n;r<e.length;r++){for(var o=!0,i=0;i<t.length;i++)if(e[r+i]!==t[i]){o=!1;break}if(o)return r}return-1}function a(e,t,n,r,o){var i=e;if(o)for(a=t;a<n;a+=8)s=i[a+7]+i[a+6]*Math.pow(16,2)+i[a+5]*Math.pow(16,4)+i[a+4]*Math.pow(16,6),i[a+3],Math.pow(16,8),i[a+2],Math.pow(16,10),i[a+1],Math.pow(16,12),i[a],Math.pow(16,14),s+=r,i[a+7]=s%Math.pow(16,2),i[a+6]=Math.floor(s/Math.pow(16,2))%Math.pow(16,2),i[a+5]=Math.floor(s/Math.pow(16,4))%Math.pow(16,2),
i[a+4]=Math.floor(s/Math.pow(16,6))%Math.pow(16,2),i[a+3]=Math.floor(s/Math.pow(16,8))%Math.pow(16,2),i[a+2]=Math.floor(s/Math.pow(16,10))%Math.pow(16,2),i[a+1]=Math.floor(s/Math.pow(16,12))%Math.pow(16,2),i[a]=Math.floor(s/Math.pow(16,14))%Math.pow(16,2);else for(var a=t;a<n;a+=4){var s=i[a+3]+i[a+2]*Math.pow(16,2)+i[a+1]*Math.pow(16,4)+i[a]*Math.pow(16,6);s+=r,i[a+3]=s%Math.pow(16,2),i[a+2]=Math.floor(s/Math.pow(16,2))%Math.pow(16,2),i[a+1]=Math.floor(s/Math.pow(16,4))%Math.pow(16,2),
i[a]=Math.floor(s/Math.pow(16,6))%Math.pow(16,2)}return i}Object.defineProperty(t,"__esModule",{value:!0}),t.stringify=t.mergeMoov=t.getMoovSizeByChunk=t.getVideoTypeInfo=t.getStartPlayLength=t.getChunkInfo=void 0;var s=[Math.pow(2,15),Math.pow(2,16),Math.pow(2,17),Math.pow(2,18),Math.pow(2,19)];t.getChunkInfo=function(e,t){for(var n=t/e,r=s[s.length-1],o=0;o<=s.length;o++)if(1.5*n<s[o]){r=s[o];break}return{chunkInterval:1e3/(t/e*2/r),chunkSize:r}},t.getStartPlayLength=function(e,t,i,a){
void 0===t&&(t=!1),void 0===i&&(i=0),void 0===a&&(a=0);for(var s=new Uint8Array(e),u=i>0,l=a>0,f=0;f<s.length;f++){if(t){if(!u){var c=s.slice(f,f+n.STCO.length),d=!1;(u=r(c,n.STCO))||(u=r(c,n.CO64))&&(d=!0),u&&void 0!==s[f+15]&&(d?void 0!==s[f+19]&&(i=o(s.slice(f+16,f+20))):i=o(s.slice(f+12,f+16)))}l||(l=r(s.slice(f,f+n.STSZ.length),n.STSZ))&&void 0!==s[f+19]&&(a=o(s.slice(f+16,f+20)))}else t=r(s.slice(f,f+n.VIDEOHANDLER.length),n.VIDEOHANDLER);if(l&&u)return{hasVIDEOHANDLER:t,size:a+i}}return{
hasVIDEOHANDLER:t,indexSTCO:i,indexSTSZ:a,size:0}},t.getVideoTypeInfo=function(e){for(var t=new Uint8Array(e),i={moov:{index:-1,size:0},free:{index:-1,size:0},mdat:{index:-1,size:0},ftyp:{index:-1,size:0}},a=!1,s=!1,u=!1,l=!1,f=0;f<t.length&&(a||(a=r(t.slice(f,f+n.MOOV.length),n.MOOV))&&(i.moov.index=f-4,i.moov.size=o(t.slice(f-4,f))),s||(s=r(t.slice(f,f+n.FREE.length),n.FREE))&&(i.free.index=f-4,i.free.size=o(t.slice(f-4,f))),u||(u=r(t.slice(f,f+n.MDAT.length),n.MDAT))&&(i.mdat.index=f-4,
i.mdat.size=o(t.slice(f-4,f))),l||(l=r(t.slice(f,f+n.FTYP.length),n.FTYP))&&(i.ftyp.index=f-4,i.ftyp.size=o(t.slice(f-4,f))),!(a&&s&&u&&l));f++);return i},t.getMoovSizeByChunk=function(e){var t=new Uint8Array(e),r=i(t,n.MOOV,0);return o(t.slice(r-4,r))},t.mergeMoov=function(e,t,r,s){var u=new Uint8Array(t),l=new Uint8Array(e),f=i(u,n.MOOV,0),c=o(u.slice(f-4,f));if(-1===f)return[];var d=i(u=u.slice(f-4,f-4+c),n.STCO,0),h=!1;if(-1===d&&(d=i(u,n.CO64,0),h=!0),-1===d)return[]
;var p=o(u.slice(d-4,d)),_=i(u=a(u,d+12,d-4+p,c,h),n.STCO,d+4);h=!1,-1===_&&(_=i(u,n.CO64,d+4),h=!0),u=a(u,_+12,_-4+o(u.slice(_-4,_)),c,h);var E=l.buffer.slice(0,s.ftyp.size),m=l.buffer.slice(s.ftyp.size);return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,r=0;r<e.length;r++)n+=e[r].byteLength;for(var o=new Uint8Array(n),i=0,a=0,s=e;a<s.length;a++){var u=s[a],l=new Uint8Array(u);o.set(l,i),i+=u.byteLength}return o.buffer}(E,u.buffer,m)},
t.stringify=function(e){return Object.keys(e).map(function(t){var n=e[t];return void 0===n?n="":"string"!=typeof n&&(n=JSON.stringify(n)),encodeURIComponent(t)+"="+encodeURIComponent(n)}).join("&")}}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n,t,n(0),n(6),n(16),n(17)],void 0===(o=function(e,t,n,r,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.support=t.prefetch=t.Player=void 0,r=n.__importDefault(r),o=n.__importDefault(o),t.Player=r.default,
t.prefetch=o.default,Object.defineProperty(t,"support",{enumerable:!0,get:function(){return i.support}})}.apply(t,r))||(e.exports=o)},function(e,t,n){var r,o;r=[n,t,n(0),n(7),n(8),n(2),n(9),n(12),n(13),n(14),n(4),n(15),n(3)],void 0===(o=function(e,t,n,r,o,i,a,s,u,l,f,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s=n.__importDefault(s),u=n.__importDefault(u),l=n.__importDefault(l);var h=!0,p=function(e){function t(t){var n=e.call(this)||this;switch(n.fileInfo={url:"",size:0,
offset:0,chunkSize:i.INIT_CHUNCK_SIZE,virtualSize:i.WAIT_HEADER_LENGTH,downloadSize:0},n.playerState=i.PLAYER_STATE_IDLE,n.mode="scale",n.wasmLoadedStatus=!1,n.downloading=!1,n.downloadSeqNo=0,n.decoderState=r.DECODER_STATE_IDLE,n.decoding=!1,n.buffering=!1,n.videoFrameBuffer=[],n.firstVideoFrameTime=-1,n.secondVideoFrameTime=-1,n.audioFrameBuffer=[],n.firstAudioFrameTime=-1,n.secondAudioFrameTime=-1,n.chunkInterval=200,n.videoFrameDiff=0,n.audioFrameDiff=0,n.duration=0,n.width=0,n.height=0,
n.yLength=0,n.uvLength=0,n.innerMuted=!0,n.loop=!1,n.innerCurrentTime=0,n.lastVideoTime=0,n.isFirstPaint=!1,n.isDownloadComplete=!1,n.isJumpedDownload=!1,n.seekReceivedLen=0,n.urgent=!1,n.paused=!0,n.successPlay=!1,n.firstChunkSize=new ArrayBuffer(0),n.hasFileSize=!1,n.startPlayLength=0,n.hasVIDEOHANDLER=!1,n.indexSTCO=0,n.indexSTSZ=0,n.availableSize=-1,n.isFirstPlay=!0,n.prepareSeekTo=0,n.firePlayTime=0,n.afterDownloadWasm=0,n.afterInitDecoder=0,n.afterDownloadVideo=0,n.afterOpenDecoder=0,
n.beforeDecodeOnePacket=0,n.getFirstFrame=0,n.renderFirstFrame=0,n.sampleObj=window&&window.page&&window.page.comm&&window.page.comm.sampleval||{},n.wasmUrl="",n.seeking=!1,n.justSeeked=!1,n.movedMoovSize=0,n.playCount=0,n.wasmErrorSet=new Set,+n.sampleObj.ATOM_COMPONENT_PD_video_page_ATN_vertical_COMPONENT_coreWasm){case 1:n.wasmUrl=i.CORE_WASM_URL;break;case 2:n.wasmUrl=i.CONTROL_GROUP_WASM_URL}return n.init(t),n.initDecoder(),n}return n.__extends(t,e),t.prototype.init=function(e){var t=this
;if(e.resize=void 0===e.resize||e.resize,this.options=e,this.decoderWorker=a.getDecoderWorker(),this.decoderWorker.onerror=function(e){e.message&&!t.wasmErrorSet.has(e.message.substring(0,100))&&(t.wasmErrorSet.add(e.message.substring(0,100)),c.sendWasmErrorLog.call(t,e.message))},/^\/\//.test(e.url)&&(e.url=location.protocol+e.url),this.fileInfo.url=e.url,this.initDecoderWorker(this.fileInfo,this.wasmUrl),this.downloaderWorker=a.getDownloadWorker(),this.listenMessage(),this.innerMuted=e.muted,
this.mode=e.mode||this.mode,!e.canvas){if(!e.el)throw Error("缺少el参数");var n=document.createElement("canvas"),r=d.getPosition(e.el);n.width=r.width*(window.devicePixelRatio||2),n.height=r.height*(window.devicePixelRatio||2),n.style.width="100%",n.style.height="100%",e.el.appendChild(n),e.canvas=n}this.webglPlayer=new s.default(e.el,e.canvas,{mode:this.mode,resize:e.resize}),this.loop=!!e.loop,this.pcmPlayer=new u.default({gainNodeGainValue:this.innerMuted?0:1})},
t.prototype.initDecoder=function(){this.wasmLoadedStatus&&this.decoderWorker.postMessage({status:r.INIT_DECODER_REQ,fileInfo:Object.assign({},this.fileInfo)})},t.prototype.initDecoderWorker=function(e,t){this.decoderWorker.postMessage({status:r.INIT_DECODER_WORKER_REQ,fileInfo:n.__assign({},e),wasmUrl:t})},t.prototype.downloadComplete=function(){this.stopDownloadTimer(),this.isDownloadComplete=!0,this.fileInfo.virtualSize=this.fileInfo.downloadSize,this.decoderWorker.postMessage({
status:r.DOWNLOAD_FILE_COMPLETE_REQ})},t.prototype.onInitDecoder=function(e){this.afterInitDecoder=(new Date).getTime(),0===e.initDecoderStatus?this.downloadOneChunk():(this.emit("error"),c.sendErrorLog.apply(this,[c.INIT_DECODER_FAIL]))},t.prototype.startDownloadTimer=function(){var e=this;clearInterval(this.downloadTimer),this.downloadTimer=window.setInterval(function(){e.downloadOneChunk()},this.chunkInterval)},t.prototype.stopDownloadTimer=function(){
this.downloadTimer&&clearInterval(this.downloadTimer),this.downloading=!1},t.prototype.downloadOneChunk=function(e){if(!(this.downloading||this.isDownloadComplete&&!this.isJumpedDownload||this.availableSize>=i.DOWNLOAD_BUFFER_SIZE)){var t=this.fileInfo.offset;if(this.fileInfo.size&&t>=this.fileInfo.size)this.downloadComplete();else{var n=e?this.fileInfo.offset+e:this.fileInfo.offset+this.fileInfo.chunkSize-1;this.fileInfo.size&&n>=this.fileInfo.size&&(n=this.fileInfo.size-1),
this.downloadSeqNo++,this.downloaderWorker.postMessage({status:o.DOWNLOAD_FILE_REQ,start:t,end:n,url:this.fileInfo.url,seqNo:this.downloadSeqNo}),this.downloading=!0}}},t.prototype.onDownloadOneChunk=function(e){var t=this;if(this.downloading=!1,e.seqNo===this.downloadSeqNo)if(this.seeking&&this.playerState===i.PLAYER_STATE_PAUSING&&(this.seekReceivedLen+=e.data.byteLength,
(this.seekReceivedLen>=i.WAIT_HEADER_LENGTH/2||this.isDownloadComplete||e.data.byteLength!==(e.end||0)-(e.start||0)+1)&&(this.seeking=!1,setTimeout(function(){t.emit(i.VIDEO_EVENT.canplay),t.resume(!0)},0))),0!==e.data.byteLength){if(this.fileInfo.downloadSize+=e.data.byteLength,this.fileInfo.downloadSize>=this.fileInfo.virtualSize&&(this.fileInfo.virtualSize=this.fileInfo.downloadSize),1===e.seqNo){if(this.videoTypeInfo=f.getVideoTypeInfo(e.data),this.emit(i.VIDEO_EVENT.loadeddata),
this.fileInfo.size||"number"!=typeof e.end||"number"!=typeof e.start||e.data.byteLength===e.end-e.start+1||this.downloadComplete(),this.videoTypeInfo.moov.index<0)return c.sendMoovCount.apply(this),this.firstChunkSize=e.data,this.fileInfo.offset=(this.videoTypeInfo.ftyp.size>0?this.videoTypeInfo.ftyp.size:0)+(this.videoTypeInfo.free.size>0?this.videoTypeInfo.free.size:0)+(this.videoTypeInfo.mdat.size>0?this.videoTypeInfo.mdat.size:0)-1e3,void this.downloadOneChunk(Math.pow(2,27))
;this.fileInfo.offset+=e.data.byteLength}else if(2===e.seqNo&&this.firstChunkSize.byteLength>0){this.movedMoovSize=f.getMoovSizeByChunk(e.data);var o=f.mergeMoov(this.firstChunkSize,e.data,this.fileInfo.chunkSize,this.videoTypeInfo);e.data=o,this.fileInfo.offset=0,e.start=0,e.end=this.firstChunkSize.byteLength-1,this.fileInfo.offset=e.end-e.start+1}else this.fileInfo.offset+=e.data.byteLength,
this.fileInfo.size||"number"!=typeof e.end||"number"!=typeof e.start||e.data.byteLength===e.end-e.start+1||this.downloadComplete();if(!this.startPlayLength&&this.decoderState===r.DECODER_STATE_IDLE){var a=f.getStartPlayLength(e.data,this.hasVIDEOHANDLER,this.indexSTCO,this.indexSTSZ);this.startPlayLength=a.size,this.hasVIDEOHANDLER=a.hasVIDEOHANDLER,this.indexSTCO=a.indexSTCO||0,this.indexSTSZ=a.indexSTSZ||0}switch(this.decoderWorker.postMessage({status:r.FEED_DATA_REQ,data:e.data,
fileInfo:n.__assign({},this.fileInfo)}),this.decoderState){case r.DECODER_STATE_IDLE:this.isDownloadComplete||this.startPlayLength&&this.fileInfo.offset>=this.startPlayLength?(this.emit(i.VIDEO_EVENT.canplay),this.startPlayLength&&(this.fileInfo.virtualSize=this.fileInfo.downloadSize),this.decoderState=r.DECODER_STATE_INITIALIZING,this.afterDownloadVideo=(new Date).getTime(),this.decoderWorker.postMessage({status:r.OPEN_DECODER_REQ
})):(this.fileInfo.offset>=3*i.INIT_CHUNCK_SIZE&&(this.fileInfo.chunkSize=i.MAX_CHUNCK_SIZE),this.downloadOneChunk())}}else this.downloadComplete()},t.prototype.startDecoding=function(){this.decoderState===r.DECODER_STATE_READY&&(this.decoding=!0,this.beforeDecodeOnePacket=(new Date).getTime(),this.decoderWorker.postMessage({status:r.START_DECODING_REQ,decodeInterval:this.urgent?0:r.DECODE_INTERVAL}),this.urgent&&(this.urgent=!1))},t.prototype.stopDecoding=function(){this.decoding=!1,
this.decoderWorker.postMessage({status:r.PAUSE_DECODING_REQ})},t.prototype.onOrientationChange=function(){},t.prototype.onOpenDecoder=function(e){0===e.openDecoderStatus?(this.afterOpenDecoder=(new Date).getTime(),e.video&&this.onVideoData(e.video),e.audio&&this.onAudioData(e.audio),e.audio&&(this.audioData=e.audio),this.decoderState=r.DECODER_STATE_READY,this.urgent=!0,this.startDecoding()):-1===this.fileInfo.url.indexOf(".mp4?")?c.sendErrorLog.apply(this,[c.FILE_FORMAT_ERROR,{
status:e.openDecoderStatus}]):(this.emit("error"),c.sendErrorLog.apply(this,[c.OPEN_DECODER_FAIL,{status:e.openDecoderStatus}]))},t.prototype.setAudioBufferFrame=function(e){if(!this.justSeeked&&(this.audioFrameBuffer.push(e),-1===this.firstAudioFrameTime&&(this.firstAudioFrameTime=e&&(e.time||0===e.time)?e.time:-1),-1!==this.firstAudioFrameTime&&this.secondAudioFrameTime<=0&&(this.secondAudioFrameTime=e&&(e.time||0===e.time)?e.time:-1),
this.audioFrameDiff||-1===this.firstAudioFrameTime||-1===this.secondAudioFrameTime||(this.audioFrameDiff=1e3*Number((this.secondAudioFrameTime-this.firstAudioFrameTime).toFixed(4))),!this.buffering&&this.playerState===i.PLAYER_STATE_PLAYING&&!h))for(;this.audioFrameBuffer.length;){var t=this.audioFrameBuffer.shift();t&&this.pcmPlayer.play(new Uint8Array(t.data))}},t.prototype.setVideoBufferFrame=function(e){this.justSeeked||(this.getFirstFrame||(this.getFirstFrame=(new Date).getTime()),
-1===this.firstVideoFrameTime?this.firstVideoFrameTime=e&&(e.time||0===e.time)?e.time:-1:-1!==this.firstVideoFrameTime&&this.secondVideoFrameTime<=0&&(this.secondVideoFrameTime=e&&(e.time||0===e.time)?e.time:-1),this.videoFrameDiff||-1===this.firstVideoFrameTime||-1===this.secondVideoFrameTime||(this.videoFrameDiff=1e3*(this.secondVideoFrameTime-this.firstVideoFrameTime),this.videoFrameDiff=Number(this.videoFrameDiff.toFixed(2)),this.emit("framediff",this.videoFrameDiff)),
this.videoFrameBuffer.push(e),(this.getBufferTimerLength()>=i.MAX_DECODING_TIME_LENGTH||this.decoderState===r.DECODER_STATE_FINISH)&&this.decoding&&this.stopDecoding(),(this.getBufferTimerLength()>=i.MAX_BUFFER_TIME_LENGTH||this.decoderState===r.DECODER_STATE_FINISH)&&this.buffering&&this.stopBuffering())},t.prototype.getBufferTimerLength=function(){if(!this.videoFrameBuffer||!this.videoFrameBuffer.length)return 0;var e=this.videoFrameBuffer[0]
;return(this.videoFrameBuffer[this.videoFrameBuffer.length-1].time||0)-(e.time||0)},t.prototype.onVideoData=function(e){if(this.duration=Number(((e.duration||0)/1e3).toFixed(3)),this.width=e.videoWidth||0,this.height=e.videoHeight||0,this.emit(i.VIDEO_EVENT.loadedmetadata),this.yLength=this.width*this.height,this.uvLength=this.width/2*(this.height/2),this.duration){if(this.fileInfo.size){var t=f.getChunkInfo(this.duration,this.fileInfo.size);this.chunkInterval=t.chunkInterval,
this.fileInfo.chunkSize=t.chunkSize}else this.fileInfo.chunkSize=i.MAX_CHUNCK_SIZE,this.chunkInterval=100;clearInterval(this.downloadTimer),this.downloadOneChunk(),this.startDownloadTimer(),console.log("this.chunkInterval",this.fileInfo.size,this.fileInfo.chunkSize,this.chunkInterval)}},t.prototype.onAudioData=function(e){var t=e.audioChannels,n=e.audioSampleFmt,r=e.audioSampleRate,o="16bitInt";switch(+n){case 0:o="8bitInt";break;case 1:o="16bitInt";break;case 2:o="32bitInt";break;case 3:
o="32bitFloat"}this.pcmPlayer.updateOptions({encoding:o,audioChannels:t,audioSampleRate:r})},t.prototype.onRequestData=function(e){var t=this,n=e.offset;if(this.justSeeked){if(this.isDownloadComplete&&!this.isJumpedDownload)return setTimeout(function(){t.emit(i.VIDEO_EVENT.canplay),t.resume(!0)},0),void(this.justSeeked=!1);-1===n?(this.emit(i.VIDEO_EVENT.canplay),this.resume(!0)):(n>=0&&(this.fileInfo.offset=n,this.movedMoovSize&&(this.fileInfo.offset-=this.movedMoovSize,
this.fileInfo.offset=this.fileInfo.offset<0?0:this.fileInfo.offset),this.fileInfo.downloadSize=n,this.isJumpedDownload=!0),this.isDownloadComplete=!1,this.decoderWorker.postMessage({status:r.REOPEN_DOWNLOAD_FILE_REQ}),this.startDownloadTimer()),this.justSeeked=!1}},t.prototype.listenMessage=function(){var e=this;this.decoderWorker.onmessage=function(t){var n=t.data;if(n.url===e.fileInfo.url)switch(n.status){case r.INIT_DECODER_RSP:e.onInitDecoder(n.data);break;case r.OPEN_DECODER_RSP:
e.onOpenDecoder(n.data);break;case r.DECODING_FINISH_RSP:e.stopDecoding(),e.decoderState=r.DECODER_STATE_FINISH,e.buffering&&e.stopBuffering();break;case r.DECODING_VIDEO_DATA_RSP:e.setVideoBufferFrame(n),e.availableSize=n.availableSize;break;case r.DECODING_AUDIO_DATA_RSP:e.setAudioBufferFrame(n);break;case r.CLOSE_DECODER_RSP:e.emit("ended"),e.options.loop&&e.restart();break;case r.WASM_LOADED_RSP:e.afterDownloadWasm=(new Date).getTime(),e.wasmLoadedStatus=!0,e.initDecoder();break
;case r.SEEK_TO_RSP:0!=n.data&&(e.justSeeked=!1,e.seeking=!1);break;case r.REQUEST_DATA_RSP:e.onRequestData(n.data),e.availableSize=n.availableSize;break;case r.RENDER_TIME_DATA_RSP:c.sendCorePfLog.call(e,n.data);break;case r.WASM_ERROR_RSP:n.data&&n.data.message&&!e.wasmErrorSet.has(n.data.message.substring(0,100))&&(e.wasmErrorSet.add(n.data.message.substring(0,100)),c.sendWasmErrorLog.call(e,n.data))}},this.downloaderWorker.onmessage=function(t){var n=t.data
;if(n.url===e.fileInfo.url)switch(n.status){case o.DOWNLOAD_FILE_RSP:e.onDownloadOneChunk(n.data)}}},t.prototype.onGetFileInfo=function(e){this.fileInfo.size=+e.size?+e.size:0,this.fileInfo.size||(this.hasFileSize=!1),this.initDecoder()},t.prototype.play=function(){h&&h!==this.innerMuted&&(this.innerMuted=h,this.emit("mutedChange",this.innerMuted)),this.playerState!==i.PLAYER_STATE_PLAYING&&(this.firePlayTime=(new Date).getTime(),this.playCount++,c.sendDistLog.apply(this),
this.playerState=i.PLAYER_STATE_PLAYING,this.emit(i.VIDEO_EVENT.timeupdate),this.loopPlay())},t.prototype.renderVideoFrame=function(e){if(e&&this.paused&&(this.emit(i.VIDEO_EVENT.playing),this.paused=!1),this.prepareSeekTo)return this.seekTo(this.prepareSeekTo),void(this.prepareSeekTo=0);for(;e;){this.isFirstPaint||(this.isFirstPaint=!0,this.renderFirstFrame=(new Date).getTime(),c.sendPfLog.apply(this));var t=this.videoFrameBuffer[0];if(!t)return;this.videoFrameBuffer.shift(),e--
;var n=new Uint8Array(t.data);this.webglPlayer.renderFrame(n,this.width,this.height,this.yLength,this.uvLength),this.innerCurrentTime=+t.time.toFixed(6),this.emit(i.VIDEO_EVENT.timeupdate)}},t.prototype.ended=function(){this.innerCurrentTime=this.duration,this.emit(i.VIDEO_EVENT.timeupdate),clearTimeout(this.loopTimer),window.cancelAnimationFrame(this.loopTimer),clearInterval(this.downloadTimer),this.pcmPlayer&&this.pcmPlayer.destroy(),this.decoderWorker.postMessage({status:r.CLOSE_DECODER_REQ})
},t.prototype.restart=function(e){void 0===e&&(e=!1),this.movedMoovSize=0,this.getFirstFrame=0,this.isFirstPlay=e,this.firePlayTime=(new Date).getTime(),this.playCount++,c.sendDistLog.apply(this),this.pcmPlayer=new u.default({}),this.decoderWorker=a.getDecoderWorker(),this.initDecoderWorker(this.fileInfo,this.wasmUrl),this.downloaderWorker=a.getDownloadWorker(),this.listenMessage(),this.fileInfo.offset=0,this.fileInfo.downloadSize=0,this.fileInfo.chunkSize=i.INIT_CHUNCK_SIZE,
this.hasFileSize||(this.fileInfo.size=0,this.fileInfo.virtualSize=i.WAIT_HEADER_LENGTH),this.downloading=!1,this.downloadSeqNo=0,this.decoderState=r.DECODER_STATE_IDLE,this.decoding=!1,this.buffering=!1,this.videoFrameBuffer=[],this.audioFrameBuffer=[],this.lastVideoTime=0,this.isDownloadComplete=!1,this.wasmLoadedStatus=!1,this.playerState=i.PLAYER_STATE_PLAYING,this.isFirstPaint=!1,this.firstChunkSize=new ArrayBuffer(0),this.paused=!0,this.loopPlay()},
t.prototype.clearAudioFrameBuffer=function(e){if(this.audioFrameBuffer.length&&this.audioFrameDiff){for(var t=-1,n=0;n<this.audioFrameBuffer.length&&this.audioFrameBuffer[n].time<=e;n++)t=n;this.audioFrameBuffer=this.audioFrameBuffer.slice(t+1)}},t.prototype.playAudioFrame=function(){if(this.audioFrameBuffer.length){var e=this.audioFrameBuffer[0];this.audioFrameBuffer.shift(),this.pcmPlayer.play(new Uint8Array(e.data))}},t.prototype.loopPlay=function(){var e=this
;if(this.loopTimer&&(h?clearTimeout(this.loopTimer):window.cancelAnimationFrame(this.loopTimer)),h){if(this.loopTimer=window.setTimeout(function(){e.loopPlay()},this.videoFrameDiff||16),!this.videoFrameBuffer.length||this.buffering)return;if(!this.lastVideoTime)return void(this.lastVideoTime=(new Date).getTime());var t=Date.now(),n=Number((t-this.lastVideoTime).toFixed(2));if(n>=this.videoFrameDiff){var o=Math.min(Math.floor(n/this.videoFrameDiff),this.videoFrameBuffer.length)
;this.lastVideoTime=t,this.clearAudioFrameBuffer(this.videoFrameBuffer[0].time),this.renderVideoFrame(o)}}else{if(this.loopTimer=requestAnimationFrame(this.loopPlay.bind(this)),!this.videoFrameBuffer.length||this.buffering)return;o=0;for(var a=this.pcmPlayer.getTimeStamp(),s=0;s<this.videoFrameBuffer.length&&void 0!==this.videoFrameBuffer[s].time&&this.videoFrameBuffer[s].time-a<=0;s++)o++;o&&this.renderVideoFrame(o)}
0!==this.videoFrameBuffer.length||this.decoderState===r.DECODER_STATE_FINISH||this.buffering||this.startBuffering(),this.getBufferTimerLength()<i.MAX_DECODING_TIME_LENGTH&&this.decoderState!==r.DECODER_STATE_FINISH&&(this.decoding||this.startDecoding()),!this.videoFrameBuffer.length&&this.isDownloadComplete&&this.decoderState===r.DECODER_STATE_FINISH&&this.ended()},t.prototype.pause=function(e){void 0===e&&(e=!1),clearTimeout(this.loopTimer),window.cancelAnimationFrame(this.loopTimer),
this.playerState===i.PLAYER_STATE_PLAYING&&(this.playerState=i.PLAYER_STATE_PAUSING,this.stopDecoding(),this.pcmPlayer.pause(),this.lastVideoTime=0,e||(this.paused=!0,this.emit(i.VIDEO_EVENT.pause)))},t.prototype.resume=function(e){var t=this;void 0===e&&(e=!1),(this.playerState===i.PLAYER_STATE_PAUSING||e)&&(this.loopPlay(),this.playerState=i.PLAYER_STATE_PLAYING,this.startDecoding(),h||(this.audioFrameBuffer.forEach(function(e){t.pcmPlayer.play(new Uint8Array(e.data))}),
this.audioFrameBuffer=[],this.pcmPlayer.resume()))},t.prototype.destroy=function(){this.decoderWorker.postMessage({status:r.CLOSE_DECODER_REQ}),this.downloaderWorker.onmessage=null,this.decoderWorker.onmessage=null,this.pcmPlayer&&this.pcmPlayer.destroy(),this.webglPlayer&&this.webglPlayer.destroy(),this.webglPlayer=null,this.downloading=!1,this.downloadSeqNo=0,this.seekReceivedLen=0,this.decoderState=r.DECODER_STATE_IDLE,this.decoding=!1,this.prepareSeekTo=0,this.buffering=!1,
this.movedMoovSize=0,this.videoFrameBuffer=[],this.audioFrameBuffer=[],this.startPlayLength=0,this.hasVIDEOHANDLER=!1,this.indexSTCO=0,this.indexSTSZ=0,this.videoFrameDiff=0,this.audioFrameDiff=0,this.availableSize=-1,this.stopDownloadTimer(),this.stopDecoding(),clearTimeout(this.loopTimer),window.cancelAnimationFrame(this.loopTimer)},t.prototype.startBuffering=function(){this.emit(i.VIDEO_EVENT.waiting),this.buffering=!0,this.pause(!0)},t.prototype.stopBuffering=function(){this.buffering=!1,
this.paused||(this.emit(i.VIDEO_EVENT.playing),this.resume())},t.prototype.changeMuted=function(e){var t=this;if(h&&!e)return this.innerMuted=!1,h=!1,this.emit("mutedChange",this.innerMuted),this.emit(i.VIDEO_EVENT.volumechange),this.videoFrameBuffer[0]&&void 0!==this.videoFrameBuffer[0].time&&this.pcmPlayer.updateBaseTime(this.videoFrameBuffer[0].time-this.pcmPlayer.getAudioCtxCurrentTime()),this.playerState===i.PLAYER_STATE_PLAYING&&(this.audioFrameBuffer.forEach(function(e){
t.pcmPlayer.play(new Uint8Array(e.data))}),this.audioFrameBuffer=[]),void this.pcmPlayer.setVolume(1);e?(this.innerMuted=!0,this.pcmPlayer.setVolume(0),this.emit(i.VIDEO_EVENT.volumechange)):(this.innerMuted=!1,this.pcmPlayer.setVolume(1),this.emit(i.VIDEO_EVENT.volumechange))},t.prototype.seekTo=function(e){this.emit(i.VIDEO_EVENT.seeking),this.availableSize=-1;var t=1e3*e;this.stopDownloadTimer(),this.pause(!0),this.downloadSeqNo++,this.videoFrameBuffer=[],this.audioFrameBuffer=[],
this.pcmPlayer&&this.pcmPlayer.destroy(),this.pcmPlayer=new u.default({}),this.onAudioData(this.audioData),this.pcmPlayer.updateBaseTime(e-this.pcmPlayer.getAudioCtxCurrentTime()),this.decoderWorker.postMessage({status:r.SEEK_TO_REQ,data:t}),this.seeking=!0,this.justSeeked=!0,this.urgent=!0,this.seekReceivedLen=0,this.decoderState=r.DECODER_STATE_READY},Object.defineProperty(t.prototype,"src",{get:function(){var e;return null===(e=this.fileInfo)||void 0===e?void 0:e.url},set:function(e){
this.destroy(),this.options.url=e,this.fileInfo={url:"",size:0,offset:0,chunkSize:i.INIT_CHUNCK_SIZE,virtualSize:i.WAIT_HEADER_LENGTH,downloadSize:0},this.init(this.options),this.restart(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.innerCurrentTime},set:function(e){this.decoderState===r.DECODER_STATE_IDLE?this.prepareSeekTo=e:this.seekTo(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"muted",{
get:function(){return this.innerMuted},set:function(e){this.changeMuted(!!e)},enumerable:!1,configurable:!0}),t}(l.default);t.default=p}.apply(t,r))||(e.exports=o)},function(e,t,n){var r;void 0===(r=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),
t.FFMPEG=t.DECODE_INTERVAL=t.DECODER_STATE_WAITING=t.DECODER_STATE_FINISH=t.DECODER_STATE_READY=t.DECODER_STATE_INITIALIZING=t.DECODER_STATE_IDLE=t.WASM_ERROR_RSP=t.RENDER_TIME_DATA_RSP=t.REQUEST_DATA_RSP=t.SEEK_TO_RSP=t.CLOSE_DECODER_RSP=t.DECODING_AUDIO_DATA_RSP=t.DECODING_VIDEO_DATA_RSP=t.DECODING_FINISH_RSP=t.OPEN_DECODER_RSP=t.WASM_LOADED_RSP=t.INIT_DECODER_RSP=t.REOPEN_DOWNLOAD_FILE_REQ=t.SEEK_TO_REQ=t.INIT_DECODER_WORKER_REQ=t.DOWNLOAD_FILE_COMPLETE_REQ=t.CLOSE_DECODER_REQ=t.PAUSE_DECODING_REQ=t.START_DECODING_REQ=t.OPEN_DECODER_REQ=t.FEED_DATA_REQ=t.INIT_DECODER_REQ=void 0,
t.INIT_DECODER_REQ=0,t.FEED_DATA_REQ=1,t.OPEN_DECODER_REQ=2,t.START_DECODING_REQ=3,t.PAUSE_DECODING_REQ=4,t.CLOSE_DECODER_REQ=5,t.DOWNLOAD_FILE_COMPLETE_REQ=6,t.INIT_DECODER_WORKER_REQ=7,t.SEEK_TO_REQ=8,t.REOPEN_DOWNLOAD_FILE_REQ=9,t.INIT_DECODER_RSP=0,t.WASM_LOADED_RSP=1,t.OPEN_DECODER_RSP=2,t.DECODING_FINISH_RSP=3,t.DECODING_VIDEO_DATA_RSP=4,t.DECODING_AUDIO_DATA_RSP=5,t.CLOSE_DECODER_RSP=6,t.SEEK_TO_RSP=7,t.REQUEST_DATA_RSP=8,t.RENDER_TIME_DATA_RSP=9,t.WASM_ERROR_RSP=10,
t.DECODER_STATE_IDLE=0,t.DECODER_STATE_INITIALIZING=1,t.DECODER_STATE_READY=2,t.DECODER_STATE_FINISH=3,t.DECODER_STATE_WAITING=4,t.DECODE_INTERVAL=5,t.FFMPEG="https://mms-mis.cdn.bcebos.com/video/libffmpeg19.js"}.apply(t,[n,t]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DOWNLOAD_FILE_RSP=t.GET_FILE_INFO_RSP=t.DOWNLOAD_FILE_REQ=t.GET_FILE_INFO_REQ=void 0,t.GET_FILE_INFO_REQ=0,t.DOWNLOAD_FILE_REQ=1,
t.GET_FILE_INFO_RSP=0,t.DOWNLOAD_FILE_RSP=1}.apply(t,[n,t]))||(e.exports=r)},function(e,t,n){var r,o;r=[n,t,n(0),n(10),n(11)],void 0===(o=function(e,t,n,r,o){"use strict";var i,a;Object.defineProperty(t,"__esModule",{value:!0}),t.getDownloadWorker=t.getDecoderWorker=void 0,r=n.__importDefault(r),o=n.__importDefault(o),t.getDecoderWorker=function(){return i||(i=new r.default(""))},t.getDownloadWorker=function(){return a||(a=new o.default(""))}}.apply(t,r))||(e.exports=o)},function(e,t,n){
"use strict";function r(){
return i()('!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){var r,o;r=[n,t,n(1),n(2),n(3)],void 0===(o=function(e,t,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o);var a,i=self,u=function(){function e(e){this.wasmLoaded=!1,this.coreLogLevel=0,this.cacheBuffer=null,this.downloadComplete=!1,this.cacheSize=Math.pow(2,19),this.url=e.url}return e.prototype.initDecoder=function(e){if(i.Module._initDecoder){var t=i.Module._initDecoder(e.size||e.virtualSize,this.coreLogLevel);0===t&&i.Module._malloc&&(this.cacheBuffer=i.Module._malloc(this.cacheSize)),i.postMessage({status:r.INIT_DECODER_RSP,data:{initDecoderStatus:t},url:this.url})}},e.prototype.sendData=function(e,t){i.Module._changeFileSize&&i.Module._changeFileSize(t.size?t.size:t.virtualSize);var n=new Uint8Array(e);n.length>this.cacheSize&&(i.Module._free&&i.Module._free(this.cacheBuffer),this.cacheSize=n.length,i.Module._malloc&&(this.cacheBuffer=i.Module._malloc(this.cacheSize))),i.Module.HEAPU8&&i.Module.HEAPU8.set&&i.Module.HEAPU8.set(n,this.cacheBuffer),i.Module._sendData&&i.Module._sendData(this.cacheBuffer,n.length)},e.prototype.openDecoder=function(){var e=i.Module._malloc&&i.Module._malloc(28),t=-1;try{t=i.Module._openDecoder&&i.Module._openDecoder(e,7,this.videoCallback,this.audioCallback,this.requestCallback,this.renderTimeCallback)}catch(e){var n=e;i.postMessage({status:r.WASM_ERROR_RSP,data:n&&n.message,url:this.url})}if(0===t){var o=e>>2,a=i.Module.HEAP32&&i.Module.HEAP32.subarray&&i.Module.HEAP32.subarray(o,o+7);i.postMessage({status:r.OPEN_DECODER_RSP,data:{openDecoderStatus:t,video:{duration:a[0],videoPixFmt:a[1],videoWidth:a[2],videoHeight:a[3]},audio:{audioSampleFmt:a[4],audioChannels:a[5],audioSampleRate:a[6]}},url:this.url})}else i.postMessage({status:r.OPEN_DECODER_RSP,data:{openDecoderStatus:t},url:this.url});i.Module._free&&i.Module._free(e)},e.prototype.closeDecoder=function(){this.wasmLoaded?(i.Module._uninitDecoder&&i.Module._uninitDecoder(),null!==this.cacheBuffer&&(i.Module._free&&i.Module._free(this.cacheBuffer),this.cacheBuffer=null),clearInterval(this.decoderTimer),i.Module._closeDecoder&&i.Module._closeDecoder(),i.postMessage({status:r.CLOSE_DECODER_RSP,url:this.url})):i.Module={}},e.prototype.pauseDecoding=function(){this.decoderTimer&&clearInterval(this.decoderTimer)},e.prototype.startDecoding=function(e){var t=this;this.decoderTimer&&clearInterval(this.decoderTimer),this.decoderTimer=self.setInterval((function(){var n=1;for(0===e&&(n=5);n--;){var o=i.Module._decodeOnePacket&&i.Module._decodeOnePacket();for(7===o&&t.downloadComplete&&(t.pauseDecoding(),clearInterval(t.decoderTimer),i.postMessage({status:r.DECODING_FINISH_RSP,url:t.url}));9===o;)o=i.Module._decodeOnePacket&&i.Module._decodeOnePacket()}}),e)},e.prototype.onWasmLoaded=function(){if(!this.wasmLoaded&&(this.wasmLoaded=!0,i.postMessage({status:r.WASM_LOADED_RSP,url:this.url}),i.Module.addFunction)){var e=this;this.videoCallback=i.Module.addFunction((function(t,n,o,a){var u=i.Module.HEAPU8&&i.Module.HEAPU8.subarray&&i.Module.HEAPU8.subarray(t,t+n),s=new Uint8Array(u);i.postMessage({status:r.DECODING_VIDEO_DATA_RSP,time:o,data:s,url:e.url,availableSize:a})}),"viidi"),this.audioCallback=i.Module.addFunction((function(t,n,o){var a=i.Module.HEAPU8&&i.Module.HEAPU8.subarray&&i.Module.HEAPU8.subarray(t,t+n),u=new Uint8Array(a);i.postMessage({status:r.DECODING_AUDIO_DATA_RSP,time:o,data:u,url:e.url})}),"viid"),this.requestCallback=i.Module.addFunction((function(t,n){i.postMessage({status:r.REQUEST_DATA_RSP,data:{offset:t,availble:n},availableSize:n,url:e.url})}),"vii"),this.renderTimeCallback=i.Module.addFunction((function(t,n){var o=i.Module.HEAPU8&&i.Module.HEAPU8.subarray&&i.Module.HEAPU8.subarray(t,t+n),a=Array.from(o),u=String.fromCharCode.apply(String,a);i.postMessage({status:r.RENDER_TIME_DATA_RSP,data:u,url:e.url})}),"vii")}},e.prototype.seekTo=function(e){var t=i.Module._seekTo&&i.Module._seekTo(e,1),n={status:r.SEEK_TO_RSP,data:t,url:this.url};i.postMessage(n)},e}();i.onmessage=function(e){var t=e.data;switch(t.status){case r.INIT_DECODER_REQ:a.initDecoder(t.fileInfo);break;case r.FEED_DATA_REQ:a.sendData(t.data,t.fileInfo);break;case r.OPEN_DECODER_REQ:a.openDecoder();break;case r.START_DECODING_REQ:a.startDecoding(t.decodeInterval||0);break;case r.PAUSE_DECODING_REQ:a.pauseDecoding();break;case r.CLOSE_DECODER_REQ:a.closeDecoder();break;case r.DOWNLOAD_FILE_COMPLETE_REQ:a.downloadComplete=!0,i.Module._downloadComplete&&i.Module._downloadComplete(1);break;case r.REOPEN_DOWNLOAD_FILE_REQ:a.downloadComplete=!1,i.Module._downloadComplete&&i.Module._downloadComplete(0);break;case r.INIT_DECODER_WORKER_REQ:!function(e,t){if(a=new u(e),i.Module)try{i.Module.calledRun=!1,i.Module.run&&i.Module.run()}catch(t){var n=t;i.postMessage({status:r.WASM_ERROR_RSP,data:n&&n.message,url:e.url})}else o.default({wasmUrl:"https://psstatic.cdn.bcebos.com/video/wasm/libffmpeg_available_1658846668000.wasm"}).then((function(t){i.Module=t,i.Module.onRuntimeInitialized=function(){a.onWasmLoaded()};try{i.Module.calledRun=!1,i.Module.run&&i.Module.run()}catch(t){var n=t;i.postMessage({status:r.WASM_ERROR_RSP,data:n&&n.message,url:e.url})}}))}(t.fileInfo,t.wasmUrl);break;case r.SEEK_TO_REQ:a.seekTo(t.data)}};var s=function(e){function t(t){return e.call(this,t)||this}return n.__extends(t,e),t}(Worker);t.default=s}.apply(t,r))||(e.exports=o)},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return o})),n.d(t,"__assign",(function(){return a})),n.d(t,"__rest",(function(){return i})),n.d(t,"__decorate",(function(){return u})),n.d(t,"__param",(function(){return s})),n.d(t,"__metadata",(function(){return c})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return f})),n.d(t,"__createBinding",(function(){return d})),n.d(t,"__exportStar",(function(){return _})),n.d(t,"__values",(function(){return p})),n.d(t,"__read",(function(){return m})),n.d(t,"__spread",(function(){return h})),n.d(t,"__spreadArrays",(function(){return E})),n.d(t,"__spreadArray",(function(){return y})),n.d(t,"__await",(function(){return v})),n.d(t,"__asyncGenerator",(function(){return D})),n.d(t,"__asyncDelegator",(function(){return b})),n.d(t,"__asyncValues",(function(){return S})),n.d(t,"__makeTemplateObject",(function(){return R})),n.d(t,"__importStar",(function(){return g})),n.d(t,"__importDefault",(function(){return w})),n.d(t,"__classPrivateFieldGet",(function(){return A})),n.d(t,"__classPrivateFieldSet",(function(){return P}));\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function u(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i}function s(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))}function f(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}var d=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function _(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||d(t,e,n)}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}function h(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}function E(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,u=a.length;i<u;i++,o++)r[o]=a[i];return r}function y(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||t)}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function D(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),a=[];return r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r;function i(e){o[e]&&(r[e]=function(t){return new Promise((function(n,r){a.push([e,t,n,r])>1||u(e,t)}))})}function u(e,t){try{(n=o[e](t)).value instanceof v?Promise.resolve(n.value.v).then(s,c):l(a[0][2],n)}catch(e){l(a[0][3],e)}var n}function s(e){u("next",e)}function c(e){u("throw",e)}function l(e,t){e(t),a.shift(),a.length&&u(a[0][0],a[0][1])}}function b(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:v(e[r](t)),done:"return"===r}:o?o(t):t}:o}}function S(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}}function R(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var O=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&d(t,e,n);return O(t,e),t}function w(e){return e&&e.__esModule?e:{default:e}}function A(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function P(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n}},function(e,t,n){var r;void 0===(r=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FFMPEG=t.DECODE_INTERVAL=t.DECODER_STATE_WAITING=t.DECODER_STATE_FINISH=t.DECODER_STATE_READY=t.DECODER_STATE_INITIALIZING=t.DECODER_STATE_IDLE=t.WASM_ERROR_RSP=t.RENDER_TIME_DATA_RSP=t.REQUEST_DATA_RSP=t.SEEK_TO_RSP=t.CLOSE_DECODER_RSP=t.DECODING_AUDIO_DATA_RSP=t.DECODING_VIDEO_DATA_RSP=t.DECODING_FINISH_RSP=t.OPEN_DECODER_RSP=t.WASM_LOADED_RSP=t.INIT_DECODER_RSP=t.REOPEN_DOWNLOAD_FILE_REQ=t.SEEK_TO_REQ=t.INIT_DECODER_WORKER_REQ=t.DOWNLOAD_FILE_COMPLETE_REQ=t.CLOSE_DECODER_REQ=t.PAUSE_DECODING_REQ=t.START_DECODING_REQ=t.OPEN_DECODER_REQ=t.FEED_DATA_REQ=t.INIT_DECODER_REQ=void 0,t.INIT_DECODER_REQ=0,t.FEED_DATA_REQ=1,t.OPEN_DECODER_REQ=2,t.START_DECODING_REQ=3,t.PAUSE_DECODING_REQ=4,t.CLOSE_DECODER_REQ=5,t.DOWNLOAD_FILE_COMPLETE_REQ=6,t.INIT_DECODER_WORKER_REQ=7,t.SEEK_TO_REQ=8,t.REOPEN_DOWNLOAD_FILE_REQ=9,t.INIT_DECODER_RSP=0,t.WASM_LOADED_RSP=1,t.OPEN_DECODER_RSP=2,t.DECODING_FINISH_RSP=3,t.DECODING_VIDEO_DATA_RSP=4,t.DECODING_AUDIO_DATA_RSP=5,t.CLOSE_DECODER_RSP=6,t.SEEK_TO_RSP=7,t.REQUEST_DATA_RSP=8,t.RENDER_TIME_DATA_RSP=9,t.WASM_ERROR_RSP=10,t.DECODER_STATE_IDLE=0,t.DECODER_STATE_INITIALIZING=1,t.DECODER_STATE_READY=2,t.DECODER_STATE_FINISH=3,t.DECODER_STATE_WAITING=4,t.DECODE_INTERVAL=5,t.FFMPEG="https://mms-mis.cdn.bcebos.com/video/libffmpeg19.js"}.apply(t,[n,t]))||(e.exports=r)},function(e,t,n){var r=function(e){var t,n;(e=void 0!==e?e:{}).ready=new Promise((function(e,r){t=e,n=r}));var r,o={};for(r in e)e.hasOwnProperty(r)&&(o[r]=e[r]);var a,i,u=[];a="object"==typeof window,i="function"==typeof importScripts;var s="";for(r in(a||i)&&(i?s=self.location.href:"undefined"!=typeof document&&document.currentScript&&(s=document.currentScript.src),s=0!==s.indexOf("blob:")?s.substr(0,s.lastIndexOf("/")+1):""),o)o.hasOwnProperty(r)&&(e[r]=o[r]);o=null,e.arguments&&(u=e.arguments);var c,l,f,d,_,p,m,h,E=[],y="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,v=[],D=0,b=null,S=null,R="https://psstatic.cdn.bcebos.com/video/wasm/libffmpeg27_1648626361000.wasm";e.wasmUrl&&(R=e.wasmUrl);var O,g={normalizeArray:function(e,t){for(var n=0,r=e.length-1;r>=0;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:function(e){var t="/"===e.charAt(0),n="/"===e.substr(-1);return(e=g.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},basename:function(e){if("/"===e)return"/";var t=(e=(e=g.normalize(e)).replace(/\\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)}},w=function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:P.cwd();if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";e=r+"/"+e,t="/"===r.charAt(0)}return(t?"/":"")+(e=g.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"))||"."},A={ops_table:null,mount:function(e){return A.createNode(null,"/",16895,0)},createNode:function(e,t,n,r){A.ops_table||(A.ops_table={dir:{node:{mknod:A.node_ops.mknod}},file:{node:{setattr:A.node_ops.setattr},stream:{llseek:A.stream_ops.llseek,read:A.stream_ops.read,write:A.stream_ops.write}}});var o=P.createNode(e,t,n,r);return P.isDir(o.mode)?(o.node_ops=A.ops_table.dir.node,o.stream_ops=A.ops_table.dir.stream,o.contents={}):P.isFile(o.mode)&&(o.node_ops=A.ops_table.file.node,o.stream_ops=A.ops_table.file.stream,o.usedBytes=0,o.contents=null),o.timestamp=Date.now(),e&&(e.contents[t]=o,e.timestamp=o.timestamp),o},expandFileStorage:function(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){t=Math.max(t,n*(n<1048576?2:1.125)>>>0),0!==n&&(t=Math.max(t,256));var r=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(r.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(e.usedBytes!==t)if(0===t)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&A.resizeFileStorage(e,t.size)},mknod:function(e,t,n,r){return A.createNode(e,t,n,r)}},stream_ops:{read:function(e,t,n,r,o){var a=e.node.contents;if(o>=e.node.usedBytes)return 0;var i=Math.min(e.node.usedBytes-o,r);if(i>8&&a.subarray)t.set(a.subarray(o,o+i),n);else for(var u=0;u<i;u++)t[n+u]=a[o+u];return i},write:function(e,t,n,r,o,a){if(!r)return 0;var i=e.node;if(i.timestamp=Date.now(),t.subarray&&(!i.contents||i.contents.subarray)){if(a)return i.contents=t.subarray(n,n+r),i.usedBytes=r,r;if(0===i.usedBytes&&0===o)return i.contents=t.slice(n,n+r),i.usedBytes=r,r;if(o+r<=i.usedBytes)return i.contents.set(t.subarray(n,n+r),o),r}if(A.expandFileStorage(i,o+r),i.contents.subarray&&t.subarray)i.contents.set(t.subarray(n,n+r),o);else for(var u=0;u<r;u++)i.contents[o+u]=t[n+u];return i.usedBytes=Math.max(i.usedBytes,o+r),r},llseek:function(e,t,n){var r=t;return 1===n?r+=e.position:2===n&&P.isFile(e.node.mode)&&(r+=e.node.usedBytes),r}}},P={root:null,streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,tracking:{openFlags:{READ:1,WRITE:2}},filesystems:null,lookupPath:function(e,t){if(t=t||{},!(e=w(P.cwd(),e)))return{path:"",node:null};var n={follow_mount:!0,recurse_count:0};for(var r in n)void 0===t[r]&&(t[r]=n[r]);for(var o=g.normalizeArray(e.split("/").filter((function(e){return!!e})),!1),a=P.root,i=0;i<o.length&&(i!==o.length-1||!t.parent);i++);return{path:"/",node:a}},getPath:function(e){for(var t;!P.isRoot(e);)t=t?e.name+"/"+t:e.name,e=e.parent;var n=e.mount.mountpoint;return t?"/"!==n[n.length-1]?n+"/"+t:n+t:n},hashName:function(e,t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%P.nameTable.length},hashAddNode:function(e){var t=P.hashName(e.parent.id,e.name);e.name_next=P.nameTable[t],P.nameTable[t]=e},createNode:function(e,t,n,r){var o=new P.FSNode(e,t,n,r);return P.hashAddNode(o),o},close:function(e){if(P.isClosed(e))throw new P.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{P.closeStream(e.fd)}e.fd=null},closeStream:function(e){P.streams[e]=null},isClosed:function(e){return null===e.fd},isRoot:function(e){return e===e.parent},isFile:function(e){return 32768==(61440&e)},isDir:function(e){return 16384==(61440&e)},MAX_OPEN_FDS:4096,nextfd:function(e,t){e=e||0,t=t||P.MAX_OPEN_FDS;for(var n=e;n<=t;n++)if(!P.streams[n])return n},getStream:function(e){return P.streams[e]},createStream:function(e,t,n){P.FSStream||(P.FSStream=function(){},P.FSStream.prototype={object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var r=new P.FSStream;for(var o in e)e.hasOwnProperty(o)&&(r[o]=e[o]);e=r;var a=P.nextfd(t,n);return e.fd=a,P.streams[a]=e,e},mount:function(e,t,n){var r="/"===n,o={type:e,opts:t,mountpoint:n,mounts:[]},a=e.mount(o);return a.mount=o,o.root=a,r&&(P.root=a),a},mknod:function(e,t,n){var r=P.lookupPath(e,{parent:!0}).node,o=g.basename(e);return r.node_ops.mknod(r,o,t,n)},truncate:function(e,t){var n=e;n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},open:function(e,t,n,r,o){var a;return n=64&t?4095&n|32768:0,e=g.normalize(e),64&t&&(a=P.mknod(e,n,0),created=!0),512&t&&P.truncate(a,0),t&=-131713,P.createStream({node:a,path:P.getPath(a),flags:t,seekable:!0,position:0,stream_ops:a.stream_ops,ungotten:[],error:!1},r,o)},llseek:function(e,t,n){return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read:function(e,t,n,r,o){var a=void 0!==o;a||(o=e.position);var i=e.stream_ops.read(e,t,n,r,o);return a||(e.position+=i),i},write:function(e,t,n,r,o,a){e.seekable&&1024&e.flags&&P.llseek(e,0,2);var i=void 0!==o;i||(o=e.position);var u=e.stream_ops.write(e,t,n,r,o,a);return i||(e.position+=u),u},cwd:function(){return P.currentPath},staticInit:function(){P.nameTable=new Array(4096),P.mount(A,{},"/"),P.filesystems={MEMFS:A}},init:function(t,n,r){P.init.initialized=!0,e.stdin=t||e.stdin,e.stdout=n||e.stdout,e.stderr=r||e.stderr}},M={doReadv:function(e,t,n,r){for(var o=0,a=0;a<n;a++){var i=_[t+8*a>>2],u=_[t+(8*a+4)>>2],s=P.read(e,f,i,u,r);if(s<0)return-1;if(o+=s,s<u)break}return o},doWritev:function(e,t,n,r){for(var o=0,a=0;a<n;a++){var i=_[t+8*a>>2],u=_[t+(8*a+4)>>2],s=P.write(e,f,i,u,r);if(s<0)return-1;o+=s}return o},varargs:void 0,get:function(){return M.varargs+=4,_[M.varargs-4>>2]},getStr:function(e){return function(e,t){for(var n=t,r=t;e[r]&&!(r>=n);)++r;if(r-t>16&&e.subarray&&y)return y.decode(e.subarray(t,r));for(var o="";t<r;){var a=e[t++];if(128&a){var i=63&e[t++];if(192!=(224&a)){var u=63&e[t++];if((a=224==(240&a)?(15&a)<<12|i<<6|u:(7&a)<<18|i<<12|u<<6|63&e[t++])<65536)o+=String.fromCharCode(a);else{var s=a-65536;o+=String.fromCharCode(55296|s>>10,56320|1023&s)}}else o+=String.fromCharCode((31&a)<<6|i)}else o+=String.fromCharCode(a)}return o}(d,e)},getStreamFromFD:function(e){return P.getStream(e)}};function T(){}P.FSNode=function(e,t,n,r){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=P.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=r},P.staticInit();var I={__sys_access:T,__sys_fcntl64:T,__sys_fstat64:T,__sys_getdents64:T,__sys_ioctl:T,__sys_lstat64:T,__sys_open:function(e,t,n){M.varargs=n;try{var r=M.getStr(e),o=n?M.get():0;return P.open(r,t,o).fd}catch(e){return 0}},__sys_rename:T,__sys_rmdir:T,__sys_stat64:T,__sys_unlink:T,abort:T,clock:T,clock_gettime:function(e,t){var n;if(0===e)n=Date.now();else{if(1!==e&&4!==e)return setErrNo(28),-1;n=performance.now()}return _[t>>2]=n/1e3|0,_[t+4>>2]=n%1e3*1e3*1e3|0,0},emscripten_get_heap_max:function(){return d.length},emscripten_memcpy_big:function(e,t,n){O||(O=setTimeout(()=>{O=null},500)),d.copyWithin(e,t,t+n)},emscripten_resize_heap:function(t){var n=d.length;e.HEAPU8=d=new Uint8Array(n)},emscripten_thread_sleep:T,environ_get:T,environ_sizes_get:T,fd_close:function(e){try{var t=M.getStreamFromFD(e);return P.close(t),0}catch(e){return 8}},fd_fdstat_get:T,fd_read:function(e,t,n,r){try{var o=M.getStreamFromFD(e),a=M.doReadv(o,t,n);return _[r>>2]=a,0}catch(e){return 8}},fd_seek:function(e,t,n,r,o){try{var a=M.getStreamFromFD(e),i=4294967296*n+(t>>>0);return i<=-9007199254740992||i>=9007199254740992?-61:(P.llseek(a,i,r),h=[a.position>>>0,(m=a.position,+Math.abs(m)>=1?m>0?(0|Math.min(+Math.floor(m/4294967296),4294967295))>>>0:~~+Math.ceil((m-+(~~m>>>0))/4294967296)>>>0:0)],_[o>>2]=h[0],_[o+4>>2]=h[1],a.getdents&&0===i&&0===r&&(a.getdents=null),0)}catch(e){return 8}},fd_write:function(e,t,n,r){try{var o=M.getStreamFromFD(e),a=M.doWritev(o,t,n);return _[r>>2]=a,0}catch(e){return 8}},ftime:T,gettimeofday:T,gmtime_r:T,localtime_r:T,mktime:T,pthread_create:T,pthread_join:T,setTempRet0:T,strftime:T};function C(n){n=n||u,D>0||e.calledRun||(e.calledRun=!0,t(e),e.onRuntimeInitialized&&e.onRuntimeInitialized())}return function(){var t={env:I,wasi_snapshot_preview1:I};function r(t,n){var r,o,a=t.exports;e.asm=a,l=e.asm.memory,r=l.buffer,e.HEAP8=f=new Int8Array(r),e.HEAP32=_=new Int32Array(r),e.HEAPU8=d=new Uint8Array(r),p=e.asm.__indirect_function_table,o=e.asm.__wasm_call_ctors,v.unshift(o),function(t){if(D--,e.monitorRunDependencies&&e.monitorRunDependencies(D),0===D&&(null!==b&&(clearInterval(b),b=null),S)){var n=S;S=null,n()}}()}function o(e){r(e.instance)}function a(e){return fetch(R,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at \'"+R+"\'";return e.arrayBuffer()})).then((function(e){return WebAssembly.instantiate(e,t)})).then(e,(function(e){}))}D++,e.monitorRunDependencies&&e.monitorRunDependencies(D),e.instantiateWasm?e.instantiateWasm(t,r):("function"==typeof WebAssembly.instantiateStreaming?fetch(R,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,t).then(o,(function(e){return console.warn("wasm streaming compile failed: "+e),console.warn("falling back to ArrayBuffer instantiation"),a(o)}))})):a(o)).catch(n)}(),e._initDecoder=function(){return(e._initDecoder=e.asm.initDecoder).apply(null,arguments)},e._uninitDecoder=function(){return(e._uninitDecoder=e.asm.uninitDecoder).apply(null,arguments)},e._openDecoder=function(){return(e._openDecoder=e.asm.openDecoder).apply(null,arguments)},e._closeDecoder=function(){return(e._closeDecoder=e.asm.closeDecoder).apply(null,arguments)},e._sendData=function(){return(e._sendData=e.asm.sendData).apply(null,arguments)},e._changeFileSize=function(){return(e._changeFileSize=e.asm.changeFileSize).apply(null,arguments)},e._downloadComplete=function(){return(e._downloadComplete=e.asm.downloadComplete).apply(null,arguments)},e._decodeOnePacket=function(){return(e._decodeOnePacket=e.asm.decodeOnePacket).apply(null,arguments)},e._seekTo=function(){return(e._seekTo=e.asm.seekTo).apply(null,arguments)},e._main=function(){return(e._main=e.asm.main).apply(null,arguments)},e._free=function(){return(e._free=e.asm.free).apply(null,arguments)},e._malloc=function(){return(e._malloc=e.asm.malloc).apply(null,arguments)},e.addFunction=function(e,t){if(!c){c=new WeakMap;for(var n=0;n<p.length;n++){var r=p.get(n);r&&c.set(r,n)}}if(c.has(e))return c.get(e);var o=function(){if(E.length)return E.pop();try{p.grow(1)}catch(e){if(!(e instanceof RangeError))throw e;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}return p.length-1}();try{p.set(o,e)}catch(n){if(!(n instanceof TypeError))throw n;var a=function(e,t){if("function"==typeof WebAssembly.Function){for(var n={i:"i32",j:"i64",f:"f32",d:"f64"},r={parameters:[],results:"v"===t[0]?[]:[n[t[0]]]},o=1;o<t.length;++o)r.parameters.push(n[t[o]]);return new WebAssembly.Function(r,e)}var a=[1,0,1,96],i=t.slice(0,1),u=t.slice(1),s={i:127,j:126,f:125,d:124};for(a.push(u.length),o=0;o<u.length;++o)a.push(s[u[o]]);"v"===i?a.push(0):a=a.concat([1,s[i]]),a[1]=a.length-2;var c=new Uint8Array([0,97,115,109,1,0,0,0].concat(a,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0])),l=new WebAssembly.Module(c);return new WebAssembly.Instance(l,{e:{f:e}}).exports.f}(e,t);p.set(o,a)}return c.set(e,o),o},S=function e(){C(),S=e},e.run=C,e.ready};e.exports=r}]);',"Worker",void 0,void 0)
}n.r(t),n.d(t,"default",function(){return r});var o=n(1),i=n.n(o)},function(e,t,n){"use strict";function r(){
return i()('!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){var r,o;r=[n,t,n(1),n(2),n(3),n(4)],void 0===(o=function(e,t,n,r,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importDefault(a);var u=self,i=new a.default,c=new(function(){function e(){}return e.prototype.getFileInfo=function(e){var t=!1,n=new XMLHttpRequest;n.open("get",e,!0),n.onreadystatechange=function(){var o=n.getResponseHeader("Content-Length"),a=n.status;!t&&(4===n.readyState||o&&+o>0&&a>0)&&(u.postMessage({status:r.GET_FILE_INFO_RSP,data:{size:o||0,status:a},url:e}),t=!0,n.abort())},n.send()},e.prototype.downloadFile=function(e){var t=i.getCacheChunk(e.url,e.start,e.end);if(o.WAIT_HEADER_LENGTH>=(e.start||0)&&t)u.postMessage({status:r.DOWNLOAD_FILE_RSP,data:{seqNo:e.seqNo,data:t,start:e.start,end:e.end},url:e.url});else{var n=new XMLHttpRequest;n.open("get",e.url,!0),n.responseType="arraybuffer",n.setRequestHeader("Range","bytes="+e.start+"-"+e.end),n.onload=function(){o.WAIT_HEADER_LENGTH>=(e.start||0)&&i.addCacheChunk(e.url,n.response,e.start,e.end),u.postMessage({status:r.DOWNLOAD_FILE_RSP,data:{seqNo:e.seqNo,data:n.response,start:e.start,end:e.end},url:e.url})},n.send()}},e}());u.onmessage=function(e){var t=e.data;switch(t.status){case r.GET_FILE_INFO_REQ:c.getFileInfo(t.url);break;case r.DOWNLOAD_FILE_REQ:c.downloadFile(t)}};var f=function(e){function t(t){return e.call(this,t)||this}return n.__extends(t,e),t}(Worker);t.default=f}.apply(t,r))||(e.exports=o)},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return o})),n.d(t,"__assign",(function(){return a})),n.d(t,"__rest",(function(){return u})),n.d(t,"__decorate",(function(){return i})),n.d(t,"__param",(function(){return c})),n.d(t,"__metadata",(function(){return f})),n.d(t,"__awaiter",(function(){return s})),n.d(t,"__generator",(function(){return l})),n.d(t,"__createBinding",(function(){return p})),n.d(t,"__exportStar",(function(){return d})),n.d(t,"__values",(function(){return _})),n.d(t,"__read",(function(){return y})),n.d(t,"__spread",(function(){return h})),n.d(t,"__spreadArrays",(function(){return E})),n.d(t,"__spreadArray",(function(){return v})),n.d(t,"__await",(function(){return O})),n.d(t,"__asyncGenerator",(function(){return b})),n.d(t,"__asyncDelegator",(function(){return w})),n.d(t,"__asyncValues",(function(){return g})),n.d(t,"__makeTemplateObject",(function(){return m})),n.d(t,"__importStar",(function(){return T})),n.d(t,"__importDefault",(function(){return S})),n.d(t,"__classPrivateFieldGet",(function(){return A})),n.d(t,"__classPrivateFieldSet",(function(){return P}));\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function u(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function i(e,t,n,r){var o,a=arguments.length,u=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(u=(a<3?o(u):a>3?o(t,n,u):o(t,n))||u);return a>3&&u&&Object.defineProperty(t,n,u),u}function c(e,t){return function(n,r){t(n,r,e)}}function f(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function s(e,t,n,r){return new(n||(n=Promise))((function(o,a){function u(e){try{c(r.next(e))}catch(e){a(e)}}function i(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,i)}c((r=r.apply(e,t||[])).next())}))}function l(e,t){var n,r,o,a,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,r=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=t.call(e,u)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}}var p=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function d(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||p(t,e,n)}function _(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function y(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)u.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return u}function h(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e}function E(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],u=0,i=a.length;u<i;u++,o++)r[o]=a[u];return r}function v(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||t)}function O(e){return this instanceof O?(this.v=e,this):new O(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),a=[];return r={},u("next"),u("throw"),u("return"),r[Symbol.asyncIterator]=function(){return this},r;function u(e){o[e]&&(r[e]=function(t){return new Promise((function(n,r){a.push([e,t,n,r])>1||i(e,t)}))})}function i(e,t){try{(n=o[e](t)).value instanceof O?Promise.resolve(n.value.v).then(c,f):s(a[0][2],n)}catch(e){s(a[0][3],e)}var n}function c(e){i("next",e)}function f(e){i("throw",e)}function s(e,t){e(t),a.shift(),a.length&&i(a[0][0],a[0][1])}}function w(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:O(e[r](t)),done:"return"===r}:o?o(t):t}:o}}function g(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=_(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}}function m(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var I=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&p(t,e,n);return I(t,e),t}function S(e){return e&&e.__esModule?e:{default:e}}function A(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function P(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n}},function(e,t,n){var r;void 0===(r=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DOWNLOAD_FILE_RSP=t.GET_FILE_INFO_RSP=t.DOWNLOAD_FILE_REQ=t.GET_FILE_INFO_REQ=void 0,t.GET_FILE_INFO_REQ=0,t.DOWNLOAD_FILE_REQ=1,t.GET_FILE_INFO_RSP=0,t.DOWNLOAD_FILE_RSP=1}.apply(t,[n,t]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONTROL_GROUP_WASM_URL=t.CORE_WASM_URL=t.VIDEOHANDLER=t.STSZ=t.CO64=t.STCO=t.MDAT=t.FTYP=t.FREE=t.MOOV=t.VIDEO_EVENT=t.MAX_CHUNCK_SIZE=t.DOWNLOAD_BUFFER_SIZE=t.INIT_CHUNCK_SIZE=t.WAIT_HEADER_LENGTH=t.VIDEO_FRAME_DIFF=t.MAX_DECODING_TIME_LENGTH=t.MAX_BUFFER_TIME_LENGTH=t.PLAYER_STATE_PAUSING=t.PLAYER_STATE_PLAYING=t.PLAYER_STATE_IDLE=void 0,t.PLAYER_STATE_IDLE=0,t.PLAYER_STATE_PLAYING=1,t.PLAYER_STATE_PAUSING=2,t.MAX_BUFFER_TIME_LENGTH=1.5,t.MAX_DECODING_TIME_LENGTH=3,t.VIDEO_FRAME_DIFF=40,t.WAIT_HEADER_LENGTH=1048576,t.INIT_CHUNCK_SIZE=Math.pow(2,16),t.DOWNLOAD_BUFFER_SIZE=1048576,t.MAX_CHUNCK_SIZE=6*t.INIT_CHUNCK_SIZE,t.VIDEO_EVENT={playing:"playing",waiting:"waiting",seeking:"seeking",seeked:"seeked",ended:"ended",loadedmetadata:"loadedmetadata",loadeddata:"loadeddata",canplay:"canplay",timeupdate:"timeupdate",play:"play",pause:"pause",volumechange:"volumechange"},t.MOOV=[109,111,111,118],t.FREE=[102,114,101,101],t.FTYP=[102,116,121,112],t.MDAT=[109,100,97,116],t.STCO=[115,116,99,111],t.CO64=[99,111,54,52],t.STSZ=[115,116,115,122],t.VIDEOHANDLER=[118,105,100,101],t.CORE_WASM_URL="https://psstatic.cdn.bcebos.com/video/wasm/libffmpeg_core3_1645772133000.wasm",t.CONTROL_GROUP_WASM_URL="https://psstatic.cdn.bcebos.com/video/wasm/libffmpeg25_1646724447000.wasm"}.apply(t,[n,t]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.cacheMap=new Map,this.cacheKeys=[],this.limit=e||3}return e.prototype.addCacheChunk=function(e,t,n,r){var o;this.exceedCacheLength()&&this.cacheMap.delete(this.cacheKeys.shift());var a=this.generateKey(n,r);this.cacheMap.has(e)?this.cacheMap.get(e)[a]=t:(this.cacheMap.set(e,((o={})[a]=t,o)),this.cacheKeys.push(e))},e.prototype.getCacheChunk=function(e,t,n){var r=this.generateKey(t,n);if(this.hasCacheChunk(e,t,n))return this.cacheMap.get(e)[r]},e.prototype.hasCacheChunk=function(e,t,n){var r=this.generateKey(t,n);return this.cacheMap.has(e)&&this.cacheMap.get(e)[r]},e.prototype.exceedCacheLength=function(){return this.cacheKeys.length===this.limit},e.prototype.generateKey=function(e,t){return e+"_"+t},e}();t.default=n}.apply(t,[n,t]))||(e.exports=r)}]);',"Worker",void 0,void 0)
}n.r(t),n.d(t,"default",function(){return r});var o=n(1),i=n.n(o)},function(e,t,n){var r,o;r=[n,t,n(3)],void 0===(o=function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.gl=e,this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),
e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}return e.prototype.bind=function(e,t,n){this.gl.activeTexture([this.gl.TEXTURE0,this.gl.TEXTURE1,this.gl.TEXTURE2][e]),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),t&&this.gl.uniform1i(this.gl.getUniformLocation(t,n),e)},e.prototype.fill=function(e,t,n){this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,e,t,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,n)},e
}(),o=function(){function e(e,t,n){this.canvas=t,this.el=e,this.gl=t.getContext("webgl")||t.getContext("experimental-webgl"),window.gl=this.gl;var r=n.mode,o=n.resize;this.mode=r,this.resize=o,this.initGL(),this.resize&&window.addEventListener("resize",this.onReize.bind(this))}return e.prototype.onReize=function(){if(this.el){var e=n.getPosition(this.el);this.canvas.width=e.width*(window.devicePixelRatio||2),this.canvas.height=e.height*(window.devicePixelRatio||2)
}else e=n.getPosition(this.canvas),this.canvas.width=e.width,this.canvas.height=e.height},e.prototype.initGL=function(){if(this.gl){this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1);var e=this.gl.createProgram(),t=["attribute highp vec4 aVertexPosition;","attribute vec2 aTextureCoord;","varying highp vec2 vTextureCoord;","void main(void) {","   gl_Position = aVertexPosition;","   vTextureCoord = aTextureCoord;","}"].join("\n"),n=this.gl.createShader(this.gl.VERTEX_SHADER)
;n&&this.gl.shaderSource(n,t),n&&this.gl.compileShader(n)
;var o=["precision highp float;","varying lowp vec2 vTextureCoord;","uniform sampler2D YTexture;","uniform sampler2D UTexture;","uniform sampler2D VTexture;","const mat4 YUV2RGB = mat4","(","   1.1643828125, 0, 1.59602734375, -.87078515625,","   1.1643828125, -.39176171875, -.81296875, .52959375,","   1.1643828125, 2.017234375, 0, -1.081390625,","   0, 0, 0, 1",");","void main(void) {","   gl_FragColor = vec4( texture2D(YTexture, vTextureCoord).x, texture2D(UTexture, vTextureCoord).x, texture2D(VTexture, vTextureCoord).x, 1) * YUV2RGB;","}"].join("\n"),i=this.gl.createShader(this.gl.FRAGMENT_SHADER)
;if(i&&this.gl.shaderSource(i,o),i&&this.gl.compileShader(i),e&&n&&this.gl.attachShader(e,n),e&&i&&this.gl.attachShader(e,i),e&&this.gl.linkProgram(e),this.gl.useProgram(e),e&&this.gl.getProgramParameter(e,this.gl.LINK_STATUS)){var a=this.gl.getAttribLocation(e,"aVertexPosition");null!==a&&this.gl.enableVertexAttribArray(a);var s=e&&this.gl.getAttribLocation(e,"aTextureCoord");null!==s&&this.gl.enableVertexAttribArray(s);var u=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,u),
this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0]),this.gl.STATIC_DRAW),null!==a&&this.gl.vertexAttribPointer(a,3,this.gl.FLOAT,!1,0,0);var l=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,l),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),this.gl.STATIC_DRAW),null!==s&&this.gl.vertexAttribPointer(s,2,this.gl.FLOAT,!1,0,0),this.gl.y=new r(this.gl),this.gl.u=new r(this.gl),this.gl.v=new r(this.gl),
this.gl.y.bind(0,e,"YTexture"),this.gl.u.bind(1,e,"UTexture"),this.gl.v.bind(2,e,"VTexture")}}},e.prototype.renderFrame=function(e,t,n,r,o){if(this.gl){var i=this.gl,a=this.getGlPosition(t,n),s=this.el?window.devicePixelRatio||2:1;i.viewport(a.left*s,a.top*s,a.width*s,a.height*s),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.y&&i.y.fill(t,n,e.subarray(0,r)),i.u&&i.u.fill(t>>1,n>>1,e.subarray(r,r+o)),i.v&&i.v.fill(t>>1,n>>1,e.subarray(r+o,e.length)),i.drawArrays(i.TRIANGLE_STRIP,0,4)}},
e.prototype.destroy=function(){this.gl&&(this.gl.clearColor(0,0,0,0),this.gl.clear(this.gl.COLOR_BUFFER_BIT));var e=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e);for(var t=this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),n=0;n<t;++n)this.gl.vertexAttribPointer(n,1,this.gl.FLOAT,!1,0,0);this.gl.canvas.width=1,this.gl.canvas.height=1,window.removeEventListener("orientationchange",this.onReize.bind(this))},e.prototype.getGlPosition=function(e,t){
var r=0,o=0,i=0,a=0,s=n.getPosition(this.gl.canvas),u=s.width,l=s.height;if("scale"===this.mode)i=u,a=l;else{var f=void 0;f=u/l<e/t?"thick":"thin","contain"===this.mode?"thin"===f?(a=l,i=Number((e*l/t).toFixed(0)),r=Number(((u-i)/2).toFixed(0)),o=0):"thick"===f&&(r=0,i=u,a=Number((u*t/e).toFixed(0)),o=Number(((l-a)/2).toFixed(0))):"cover"===this.mode&&("thin"===f?(i=u,a=Number((t*u/e).toFixed(0)),r=0,o=-Number(((a-l)/2).toFixed(0))):"thick"===f&&(a=l,o=0,i=Number((e*l/t).toFixed(0)),
r=-Number(((i-u)/2).toFixed(0))))}return{left:r,top:o,width:i,height:a}},e}();t.default=o}.apply(t,r))||(e.exports=o)},function(e,t,n){var r;void 0===(r=function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0});var r=0,o=0,i=function(){function e(e){this.init(e)}return e.prototype.init=function(e){this.startTime=0,this.options=Object.assign({},{encoding:"16bitInt",audioChannels:2,audioSampleFmt:3,audioSampleRate:5e3},e),this.maxValue=this.getMaxValue(),
this.typedArray=this.getTypedArray(),this.createContext(e.gainNodeGainValue)},e.prototype.updateOptions=function(e){this.init(e)},e.prototype.updateBaseTime=function(e){r=e},e.prototype.getMaxValue=function(){var e={"8bitInt":128,"16bitInt":32768,"32bitInt":2147483648,"32bitFloat":1};return e[this.options.encoding]?e[this.options.encoding]:e["16bitInt"]},e.prototype.getTypedArray=function(){var e={"8bitInt":Int8Array,"16bitInt":Int16Array,"32bitInt":Int32Array,"32bitFloat":Float32Array}
;return e[this.options.encoding]?e[this.options.encoding]:e["16bitInt"]},e.prototype.createContext=function(e){var t=function(e){n||(n=new(window.AudioContext||window.webkitAudioContext));var t=n.createGain?n.createGain():n.createGainNode();return o=void 0!==e?e:o,t.gain.value=o,t.connect(n.destination),{audioCtx:n,gainNode:t}}(e);this.audioCtx=t.audioCtx,this.gainNode=t.gainNode,this.startTime=0},e.prototype.play=function(e){if(this.audioCtx&&this.isTypedArray(e)){this.resume()
;var t=this.getFormatedValue(e);if(t.length){for(var n,r,o,i=this.audioCtx.createBufferSource(),a=t.length/this.options.audioChannels,s=this.audioCtx.createBuffer(this.options.audioChannels,a,this.options.audioSampleRate),u=0;u<this.options.audioChannels;u++){n=s.getChannelData(u),r=u,o=50;for(var l=0;l<a;l++)n[l]=t[r],l<50&&(n[l]=n[l]*l/50),l>=a-51&&(n[l]=n[l]*o--/50),r+=this.options.audioChannels}this.startTime<this.audioCtx.currentTime&&(this.startTime=this.audioCtx.currentTime),i.buffer=s,
i.connect(this.gainNode),i.start?i.start(this.startTime):i.noteOn(this.startTime),this.startTime+=s.duration}}},e.prototype.isTypedArray=function(e){return e.byteLength&&e.buffer&&e.buffer.constructor==ArrayBuffer},e.prototype.getFormatedValue=function(e){for(var t=new this.typedArray(e.buffer),n=new Float32Array(t.length),r=0;r<t.length;r++)n[r]=t[r]/this.maxValue;return n},e.prototype.getTimeStamp=function(){return this.audioCtx?r+this.audioCtx.currentTime:0},
e.prototype.getAudioCtxCurrentTime=function(){return this.audioCtx?this.audioCtx.currentTime:0},e.prototype.pause=function(){"running"===this.audioCtx.state&&this.audioCtx.suspend()},e.prototype.resume=function(){"suspended"===this.audioCtx.state&&this.audioCtx.resume()},e.prototype.setVolume=function(e){this.gainNode.gain.value!==e&&(this.gainNode.gain.value=e,o=e)},e.prototype.destroy=function(){this.pause(),r=-this.getAudioCtxCurrentTime(),
this.audioCtx&&this.gainNode&&this.gainNode.disconnect()},e.prototype.getVolume=function(){return this.gainNode.gain.value},e}();t.default=i}.apply(t,[n,t]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.callbacks={}}return e.prototype.on=function(e,t,n){if("string"==typeof e&&"function"==typeof t){var r={};r.fn=t,r.ctx=n,r.type=e;var o=this.callbacks[e];return o||(o=[],
this.callbacks[e]=o),o.push(r),this}},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!e)return this;var r=this.callbacks[e];if(!r)return this;for(var o=0,i=r.length;o<i;o++){var a=r[o].fn,s=r[o].ctx;if(!e||e===r[o].type)try{a.apply(s,t)}catch(e){}}return this},e}();t.default=n}.apply(t,[n,t]))||(e.exports=r)},function(e,t,n){var r,o;r=[n,t,n(0),n(4)],void 0===(o=function(e,t,n,r){"use strict";function o(e){
var t=e||{},n=t.from,r=void 0===n?"unknown":n,o=t.page,i=void 0===o?"unknown":o,a=t.value;return{from:r,page:i,value:void 0===a?"unknown":a}}var i;Object.defineProperty(t,"__esModule",{value:!0}),t.sendMoovCount=t.sendDistLog=t.sendCorePfLog=t.sendPfLog=t.sendWasmErrorLog=t.sendErrorLog=t.FILE_FORMAT_ERROR=t.OPEN_DECODER_FAIL=t.INIT_DECODER_FAIL=void 0,t.INIT_DECODER_FAIL=0,t.OPEN_DECODER_FAIL=1,t.FILE_FORMAT_ERROR=2;var a=((i={})[t.INIT_DECODER_FAIL]="init decoder fail",
i[t.OPEN_DECODER_FAIL]="open decoder fail",i[t.FILE_FORMAT_ERROR]="file format error",i),s="https://sp1.baidu.com/5b1ZeDe5KgQFm2e88IuM_a/mwb2.gif",u="1_5";t.sendErrorLog=function(e,t){var i={msg:a[e],url:this.fileInfo.url,pageUrl:location.href},l=o(this.options.logConfig||{});t&&t.hasOwnProperty("status")&&(i.status=t.status),(new Image).src=s+"?"+r.stringify({pid:u,type:"et_comm",info:i,lid:(new Date).getTime(),dim:n.__assign({},l),group:"decoder"})},t.sendWasmErrorLog=function(e){
void 0===e&&(e="");var t,i={msg:e.substring(0,500),url:this.fileInfo.url,pageUrl:location.href},a=o(this.options.logConfig||{});(new Image).src=s+"?"+r.stringify({pid:u,type:"et_comm",info:i,lid:(new Date).getTime(),dim:n.__assign(n.__assign({},a),{level:(t=this.playCount,t<=1?"A":t<=5?"B":t<=15?"C":"D")}),group:"decoder_wasm"})},t.sendPfLog=function(){var e=this,t={},i=o(this.options.logConfig||{})
;this.firePlayTime&&["afterDownloadWasm","afterInitDecoder","afterDownloadVideo","afterOpenDecoder","beforeDecodeOnePacket","getFirstFrame","renderFirstFrame"].map(function(n){e[n]&&(t[n]=e[n]-e.firePlayTime)}),Object.keys(t).length&&((new Image).src=s+"?"+r.stringify({pid:u,type:"pf_comm",info:t,lid:(new Date).getTime(),dim:n.__assign(n.__assign({},i),{isFirstPlay:this.isFirstPlay?1:0}),group:"decoder"}))},t.sendCorePfLog=function(e){var t={},i=o(this.options.logConfig||{});try{t=JSON.parse(e)
}catch(e){}Object.keys(t).length&&((new Image).src=s+"?"+r.stringify({pid:u,type:"pf_comm",info:t,lid:(new Date).getTime(),dim:n.__assign(n.__assign({},i),{isFirstPlay:this.isFirstPlay?1:0}),group:"decoder_core"}))},t.sendDistLog=function(){var e=o(this.options.logConfig||{});(new Image).src=s+"?"+r.stringify({pid:u,type:"dist_comm",info:{playCount:1},lid:(new Date).getTime(),dim:n.__assign(n.__assign({},e),{isFirstPlay:this.isFirstPlay?1:0}),group:"decoder"})},t.sendMoovCount=function(){
var e=new Image,t=o(this.options.logConfig||{});e.src=s+"?"+r.stringify({pid:u,type:"dist_comm",info:{moovInAfterCount:1},lid:(new Date).getTime(),dim:n.__assign({},t),group:"decoder_moov"})}}.apply(t,r))||(e.exports=o)},function(e,t,n){var r;void 0===(r=function(e,t){"use strict";function n(){self.importScripts("https://mms-mis.cdn.bcebos.com/video/libffmpeg19.js")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=new Blob([n.toString()+" prefetchWorker()"],{
type:"text/javascript"});new Worker(URL.createObjectURL(e))}}.apply(t,[n,t]))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.support=t.execPerTime=void 0,t.execPerTime=function(e,t){},t.support=function(e){var t;if(e&&!/\.(mov|mp4|m4a|3gp|3g2|mj2)/.test(e))return!1;if(void 0===Worker)return!1;if(!window.AudioContext&&!window.webkitAudioContext)return!1;var r=window.WebAssembly||{}
;if("function"!=typeof r.Memory||"function"!=typeof r.instantiate)return!1;if(void 0===n){var o=document.createElement("canvas"),i=o.getContext("webgl")||o.getContext("experimental-webgl");window.WebGLRenderingContext&&i?(n=!0,i.getExtension&&(null===(t=i.getExtension("WEBGL_lose_context"))||void 0===t||t.loseContext()),o=null):n=!1}return n}}.apply(t,[n,t]))||(e.exports=r)}])}),define("@baidu/video-decoder-player",["@baidu/video-decoder-player/dist/index"],function(e){return e});