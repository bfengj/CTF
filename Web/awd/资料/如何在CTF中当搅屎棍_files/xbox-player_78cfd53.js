define("@baidu/xbox-player/dist/player.amd",["exports"],function(e){"use strict";function t(e){"@babel/helpers - typeof";return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i]
;n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},o.apply(this,arguments)}
function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach(function(t){r(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach(function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){
return e.__proto__=t,e})(e,t)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?d(e):t}function f(e){
var t=h();return function(){var i,n=p(e);if(t){var a=p(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return y(this,i)}}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"baiduboxapp";return ee()?new Promise(function(n,a){var r=t.params||{};0===Object.keys(r).length&&r.constructor===Object||"%7B%7D"===r||"{}"===r?delete t.params:"object"===ne(r)&&(t.params=le(r))
;var o=l(l({},t),{},{callback:function(e){var t=e;if("string"===ne(e))try{t=JSON.parse(e)}catch(e){console.log(e)}if(0==+t.status)return void n(t.data);a(t)}}),s=ue(o),u="".concat(i,"://").concat(e,"?").concat(s);Z()?te(u):$()&&ie(u)}):Promise.reject({status:902,message:"主版APP外无法调用端能力"})}var g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"_";i(this,e),this._events={},this._eventsCount=0,this.prefix=t.slice(0,1)}return a(e,[{key:"on",value:function(e,t,i){
var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("function"!=typeof t)throw new TypeError("The listener must be a function");var a={fn:t,context:i||this,once:n},r=this.prefix?this.prefix+e:e;return this._events[r]||(this._events[r]=[],this._eventsCount++),this._events[r].push(a),this}},{key:"once",value:function(e,t,i){return this.on(e,t,i,!0)}},{key:"emit",value:function(e){var t=this.prefix?this.prefix+e:e;if(!this._events[t])return!1
;for(var i=(this._events[t]||[]).slice(),n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];for(var o=0,s=i.length;o<s;o++){i[o].once&&this.off(e,i[o].fn,void 0,!0);try{i[o].fn.apply(i[o].context,a)}catch(t){console.log("emit "+e+" event error! please check it: ",t)}}return!0}},{key:"clearEvent",value:function(e){0==--this._eventsCount?this._events={}:delete this._events[e]}},{key:"off",value:function(e,t,i,n){var a=this.prefix?this.prefix+e:e
;if(this._events[a]&&this._events[a].length)if(t){for(var r=this._events[a],o=[],s=0,l=r.length;s<l;s++)(r[s].fn!==t||n&&!r[s].once||i&&r[s].context!==i)&&o.push(r[s]);o.length?this._events[a]=o:this.clearEvent(a)}else this.clearEvent(a);return this}},{key:"removeAllListeners",value:function(){return this._events={},this._eventsCount=0,this}}]),e}(),m=function(){function e(t,n){i(this,e),this.api=t,this.pluginOptions=n}return a(e,[{key:"get",value:function(){
if("na"===this.api.getMode())return!!this.api.getPlayerOption("autoplay");var e=this.api.getVideoInstance();return e?e.autoplay:""}},{key:"set",value:function(e){if("na"===this.api.getMode())return void(this.api.getPlayerController("playerKernelInit")||this.api.setPlayerOption("autoplay",e));var t=this.api.getVideoInstance();t&&(t.autoplay=e),this.api.setPlayerOption("autoplay",e)}}]),e}(),P=function(){function e(t,n){i(this,e),this.api=t,this.pluginOptions=n}return a(e,[{key:"get",
value:function(){if("na"===this.api.getMode())return this.api.getPlayerOption("muted");var e=this.api.getVideoInstance();return e?e.muted:""}},{key:"set",value:function(e){var t=this.api.getBoxTools(),i=t.isIOS,n=t.isAndroid,a=t.invokeP,r=this.api.getPlayerOption("containerId"),o=this.api.getVideoInstance();if("na"===this.api.getMode())return void(i()?a("video/slrSetMuted",{params:{containerId:r,muted:+e}}):n()&&(o.zeusVideoExt=JSON.stringify({id:r,name:"h5samelayer",action:"setMute",data:{
muted:+e}})));o&&(o.muted=e),this.api.setPlayerOption("muted",e)}}]),e}(),O=function(){function e(t,n){i(this,e),this.api=t,this.pluginOptions=n}return a(e,[{key:"run",value:function(){if("na"===this.api.getMode())return this.naRun();this.h5Run()}},{key:"h5Run",value:function(){var e=this.api.getVideoInstance();return e&&e.play()}},{key:"naRun",value:function(){var e=this,t=this.api.getBoxTools(),i=t.isIOS,n=t.isAndroid,a=t.invokeP;if(i()){
var r=this.api.getPlayerOption("containerId"),o=this.api.getPlayerInstance(),s=o.paused;a("video/slrPlayPlayer",{params:{containerId:r}}).then(function(){s&&e.api.getPlayerController("playerKernelInit")&&(e.api.emit("play"),e.api.setPlayerOption("paused",!1),e.api.emit("playing"))})}else n()&&this.h5Run()}}]),e}(),k=function(){function e(t,n){i(this,e),this.api=t,this.pluginOptions=n}return a(e,[{key:"get",value:function(){if("na"===this.api.getMode())return this.api.getPlayerOption("volume")
;var e=this.api.getVideoInstance();return e?e.volume:""}},{key:"set",value:function(e){var t=this,i=this.api.getBoxTools(),n=i.isIOS,a=i.invokeP,r=this.api.getPlayerOption("containerId");if("na"===this.api.getMode()&&n())return void a("video/slrSetSystemVolume",{params:{containerId:r,volume:e}}).then(function(){return t.api.setPlayerOption("volume",e)});var o=this.api.getVideoInstance();o&&(o.volume=e)}}]),e}(),I=function(){function e(t,n){i(this,e),this.api=t,this.pluginOptions=n}return a(e,[{
key:"get",value:function(){var e=this.api.getBoxTools().isIOS;if("na"===this.api.getMode()&&e())return this.api.getPlayerOption("duration");var t=this.api.getVideoInstance();return t?t.duration:""}}]),e}(),b=function(){function e(t,n){i(this,e),this.api=t,this.pluginOptions=n}return a(e,[{key:"get",value:function(){var e=this.api.getBoxTools().isIOS;if("na"===this.api.getMode()&&e())return this.api.getPlayerOption("error");var t=this.api.getVideoInstance();return t?t.error:""}}]),e
}(),S=function(){function e(t,n){i(this,e),this.api=t,this.pluginOptions=n}return a(e,[{key:"get",value:function(){var e=this.api.getBoxTools().isIOS;if("na"===this.api.getMode()&&e())return this.api.getPlayerOption("playbackRate");var t=this.api.getVideoInstance();return t?t.playbackRate:""}},{key:"set",value:function(e){var t=this,i=this.api.getBoxTools(),n=i.isIOS,a=i.invokeP;if("na"===this.api.getMode()&&n())return void a("video/slrPlaybackRate",{params:{
containerId:this.api.getPlayerOption("containerId"),playbackRate:e}}).then(function(e){return!t.api.getPlayerController("playerKernelInit")&&t.api.setPlayerOption("playbackRate",e.playbackRate)});var r=this.api.getVideoInstance();r&&(r.playbackRate=e),this.api.setPlayerOption("playbackRate",e)}}]),e}(),w=function(){function e(t,n){i(this,e),this.api=t,this.pluginOptions=n}return a(e,[{key:"get",value:function(){var e=this.api.getBoxTools().isIOS
;if("na"===this.api.getMode()&&e())return this.api.getPlayerOption("src");var t=this.api.getVideoInstance();return t?t.src:""}}]),e}(),x=function(e){return{wrap:e,inner:e+1}},C=function(){function e(t,n){var a=this;i(this,e),this.api=t,this.pluginOptions=n||{},this.perf={},this.perflog={},this.isEmitPerf=!1,this.queryTimer=null,this.api.on("reset",function(e){return a.reset(e)}),this.api.on("destroy",function(){return a.destroy()})}return a(e,[{key:"run",value:function(e,t){
if(!this.api.getVideoInstance()&&this.api.getRoot()){var i=this.api.getPlayerOption();this.perf.createStart=+new Date,this.perf.clk=i.prepareInvokePlayerTime||this.perf.createStart;var n=this.api.getBoxTools(),a=n.isMainBox,r=n.version,o=n.versionCompare,s=n.isIOS,l=n.isAndroid;this.isIOS=s(),this.isAndroid=l();var u=this.api.getBoxTools().getRandomName;if(this.cid=u("h5-samelayer-cid-")||this.cid,this.api.setPlayerOption("containerId",this.cid),
i.customizedVideo&&this.api.setPlayerController("slrOnly",!0),!t&&a()&&(this.isIOS&&o(r,"12.9")>=0||this.isAndroid&&o(r,"12.10")>=0)){if(this.isIOS)return this.iosMaxQueryCnt=e||5,this.iosCreateVideo();if(this.isAndroid)return this.androidCreateVideo(i.pageUrl)}this.h5Run()}}},{key:"_clearQueryTimer",value:function(){this.queryTimer&&clearTimeout(this.queryTimer)}},{key:"destroy",value:function(){var e=this.api.getBoxTools().invokeP,t=this.api.getVideoInstance(),i=this.api.getPlayerController()
;if("na"===this.api.getMode()){if(window.removeEventListener("pagehide",i.pagehideHandler),window.removeEventListener("pageshow",i.pageshowHandler),this.isIOS){var n=i.eventCallback;return window[n]=function(){},e("video/slrStopPlayer",{params:{containerId:this.cid}}),document.removeEventListener(i.visibilityChange,i.visibilityHandler),void this.removeDom()}if(this.isAndroid){var a=i.operationjscallback;window[a]=function(){},e("v5/datachannel/unregister",{
action:"com.baidu.videoplayer.operationresult",jscallback:a})}}Object.keys(i.videoEventHandler).forEach(function(e){return t.removeEventListener(e,i.videoEventHandler[e])}),Object.keys(i.docEventHandler).forEach(function(e){return document.removeEventListener(e,i.docEventHandler[e])}),t.src="",this.removeDom()}},{key:"removeDom",value:function(){var e=this.api.getVideoInstance();e&&e.parentNode&&e.parentNode.removeChild(e),this.api.setVideoInstance(null)}},{key:"iosCreateVideo",value:function(){
var e=this.api.getRoot(),t=this.getContainerBox(e),i=this.api.getPlayerOption();this.width=i.width||t.width,this.height=i.height||t.height;var n=x(this.height),a=n.wrap,r=n.inner,o=document.createElement("div");o.className=this.cid,o.style="width:"+this.width+"px;height:"+a+"px;overflow: scroll; -webkit-overflow-scrolling: touch; background-color: transparent;";var s=document.createElement("div");s.style="width: 100%; height:"+r+"px",
i.precreate&&o.setAttribute("data-precreatevideoinfo",JSON.stringify({videoUrl:i.src,vid:i.vid,playerControlType:i.playerControlType||0})),o.appendChild(s),e.appendChild(o),this.times=0,this.isScrollViewFound=!1,this.isRenderComplete=!1,this.api.setVideoInstance(o);var l=i.position||this.getContainerBox(o);this.api.setPlayerOption("",{width:this.width,height:this.height,position:l}),this.perf.queryStart=+new Date,this.iosQuery(l)}},{key:"getContainerBox",value:function(e){
var t=e.getBoundingClientRect();return{left:t.left+window.scrollX,top:t.top+window.scrollY,width:Math.round(t.width),height:Math.round(t.height)}}},{key:"iosQuery",value:function(e){var t=this,i=this.api.getBoxTools().invokeP;if(++this.times>this.iosMaxQueryCnt&&(!this.isScrollViewFound||!this.isRenderComplete))return this.perflog.queryfail=+new Date-this.perf.queryStart,this._clearQueryTimer(),this.h5Run();i("video/slrIsFoundContainerView",{params:{containerId:this.cid,position:e,
scrollHeight:x(e.height).inner}}).then(function(i){return i.isSupportSameLR?(t.perflog.model=i.detailMsg||null,i.isScrollViewFound&&(t.isScrollViewFound=!0,i.isRenderComplete)?(t.isRenderComplete=!0,t.perflog.count=t.times,t.perflog.querysuc=+new Date-t.perf.queryStart,t.times=999,t.iosInvokePlayer()):void(t.pluginOptions.queryTime>=0?t.queryTimer=setTimeout(function(){t.iosQuery(e)},t.pluginOptions.queryTime):t.iosQuery(e))):t.h5Run()}).catch(function(e){
t.perflog.queryfail=+new Date-t.perf.queryStart,t._clearQueryTimer(),t.h5Run()})}},{key:"iosInvokePlayer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"video/slrInvokePlayer",i=this.cid,n=this.api.getBoxTools(),a=n.invokeP,r=n.getGlobalFunc,o=n.version,s=n.versionCompare,u=this.api.getPlayerController("eventCallback")||r(function(t,i){return e.iosPlayerEventDispatch(t,i)});this.api.setPlayerController("eventCallback",u)
;var p=this.api.getPlayerOption(),c=p.fullScreenType||"windowFullScreen",h=!p.hasOwnProperty("isIgnoreDeviceOrientation")||!!p.isIgnoreDeviceOrientation,d={containerId:i,eventCallback:u,videoinfo:l(l({},p),{},{vid:p.vid,videoUrl:p.src,posterImage:p.poster,muted:+p.muted,loop:+p.loop,syncPlayerPosition:1,fullScreenType:c,isIgnoreDeviceOrientation:+h,ext_log:l({prepareInvokePlayerTime:this.perf.clk},p.ext||{})})};s(o,"13.6")>=0&&(d.videoinfo.ext_log.value=p.value||"")
;var y=this.api.getPlayerInstance();a(t,{params:d}).then(function(){e.api.setMode("na"),e.perflog.create=+new Date-e.perf.createStart,e.api.emit("ready",{mode:"na",isIOS:e.isIOS,isAndroid:e.isAndroid});var t=e.api.getPlayerController(),i=t.fromCache,n=t.hidePlaying;(i&&n||!i&&p.autoplay)&&(e.isEmitPerf=!0,y.play(),e.api.setPlayerController("fromCache",!1),e.api.setPlayerController("hidePlaying",!1))}).catch(function(t){e.h5Run()}),this.iosUpdatePlayerStatus(),
p.hasOwnProperty("volume")&&p.volume>=0?y.volume=p.volume:a("video/slrGetSystemVolume",{params:{containerId:this.cid}}).then(function(t){return e.api.setPlayerOption("volume",t.volume)}),this.api.setPlayerOption("",{ended:!1,paused:!1,fullscreen:!1,currentTime:0,duration:0,readyState:0,networkState:0,fullScreenType:c,isIgnoreDeviceOrientation:h,timeInterval:p.timeInterval||1,accurate:p.accurate||!1});var f=this.api.getPlayerController("fullscreenEvt")||function(e){e.stopPropagation(),
e.preventDefault()};this.api.setPlayerController("fullscreenEvt",f),this.iosVideoVisible()}},{key:"iosVideoVisible",value:function(){var e=this;if(!this.api.getPlayerController("visibilityHandler")){var t="",i="";if(void 0!==document.visibilityState?(t="visibilityState",i="visibilitychange"):void 0!==document.webkitVisibilityState&&(t="webkitVisibilityState",i="webkitvisibilitychange"),!i)return void console.log("browser donot supports the Page Visibility API.");var n=function(){
var i=e.api.getPlayerInstance();i&&("visible"===document[t]?e.api.getPlayerController("hideNeedResume")&&(i.reset({src:i.src}),i.play(),e.api.setPlayerController("hideNeedResume",!1)):!e.api.getPlayerController("playerKernelInit")||i.ended||i.paused||(i.pause(),e.api.setPlayerController("hideNeedResume",!0)))};this.api.setPlayerController("visibilityChange",i),this.api.setPlayerController("visibilityHandler",n),document.addEventListener(i,n,!1),this.naBackRecovery()}}},{key:"naBackRecovery",
value:function(){var e=this;if(!this.api.getPlayerController("pagehideHandler")){var t=function(t){if(t.persisted){var i=e.api.getPlayerInstance();e.isIOS?setTimeout(function(){e.api.setPlayerController("fromCache",!0),e.perf.clk=+new Date,e.perf.createStart=e.perf.clk,e.iosCreateVideo()},10):e.api.getPlayerController("hidePlaying")&&(i.play(),e.api.getPlayerController("hidePlaying",!1))}};window.addEventListener("pageshow",t),this.api.setPlayerController("pageshowHandler",t);var i=function(){
e.isIOS&&(e.removeDom(),e.perf={});var t=e.api.getPlayerInstance(),i=e.api.getPlayerController("playerKernelInit")&&!t.ended&&!t.paused;e.api.setPlayerController("hidePlaying",i)};window.addEventListener("pagehide",i),this.api.setPlayerController("pagehideHandler",i)}}},{key:"iosUpdatePlayerStatus",value:function(){var e=this;(0,this.api.getBoxTools().invokeP)("video/slrGetPlayerStatus",{params:{containerId:this.cid,gather:["muted","duration","rate","loop"]}}).then(function(t){
return e.api.setPlayerOption("",{muted:!!t.muted,duration:t.duration||0,playbackRate:t.rate,loop:!!t.loop})})}},{key:"iosPlayerEventDispatch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&t.containerId===this.cid)switch(delete t.containerId,e){case"slrPlayerStateChanged":this.iosPlayerStatusDispatch(t);break;case"slrLoadingViewStatusChanged":this.api.setPlayerOption("networkState",2),this.api.emit("loadingchange",t.loadingShow);break
;case"slrMuteChanged":this.api.setPlayerOption("",{muted:!!t.muted,volume:t.volume}),this.api.emit("mutedchange",!!t.muted);break;case"slrSystemVolumeChanged":this.api.setPlayerOption("volume",t.volume),this.api.emit("volumechange",t.volume);break;case"slrPlayerProgressChanged":this.api.setPlayerOption("",{currentTime:t.currentTime,duration:t.duration}),this.api.emit("timeupdate",t.currentTime);break;case"slrRateChanged":this.api.setPlayerOption("playbackRate",t.newRate),
this.api.emit("ratechange",t.newRate);break;case"slrEnterFullScreen":this.api.setPlayerOption("fullscreen",!0),!!t.needResetPlayerFrame&&this.iosResetFrame(!0,+t.direction,t.statusbarHeight),this.api.emit("enterfullscreen",t);break;case"slrExitFullScreen":this.api.setPlayerOption("fullscreen",!1),!!t.needResetPlayerFrame&&this.iosResetFrame(!1),this.api.emit("exitfullscreen",t);break;case"slrCacheLoadedTimeChanged":this.api.emit("cachetimechange",t);break;case"slrCacheLoadFinished":
this.api.emit("cacheloadfinished",t);break;case"slrDidStartNextLoop":this.api.emit("startnextloop",t.hasPlayTimes);break;case"slrNetChanged":this.api.emit("netchange",t);break;case"slrHideControlEventCallback":this.api.emit("controlhiddenchange",t);break;case"slrPlayerMiniWindowEventChanged":this.suspenseEventDispatch(t.event)}}},{key:"iosPlayerStatusDispatch",value:function(e){var t="";switch(e.event){case"onStartPrepare":t="prepare",this.api.setPlayerOption("",{ended:!1,readyState:1});break
;case"onPrepared":t="canplay",this.api.setPlayerOption("readyState",4);break;case"onPlaySuccess":this.api.setPlayerController("playerKernelInit",!0),this.perflog.clk2play=+new Date-this.perf.clk,this.iosUpdatePlayerStatus(),this.isEmitPerf&&this.emitPerfEvent();case"onReplay":this.api.setPlayerOption("ended",!1);case"onResumePlay":this.api.emit("play"),this.api.setPlayerOption("paused",!1),t="playing";break;case"onPaused":t="pause",this.api.setPlayerOption("paused",!0);break;case"onFinished":
t="ended",this.api.setPlayerOption("ended",!0);break;case"onClosed":t="closed";break;case"onError":t="error",this.api.setPlayerOption("error",e)}t&&this.api.emit(t)}},{key:"iosResetFrame",value:function(e,t,i){var n=this.api.getRoot(),a=this.api.getPlayerController("fullscreenEvt");if(e){var r=this.api.getPlayerOption(),o=r.width,s=r.height;this.width=o,this.height=s;var l=0===t?screen.width:screen.height,u=0===t?screen.height:screen.width
;n.style="position:fixed; left:0;top:-"+i+"px;z-index:1000;width:"+l+"px;height:"+u+"px;",n.addEventListener("touchstart",a,!1),this.resetRect(l,u)}else n.style="",n.removeEventListener("touchstart",a,!1),this.resetRect(this.width,this.height)}},{key:"suspenseEventDispatch",value:function(e){var t="";switch(e){case"onDidEnterSuspense":case"enterFloatingScreen":t="entersuspense";break;case"onDidExitSuspense":case"exitFloatingScreen":t="exitsuspense";break;case"onDidCloseSuspense":
case"closeFloatingScreen":t="closesuspense";break;case"onDidTapSuspense":case"onFloatingClick":t="suspenseclick";break;case"onDidEnterPip":t="enterpip";break;case"onDidClosePip":t="closepip";break;case"onTapPipRestoreBtn":t="pipclick";break;case"onStartPipFailed":t="pipfail"}t&&this.api.emit(t)}},{key:"androidCreateVideo",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.api.setMode("na"),this.androidNaEvent().then(function(){e.createVideoTag({
"t7-video-player-type":"h5samelayer","t7-video-player-ext":t}),e.androidInitPlayer()}),this.naBackRecovery()}},{key:"androidInitPlayer",value:function(){var e=this,t=this.api.getVideoInstance(),i=this.api.getPlayerOption(),n=this.api.getBoxTools(),a=n.version,r=n.versionCompare,o={},s=["from","page"];r(a,"13.6")<0&&s.push("value"),s.forEach(function(e){i.hasOwnProperty(e)&&(o[e]=i[e])});var u=["mpd","clarityUrl","from","page"].concat(i.passThrough||[]),p={videoUrl:i.src};u.forEach(function(e){
i[e]&&(p[e]=i[e])}),p.mpd&&p.clarityUrl&&delete p.clarityUrl;var c={vid:i.vid,ignore4gToast:+!!i.ignore4gToast,syncProgress:+!!i.needReadLocalProgress,getSysVolume:+(!i.hasOwnProperty("volume")||i.muted)},h=l(l({},o),{},{extLog:l({prepareInvokePlayerTime:this.perf.clk},i.ext||{})});r(a,"13.6")>=0?(h.ext_log=h.extLog,delete h.extLog,h.ext_log.value=i.value||"",p=l(l({},p),h)):c.samelrLog=h,c.videoInfo=p,t.zeusVideoExt=JSON.stringify({id:this.cid,name:"h5samelayer",action:"init",data:c})
;var d=this.api.getPlayerInstance(),y=function n(){e.perflog.create=+new Date-e.perf.createStart,i.hasOwnProperty("volume")&&i.volume>=0&&(d.volume=i.volume),!i.useAutoVolume&&(d.muted=!!i.muted),i.hasOwnProperty("seekSeconds")&&(d.currentTime=i.seekSeconds),t.removeEventListener("loadedmetadata",n)};t.addEventListener("loadedmetadata",y),this.api.emit("ready",{mode:"na",isIOS:this.isIOS,isAndroid:this.isAndroid})}},{key:"androidNaEvent",value:function(){
var e=this,t=this.api.getBoxTools(),i=t.invokeP,n=t.getGlobalFunc,a=n(function(t,i){if("com.baidu.videoplayer.operationresult"===t&&e.api.getVideoInstance()){try{i=JSON.parse(i)}catch(e){}if(0===i.status){var n=e.api.getPlayerOption("containerId"),a=e.api.getVideoInstance(),r=e.api.getPlayerInstance();switch(i.action){case"init":break;case"volumeChanged":if(r.volume===i.data.volume&&!e.api.getPlayerOption("useAutoVolume"))return;if(e.api.setPlayerOption("volume",i.data.volume),
a.volume!==i.data.volume&&(r.volume=i.data.volume),e.api.emit("volumechange",i.data.volume),!e.api.getPlayerController("playerKernelInit"))return;0!==i.data.volume||r.muted||(r.muted=!0),i.data.volume>0&&r.muted&&(r.muted=!1);break;case"setMute":r.muted!==!!i.data.muted&&(e.api.setPlayerOption("muted",!!i.data.muted),e.api.emit("mutedchange",!!i.data.muted));break;case"getSysVolume":var o=1==+i.data.volume?+i.data.volume:+i.data.volume.toFixed(3);e.api.setPlayerOption("volume",o);break
;case"hasFloatingPlayer":var s=e.api.getPlayerController("androidIsExistSuspense");i.id===n&&s&&(s(!!i.data.value),e.api.setPlayerController("androidIsExistSuspense",null));break;default:i.id===n&&e.suspenseEventDispatch(i.action)}}}});return this.api.setPlayerController("operationjscallback",a),i("v5/datachannel/register",{action:"com.baidu.videoplayer.operationresult",jscallback:a})}},{key:"videoEventDispatch",value:function(){
var e=this,t=this.api.getVideoInstance(),i="h5"===this.api.getMode(),n=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","waiting","webkitendfullscreen"];i&&n.push("volumechange");var a={};n.forEach(function(n){a[n]=function(a){var r=e.api.getPlayerController("playerKernelInit")
;i||r||"canplay"!==n||!e.api.getPlayerOption("autoplay")||(e.isEmitPerf=!0,t.play()),r||"play"!==n||(e.api.setPlayerController("playerKernelInit",!0),e.perflog.clk2play=+new Date-e.perf.clk,e.isEmitPerf&&e.emitPerfEvent()),e.api.emit(n,a)},t.addEventListener(n,a[n])}),this.api.setPlayerController("videoEventHandler",a);var r={};["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"].forEach(function(i){r[i]=function(){
var i=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;i&&i===t?(e.api.setPlayerOption("fullscreen",!0),e.api.emit("enterfullscreen")):e.api.getPlayerOption("fullscreen")&&(e.api.setPlayerOption("fullscreen",!1),e.api.emit("exitfullscreen"))},document.addEventListener(i,r[i])}),this.api.setPlayerController("docEventHandler",r)}},{key:"createVideoTag",value:function(){
var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.api.getRoot(),i=this.api.getPlayerOption(),n=document.createElement("video"),a=i.width?i.width+"px":"100%",r=i.height?i.height+"px":"100%";n.style="width:"+a+"; height: "+r+";"+(2===i.videoGravity?"object-fit: cover;":""),Object.keys(e).forEach(function(t){return n.setAttribute(t,e[t])}),t.appendChild(n);var o=["controls","loop","mediaGroup","playbackRate","preload","src","poster","volume"]
;return"h5"===this.api.getMode()&&(o=o.concat(["muted","autoplay"])),Object.keys(i).filter(function(e){return o.indexOf(e)>-1}).forEach(function(e){try{n[e]=i[e]}catch(e){}}),this.api.setPlayerOption("containerId",this.cid),this.api.setVideoInstance(n),this.videoEventDispatch(),n}},{key:"emitPerfEvent",value:function(){var e=this.perf,t=e.clk,i=e.queryStart,n=e.createStart;this.perflog.clk2create=n-t,i&&(this.perflog.clk2query=i-t),this.api.emit("perf",this.perflog),this.perflog={},
this.isEmitPerf=!1}},{key:"resetRect",value:function(e,t){var i=this.api.getBoxTools(),n=i.isIOS,a=i.invokeP,r=this.api.getVideoInstance(),o=this.api.getPlayerOption(),s=o.containerId,l=o.videoGravity;if("na"===this.api.getMode()&&n()){var u=x(t),p=u.wrap,c=u.inner,h=r.firstChild;r.style.width=e+"px",r.style.height=p+"px",h.style.height=c+"px",a("video/slrUpdatePlayerInfo",{params:{containerId:s,position:{left:0,top:0,width:e,height:t}}})}else{var d=e?e+"px":"100%",y=t?t+"px":"100%"
;r.style="width:"+d+"; height: "+y+";"+(2===l?"object-fit: cover;":"")}}},{key:"reset",value:function(e){var t=this.api.getVideoInstance();if(t){e.hasOwnProperty("volume")||this.api.setPlayerOption("volume",-1);var i=this.api.getPlayerOption(),n=this.api.getMode();if((e.width||e.height)&&(this.resetRect(i.width,i.height),e.width&&delete e.width,e.height&&delete e.height),!(0===Object.keys(e).length||"h5"===n&&this.api.getPlayerController("slrOnly"))){if(this.perf.createStart=+new Date,
this.perf.clk=e.prepareInvokePlayerTime||this.perf.createStart,this.api.setPlayerController("playerKernelInit",!1),"na"===n&&this.isIOS)return this.perf.queryStart=this.perf.createStart,void this.iosInvokePlayer("video/slrSetPlayerInfo");var a=["controls","loop","mediaGroup","playbackRate","preload","src","poster","volume"];if("h5"===n&&(a=a.concat(["muted","autoplay"])),Object.keys(i).filter(function(e){return a.indexOf(e)>-1}).forEach(function(e){try{t[e]=i[e]}catch(e){}}),
"h5"===n)return void this.api.emit("ready",{mode:"h5",isIOS:this.isIOS,isAndroid:this.isAndroid});this.isAndroid&&(t.setAttribute("t7-video-player-ext",i.pageUrl||""),this.androidInitPlayer())}}}},{key:"h5Run",value:function(){if(this.api.setMode("h5"),this.removeDom(),this.api.getPlayerController("slrOnly"))return this.api.emit("ready",{mode:"h5",isIOS:this.isIOS,isAndroid:this.isAndroid}),void this.emitPerfEvent();this.isEmitPerf=!!this.api.getPlayerOption("autoplay"),this.createVideoTag({
playsinline:!0,"webkit-playsinline":!0}),this.api.emit("ready",{mode:"h5",isIOS:this.isIOS,isAndroid:this.isAndroid})}}]),e}(),E=function(){function e(t,n){i(this,e),this.api=t,this.pluginOptions=n}return a(e,[{key:"get",value:function(){var e=this.api.getBoxTools().isIOS;if("na"===this.api.getMode()&&e())return this.api.getPlayerOption("ended");var t=this.api.getVideoInstance();return t?t.ended:""}}]),e}(),T=function(){function e(t,n){i(this,e),this.api=t,this.pluginOptions=n}return a(e,[{
key:"run",value:function(){if("na"===this.api.getMode())return this.naRun();this.h5Run()}},{key:"h5Run",value:function(){var e=this.api.getVideoInstance();return e&&"function"==typeof e.pause&&e.pause()}},{key:"naRun",value:function(){var e=this.api.getBoxTools(),t=e.isIOS,i=e.isAndroid,n=e.invokeP;t()?n("video/slrPausePlayer",{params:{containerId:this.api.getPlayerOption("containerId")}}):i()&&this.h5Run()}}]),e}(),R=function(){function e(t,n){i(this,e),this.api=t,this.pluginOptions=n}
return a(e,[{key:"get",value:function(){var e=this.api.getBoxTools().isIOS;if("na"===this.api.getMode()&&e())return this.api.getPlayerOption("currentTime");var t=this.api.getVideoInstance();return t?t.currentTime:""}},{key:"set",value:function(e){var t=this.api.getBoxTools(),i=t.isIOS,n=t.invokeP;if("na"===this.api.getMode()&&i()){var a=this.api.getPlayerOption();return void n("video/slrSeekPlayer",{params:{containerId:a.containerId,seconds:e,accurate:a.accurate}})}
var r=this.api.getVideoInstance();r&&(r.currentTime=e)}}]),e}(),_=function(){function e(t,n){i(this,e),this.api=t,this.pluginOptions=n}return a(e,[{key:"get",value:function(){var e=this.api.getBoxTools().isIOS;if("na"===this.api.getMode()&&e())return this.api.getPlayerOption("loop");var t=this.api.getVideoInstance();return t?t.loop:""}},{key:"set",value:function(e){var t=this,i=this.api.getBoxTools(),n=i.isIOS,a=i.invokeP;if("na"===this.api.getMode()&&n())return void a("video/slrSetLoop",{
params:{containerId:this.api.getPlayerOption("containerId"),loop:+e}}).then(function(){return t.api.setPlayerOption("loop",e)});var r=this.api.getVideoInstance();r&&(r.loop=e),this.api.setPlayerOption("loop",e)}}]),e}(),V=function(){function e(t,n){i(this,e),this.api=t,this.pluginOptions=n}return a(e,[{key:"get",value:function(){var e=this.api.getBoxTools().isIOS;if("na"===this.api.getMode()&&e())return this.api.getPlayerOption("paused");var t=this.api.getVideoInstance();return t?t.paused:""}
}]),e}(),M=function(){function e(t,n){i(this,e),this.api=t,this.pluginOptions=n}return a(e,[{key:"get",value:function(){var e=this.api.getBoxTools().isIOS;if("na"===this.api.getMode()&&e())return this.api.getPlayerOption("poster");var t=this.api.getVideoInstance();return t?t.poster:""}}]),e}(),B=function(){function e(t,n){i(this,e),this.api=t,this.pluginOptions=n}return a(e,[{key:"get",value:function(){var e=this.api.getBoxTools().isIOS
;if("na"===this.api.getMode()&&e())return this.api.getPlayerOption("readyState");var t=this.api.getVideoInstance();return t?t.readyState:""}}]),e}(),j=function(){function e(t,n){i(this,e),this.api=t,this.pluginOptions=n}return a(e,[{key:"get",value:function(){var e=this.api.getBoxTools().isIOS;if("na"===this.api.getMode()&&e())return this.api.getPlayerOption("networkState");var t=this.api.getVideoInstance();return t?t.networkState:""}}]),e}(),F=function(){function e(t,n){i(this,e),this.api=t,
this.pluginOptions=n}return a(e,[{key:"run",value:function(){if("na"===this.api.getMode())return this.naRun();this.h5Run()}},{key:"naRun",value:function(){var e=this.api.getBoxTools(),t=e.isIOS,i=e.invokeP,n=this.api.getPlayerOption("containerId");t()&&i("video/slrReplayPlayer",{params:{containerId:n}}),this.h5Run()}},{key:"h5Run",value:function(){var e=this.api.getVideoInstance();e&&(e.currentTime=0,(e.paused||e.ended)&&e.play())}}]),e}(),D=function(){function e(t,n){i(this,e),this.api=t,
this.pluginOptions=n}return a(e,[{key:"run",value:function(){"na"===this.api.getMode()&&this.naRun()}},{key:"naRun",value:function(){var e=this.api.getBoxTools(),t=e.isIOS,i=e.isAndroid,n=e.invokeP,a=this.api.getPlayerOption("containerId");if(t())n("video/slrEnterSuspensePlayer",{params:{containerId:a}});else if(i()){var r=this.api.getVideoInstance();r.zeusVideoExt=JSON.stringify({id:a,name:"h5samelayer",action:"enterFloatingScreen"})}}}]),e}(),A=function(){function e(t,n){i(this,e),this.api=t,
this.pluginOptions=n}return a(e,[{key:"get",value:function(){return!!this.api.getPlayerOption("fullscreen")}}]),e}(),L=function(){function e(t,n){i(this,e),this.api=t,this.pluginOptions=n}return a(e,[{key:"run",value:function(){"na"===this.api.getMode()&&this.naRun()}},{key:"naRun",value:function(){var e=this.api.getBoxTools(),t=e.isIOS,i=e.isAndroid,n=e.invokeP,a=this.api.getPlayerOption("containerId");if(t())n("video/slrCloseSuspensePlayer",{params:{containerId:a}});else if(i()){
var r=this.api.getVideoInstance();r.zeusVideoExt=JSON.stringify({id:a,name:"h5samelayer",action:"closeFloatingScreen"})}}}]),e}(),N=function(){function e(t,n){i(this,e),this.api=t,this.pluginOptions=n}return a(e,[{key:"get",value:function(){return this.api.getPlayerOption("timeInterval")}},{key:"set",value:function(e){var t=this,i=this.api.getBoxTools(),n=i.isIOS,a=i.invokeP;if("na"===this.api.getMode()&&n())return void a("video/slrSetVideoProgressTimeInterval",{params:{
containerId:this.api.getPlayerOption("containerId"),timeInterval:e}}).then(function(){return t.api.setPlayerOption("timeInterval",e)})}}]),e}(),q=function(){function e(t,n){i(this,e),this.api=t,this.pluginOptions=n}return a(e,[{key:"get",value:function(){return!!this.api.getPlayerOption("isIgnoreDeviceOrientation")}},{key:"set",value:function(e){var t=this.api.getBoxTools(),i=t.isIOS,n=t.invokeP;if("na"===this.api.getMode()&&i()){
var a=this.api.getPlayerOption("containerId"),r=this.api.getPlayerOption("fullScreenType");this.api.setPlayerOption("isIgnoreDeviceOrientation",e),n("video/slrSetIgnoreDeviceOrientation",{params:{containerId:a,isIgnoreDeviceOrientation:+e,fullScreenType:r}})}}}]),e}(),H=function(){function e(t,n){i(this,e),this.api=t,this.pluginOptions=n}return a(e,[{key:"run",value:function(e){if("na"===this.api.getMode())return this.naRun(e);this.h5Run(e)}},{key:"naRun",value:function(e){
var t=void 0===e?this.api.getPlayerOption("direction"):e;this.api.setPlayerOption("direction",t);var i=this.api.getBoxTools(),n=i.isIOS,a=i.isAndroid,r=i.invokeP;if(n()){var o=this.api.getPlayerOption(),s=o.playerControlType,l=o.fullScreenType,u=o.containerId;2===s&&(l="windowFullScreen"),r("windowFullScreen"===l?"video/slrEnterFullWindowScreen":"video/slrEnterFullCustomScreen",{params:{containerId:u,direction:t}})}else a()&&this.h5Run()}},{key:"h5Run",value:function(e){
var t=this.api.getVideoInstance(),i=this.api.getRoot(),n=i.requestFullscreen||i.webkitRequestFullScreen||i.mozRequestFullScreen||i.msRequestFullscreen;n?n.call(i):t.webkitSupportsFullscreen&&t.webkitEnterFullscreen()}}]),e}(),z=function(){function e(t,n){i(this,e),this.api=t,this.pluginOptions=n}return a(e,[{key:"run",value:function(){"na"===this.api.getMode()&&this.naRun()}},{key:"naRun",value:function(){
var e=this.api.getBoxTools(),t=e.isIOS,i=e.isAndroid,n=e.invokeP,a=this.api.getPlayerOption("containerId");if(t())n("video/slrExitSuspensePlayer",{params:{containerId:a}});else if(i()){var r=this.api.getVideoInstance();r.zeusVideoExt=JSON.stringify({id:a,name:"h5samelayer",action:"exitFloatingScreen"})}}}]),e}(),U=function(){function e(t,n){i(this,e),this.api=t,this.pluginOptions=n}return a(e,[{key:"run",value:function(){if("na"===this.api.getMode())return this.naRun();this.h5Run()}},{
key:"naRun",value:function(){var e=this.api.getBoxTools(),t=e.isIOS,i=e.isAndroid,n=e.invokeP;if(t()){var a=this.api.getPlayerOption(),r=a.fullScreenType,o=a.containerId;n("windowFullScreen"===r?"video/slrExitFullWindowScreen":"video/slrExitFullCustomScreen",{params:{containerId:o}})}else i()&&this.h5Run()}},{key:"h5Run",value:function(){(document.exitFullScreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen).call(document)}}]),e}(),J=function(){
function e(t,n){i(this,e),this.api=t,this.pluginOptions=n}return a(e,[{key:"get",value:function(){var e=this,t=this.api.getBoxTools(),i=t.isIOS,n=t.isAndroid,a=t.invokeP;if("na"===this.api.getMode()){var r=this.api.getPlayerOption("containerId");if(i())return new Promise(function(t){a("video/slrIsexistSuspensePlayer",{params:{containerId:r}}).then(function(i){e.api.setPlayerOption("suspenseType",i.type),t(!!i.exist)})});if(n())return this.api.getVideoInstance().zeusVideoExt=JSON.stringify({id:r,
name:"h5samelayer",action:"hasFloatingPlayer"}),new Promise(function(t){e.api.setPlayerController("androidIsExistSuspense",t)})}}}]),e}(),K=function(){function e(t,n){i(this,e),this.api=t,this.pluginOptions=n}return a(e,[{key:"run",value:function(){"na"===this.api.getMode()&&this.naRun()}},{key:"naRun",value:function(){var e=this.api.getBoxTools(),t=e.isIOS,i=e.invokeP;t()&&i("video/slrCloseSystemSuspensePlayer",{params:{containerId:this.api.getPlayerOption("containerId")}})}}]),e
}(),G=function(){function e(t,n){i(this,e),this.api=t,this.pluginOptions=n}return a(e,[{key:"run",value:function(){var e=this.api.getBoxTools(),t=e.isIOS,i=e.invokeP;"na"===this.api.getMode()&&t()&&i("video/slrEnterSystemSuspensePlayer",{params:{containerId:this.api.getPlayerOption("containerId")}})}}]),e}(),Q=function(){function e(t,n){i(this,e),this.api=t,this.pluginOptions=n}return a(e,[{key:"get",value:function(){var e=this.api.getBoxTools().isIOS
;return"na"===this.api.getMode()&&e()?this.api.getPlayerOption("fullScreenType"):""}},{key:"set",value:function(e){this.api.setPlayerOption("fullScreenType",e)}}]),e}(),W=function(){function e(t,n){i(this,e),this.api=t,this.pluginOptions=n}return a(e,[{key:"get",value:function(){var e=this.api.getBoxTools().isIOS;return"na"===this.api.getMode()&&e()?this.api.getPlayerOption("suspenseType"):""}}]),e}(),X={autoplay:m,paused:V,currentTime:R,duration:I,ended:E,loop:_,muted:P,networkState:j,
playbackRate:S,readyState:B,src:w,poster:M,volume:k,error:b,fullscreen:A,timeInterval:N,isExistSuspense:J,fullScreenType:Q,isIgnoreDeviceOrientation:q,suspenseType:W,create:C,play:O,replay:F,enterFullscreen:H,exitFullscreen:U,enterSuspense:D,exitSuspense:z,closeSuspense:L,enterSystemSuspense:G,closeSystemSuspense:K,pause:T},Y="object"===("undefined"==typeof window?"undefined":t(window))&&window.self===window?navigator.userAgent:"",Z=function(){return/(iPhone|iPod|iPad)/.test(Y)},$=function(){
return/(Android);?[\s\/]+([\d.]+)?/.test(Y)},ee=function(){return/ (baiduboxapp|biduboxapp)\//i.test(Y)&&!/ (lite|info|pro|mission) (baiduboxapp|biduboxapp)/.test(Y)},te=function(e){var t=document.createElement("iframe"),i=document.body||document.getElementsByTagName("body")[0];t.style.display="none",t.src=e,i.appendChild(t),setTimeout(function(){i.removeChild(t),t=null},0)},ie=function(e){var t=window.Bdbox_android_jsbridge;if(!t||!t.dispatch)return window.prompt("BdboxApp:"+JSON.stringify({
obj:"Bdbox_android_jsbridge",func:"dispatch",args:[e]}));t.dispatch(e)},ne=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},ae=0,re=function(e){return ae++,e+(Date.now().toString(16)+ae).slice(-8)},oe="object"===("undefined"==typeof window?"undefined":t(window))?window:global,se=function(e){if("function"==typeof e){var t="_xfunc_".concat(re("_xfunc_"));return oe[t]=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n]
;return e.apply(oe,i)},t}return e},le=function(e){if("string"===ne(e))return e;var t={};for(var i in e){var n=e[i];"function"===ne(n)&&(n=se(n)),t[i]=n}return encodeURIComponent(JSON.stringify(t))},ue=function(e){var t=[];for(var i in e){var n=e[i];"function"===ne(n)&&(n=se(n)),t.push(i+"="+n)}return t.join("&")},pe=function(e,t){t+="",e+="";for(var i=e.split("."),n=t.split("."),a=0,r=Math.max(i.length,n.length);a<r;a++){
if(i[a]&&!n[a]&&parseInt(i[a],10)>0||parseInt(i[a],10)>parseInt(n[a],10))return 1;if(n[a]&&!i[a]&&parseInt(n[a],10)>0||parseInt(i[a],10)<parseInt(n[a],10))return-1}return 0},ce=function(){var e="0";if("object"===("undefined"==typeof window?"undefined":t(window))&&window.baiduboxapp_version)return window.baiduboxapp_version;if(ee()){var i;(i=/baiduboxapp\/([\d.]+)/.exec(Y))?e=i[1]:(i=/([\d+.]+)_(?:diordna|enohpi)_/.exec(Y))&&(i=i[1].split("."),e=i.reverse().join("."))}return e}(),he=function(){
function e(t,n){i(this,e),this._player=n,this.id=t}return a(e,[{key:"getPlayerInstance",value:function(){return this._player}},{key:"getVideoInstance",value:function(){return this._player.video}},{key:"setVideoInstance",value:function(e){this._player.video=e}},{key:"getRoot",value:function(){return this._player._root}},{key:"getMode",value:function(){return this._player._mode}},{key:"setMode",value:function(e){this._player._mode=e}},{key:"getPlayerOption",value:function(e){
return e?this._player.options[e]:this._player.options}},{key:"setPlayerOption",value:function(e,t){e?this._player.options[e]=t:"object"===ne(t)&&o(this._player.options,t)}},{key:"getPlayerController",value:function(e){return e?this._player._controller[e]:this._player._controller}},{key:"setPlayerController",value:function(e,t){this._player._controller[e]=t}},{key:"getBoxTools",value:function(){return{isIOS:Z,isAndroid:$,isMainBox:ee,iosInvoke:te,androidInvoke:ie,getGlobalFunc:se,
getRandomName:re,invokeP:v,versionCompare:pe,version:ce}}},{key:"on",value:function(e,t){this._player.on(e,t)}},{key:"once",value:function(e,t){this._player.once(e,t)}},{key:"emit",value:function(e,t){this._player.emit(e,t)}},{key:"off",value:function(e,t){this._player.off(e,t)}}]),e}(),de=function(e){function t(e){var a;if(i(this,t),!e||"object"!==ne(e)||0===Object.keys(e).length||!e.id)throw new Error("player config error");return a=n.call(this),a._defaultInit=!e.customizedInit,a.options={
autoplay:!1,muted:!1,loop:!1},a.reset(e),a._controller={},a._mode=e.mode||"h5",e.plugins&&a.registryPlugins(e.plugins),a._root=document.getElementById(e.id),a.video=null,a._plugins=X||{},a._inited=!1,a._defaultInit&&a.init(),a}u(t,e);var n=f(t);return a(t,[{key:"reset",value:function(e){var t=this;Object.keys(e).forEach(function(i){"pluginOptions"!==i&&(t.options[i]=e[i])}),this.pluginOptions=e.pluginOptions||this.pluginOptions||{},this._inited&&this.emit("reset",e)}},{key:"_validate",
value:function(e){return 0!==e.indexOf("_")&&(-1===["on","once","emit","off","init","destroy","reset","registryPlugin","registryPlugins","isSupportCode"].indexOf(e)||this[e])}},{key:"registryPlugin",value:function(e,t){if(this._validate(e)){if(this._inited)return this._loadPlugin(e,t);this._plugins||(this._plugins={}),this._plugins[e]=t}}},{key:"registryPlugins",value:function(){
var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"h5";this._mode=i,Object.keys(t).forEach(function(i){return e.registryPlugin(i,t[i])})}},{key:"_loadPlugin",value:function(e,t){var i=new he(e,this),n=new t(i,this.pluginOptions[e]);this._defineProp(e,n)}},{key:"_defineProp",value:function(e,t){var i={};"function"===ne(t.get)?(i.get=t.get.bind(t),
"function"===ne(t.set)&&(i.set=t.set.bind(t))):"function"===ne(t.run)&&(i={get:function(){return t.run.bind(t)}}),Object.defineProperty(this,e,i)}},{key:"init",value:function(){var e=this;this._inited||(this._inited=!0,Object.keys(this._plugins).forEach(function(t){var i=e._plugins[t];e._loadPlugin(t,i)}),this.emit("init"))}},{key:"destroy",value:function(){this._root&&(this.emit("destroy"),this.removeAllListeners(),this._root=null)}}]),t}(g),ye=function(e){if(ee()&&pe(ce,"12.6")>=0){
var t=Z()?"video/slrPrefetchVideo":$()?"videoplayer/slrPrefetchVideo":"";t&&v(t,{params:{prefetchInfo:e}})}},fe=ye;e.default=de,e.prefetch=fe,Object.defineProperty(e,"__esModule",{value:!0})}),define("@baidu/xbox-player",["@baidu/xbox-player/dist/player.amd"],function(e){return e});