<!DOCTYPE html>
<!-- saved from url=(0031)https://tttang.com/archive/820/ -->
<html lang="en" data-redeviation-bs-uid="8qy3v77gmas"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="跳跳糖 - 安全与分享社区">
    <meta name="keywords" content="跳跳糖,安全社区,社区,信息安全,web安全,黑客">
    <title>CTF主办方指南之对抗搅屎棍 - 跳跳糖</title>

    <link rel="shortcut icon" type="image/x-icon" href="https://storage.tttang.com/static/images/icon.png">
    <link rel="stylesheet" href="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
    <link rel="stylesheet" href="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/material-design-iconic-font.min.css">
    <link href="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/bootstrap.css" rel="stylesheet">
    <link href="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/core.css" rel="stylesheet">
    <link id="override-css-id" href="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/theme-indigo.min.css" rel="stylesheet">
    
  <link rel="stylesheet" href="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/magnific-popup.css">


    <link rel="stylesheet" href="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/app.css">

    <meta name="csrfmiddlewaretoken" content="hdRDvEdgLM2GTdKGnyIcchVY7QjvI2euxZKSS20Ln0v2COqJH9FzVGbSQe0HkHLi">

<style class="redeviation-bs-style" data-name="content">/*! (c) Philipp Koenig under GPL-3.0 */
body>div#redeviation-bs-indicator>div{opacity:0;pointer-events:none}body>#redeviation-bs-overlay.redeviation-bs-visible,body>#redeviation-bs-sidebar.redeviation-bs-visible{opacity:1;pointer-events:auto}body.redeviation-bs-noscroll{overflow:hidden !important}body>div#redeviation-bs-indicator>div{position:absolute;transform:translate3d(-40px, 0, 0);top:0;left:0;width:40px !important;height:100%;background:rgba(0,0,0,0.5);border-radius:0 10px 10px 0;transition:opacity .3s,transform .3s;z-index:2}body>div#redeviation-bs-indicator>div>span{-webkit-mask:no-repeat center/32px;-webkit-mask-image:url(chrome-extension://jdbnofccmhefkmjbkkdkfiicjkgofkdh/img/icon-bookmark.svg);background-color:#ffffff;position:absolute;display:block;top:0;left:0;width:100%;height:100%}body>div#redeviation-bs-indicator[data-pos=right]{left:auto;right:0}body>div#redeviation-bs-indicator[data-pos=right]>div{transform:translate3d(40px, 0, 0);left:auto;right:0;border-radius:10px 0 0 10px}body>div#redeviation-bs-indicator.redeviation-bs-fullHeight>div{border-radius:0}body>div#redeviation-bs-indicator.redeviation-bs-hover>div{transform:translate3d(0, 0, 0);opacity:1}body>div#redeviation-bs-indicator[data-pos=left].redeviation-bs-has-lsb{height:100% !important;top:0 !important}body>div#redeviation-bs-indicator[data-pos=left].redeviation-bs-has-lsb>div{background:rgba(0,0,0,0)}body>div#redeviation-bs-indicator[data-pos=left].redeviation-bs-has-lsb>div>span{-webkit-mask-position-y:20px}body>#redeviation-bs-sidebar{width:350px;max-width:none;height:0;z-index:2147483646;background-color:rgba(255,255,255,0.8) !important;color-scheme:auto !important;speak:none;border:none;display:block !important;transform:translate3d(-350px, 0, 0);transition:width 0s .3s,height 0s .3s,opacity .3s,transform .3s}body>#redeviation-bs-sidebar[data-pos=right]{left:auto;right:0;transform:translate3d(350px, 0, 0)}body>#redeviation-bs-sidebar.redeviation-bs-visible{width:calc(100% + 350px);height:100%;transform:translate3d(0, 0, 0);transition:opacity .3s,transform .3s}body>#redeviation-bs-sidebar.sidepanel{width:100% !important}body>#redeviation-bs-sidebar.redeviation-bs-hideMask{background:none !important}body>#redeviation-bs-sidebar.redeviation-bs-hideMask:not(.redeviation-bs-hover){width:calc(350px + 50px)}body>#redeviation-bs-overlay{width:100%;max-width:none;height:100%;z-index:2147483647;border:none;speak:none;background:rgba(0,0,0,0.5) !important;color-scheme:auto !important;transition:opacity .3s}</style></head>

<body id="body" data-theme="indigo" class="indigo">

<div class="container-fluid p-0">
  <header class="main-header">
    <div class="tt-toolbar">
        <div class="sidebar-mobile-menu">
          <a class="logo" href="https://tttang.com/">
              <img src="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/logo.png" alt="logo" class="logo-img"> 跳跳糖
          </a>
        </div>

        <div class="search-bar right-side-icon bg-transparent d-none d-sm-block">
          <form method="get" action="https://tttang.com/">
            <div class="form-group">
                <input class="form-control border-0" name="keyword" placeholder="搜索文章..." type="search">
                <button class="search-icon"><i class="zmdi zmdi-search zmdi-hc-lg"></i></button>
            </div>
          </form>
        </div>

        <ul class="quick-menu header-notifications ml-auto">

            <li class="nav-searchbox dropdown d-inline-block d-sm-none">
                <a href="https://tttang.com/archive/820/#" data-toggle="dropdown" aria-haspopup="true" class="d-inline-block icon-btn" aria-expanded="false">
                    <i class="zmdi zmdi-search zmdi-hc-fw"></i>
                </a>
                <div aria-hidden="true" class="p-0 dropdown-menu dropdown-menu-right search-bar right-side-icon search-dropdown">
                    <div class="form-group">
                        <input class="form-control border-0" placeholder="" value="" type="search">
                        <button class="search-icon"><i class="zmdi zmdi-search zmdi-hc-lg"></i></button>
                    </div>
                </div>

            </li>

            
            <a href="https://tttang.com/auth/login/" class="gx-btn gx-btn-default gx-btn-label left gx-btn-sm ml-2 ml-xl-3 my-sm-0 mr-0">
              <i class="fa fa-user"></i>
              <span>登录</span>
            </a>
            

        </ul>
    </div>
</header>
</div>



<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-md-9 col-sm-12">
      
  
  
  
  <div class="gx-card product-details p-0 mb-4">
    <div class="card-content">
      <div class="pt-4 pl-4 pr-4 pb-0">
        <div class="row justify-content-between mr-0 ml-0">
          <div>
            <h2 class="mb-3">CTF主办方指南之对抗搅屎棍</h2>
          </div>
          
        </div>

        <div class="row justify-content-between mr-0 ml-0">
          <div class="price mb-3">
            <a href="https://tttang.com/user/phith0n" class="mr-1"><span class="h3 author">phith0n</span></a>
            <span class="time">2015-10-08 14:57:00</span>
          </div>
          <div class="pull-right p-0">
            
              <a href="https://tttang.com/sort/Development/" class="badge badge-light">安全开发</a>
            
              <a href="https://tttang.com/sort/ctf/" class="badge badge-light">CTF</a>
            
          </div>
        </div>
      </div>

      <hr class="mt-1">

      <article class="articles"><h1 id="toc_0x00"><a href="https://tttang.com/archive/820/#toc_0x00">0x00 背景</a></h1>
<hr>
<p>XDCTF2015是我觉得很给力的一次CTF，题目难度适中，也没出什么乱子，圆满结束了。</p>
<p>向来CTF是很容易出乱子的，有时候乱子来自于自身，比如某年的XDCTF因为学校机房停电导致初赛停顿了几个小时。当然，更多的乱子来自于“黑客”。因为CTF是安全相关的竞赛，自然会吸引很多安全研究者的目光。这里的“黑客”就是指通过各种手段让其他选手没法正常做题的人。</p>
<p>这样的选手一般自称“搅屎棍”~嘿。当然我没有谴责他们的意思，比赛就是和他人竞争的过程，通过各种手段阻止对手拿分我觉得也是一种能力。但是作为主办方，我们需要尽量让所有选手正常比赛，以保证一定的公平。所以我写这份文档，记录这次比赛我的处理方法。</p>
<h1 id="toc_0x01"><a href="https://tttang.com/archive/820/#toc_0x01">0x01 保证题目质量</a></h1>
<hr>
<p>这是一切防御手段的本源。</p>
<p>题目需要难度适中。如果太刁钻，容易让人放弃，并产生报复心理，放弃过后余下的时间就是给你捣蛋的时间。也不能太白痴，太白痴的题目被人分分钟秒了，余下的时间也是用来捣蛋的。</p>
<p>感觉题目难度要让人有这种感觉：这题我会，应该这样做，但好像有个坑，我想想怎么绕过……在一段时间的辛苦后，把题目做出来；或者题目在规定时间没有做出来，看了writeup后恍然大悟。</p>
<p>这样的题目，才会让大家有成就感、学到东西、感激主办方。这样下来，就能减少很多麻烦，一是大家不愿再给主办方添麻烦，二是做题很累也没工夫想别的。</p>
<h1 id="toc_0x02"><a href="https://tttang.com/archive/820/#toc_0x02">0x02 防御第一招——代码层</a></h1>
<hr>
<p>有些权限限制，在代码上防御就可以了。</p>
<p>比如这次的web2-100，是一个任意用户密码修改的漏洞。选手在挖掘出漏洞并成功修改前台管理员的密码后，登录进去就能看到flag。Flag是保存在用户文件中的，正常情况下xdsec-cms允许自己删除自己的文件。那么，如果第一个做出这个题目的同学拿到flag后，随手把文件一删，那就没有第二个了。</p>
<p>所以我在删除的代码中，加了个判断：</p>
<p><a href="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/c32e1f7a6fd35a2e0106ca7c7cd1dc4abd56fd6f.jpg" class="image"><img alt="" src="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/c32e1f7a6fd35a2e0106ca7c7cd1dc4abd56fd6f.jpg"></a></p>
<p>如果是管理员用户，就直接返回false，不允许其删除。增删改查四个操作，删、改都要加这个判断。当然，好事者可以写个脚本，增加999999个假文件，flag样式都类似，谁也不知道哪个是真flag，也很影响接下来的选手做题。所以严格来说，“增”的地方也需要加这个判断。</p>
<p>搅屎棍还有一个常用的手段，就是“暴力竞争法”。</p>
<p>比如某个题目需要两个步骤，第一步修改用户名为xxx，第二步触发二次注入获得注入结果。那么我写一个脚本，用50个线程不停去修改用户名为一个不相关的名字，这样其他用户就没法正常执行第二个步骤了。（第一个步骤刚完成又被别人改没了）这样的情况下，其他参赛者一般会认为是自己的操作方法错了，直接导致做题的方向偏离。即使参赛者发现是有人在搅屎，也只能去同样写一个脚本，用100个线程跑，才有可能继续做题。</p>
<p>我觉得这样的BUG在出题的时候就可以避免。就拿我举得这个例子来说，我们完全可以出一个多用户的环境，不同用户只能操作自己的用户名，这样就完全避免了上述问题。如果这一点做不到，那么我们就应该按照12306对付刷票产业的方法对付“竞争派搅屎棍”——使用验证码。这样将给竞争脚本的编写带来很大难度，一般也就可以避免这种问题了。</p>
<h1 id="toc_0x03"><a href="https://tttang.com/archive/820/#toc_0x03">0x03防御第二招——服务权限层</a></h1>
<hr>
<p>PWN暂时不说，WEB肯定会涉及一些系统服务：web服务、数据库服务、缓存服务等。其中，Web服务又涉及中间件权限和脚本权限。我这里以nginx+php为例，数据库以mysql为例。</p>
<p>在很多ctf初赛中，web题目因为都比较“小”，所以经常是一台服务器放多个web题目。这种情况下权限设置就极为重要。如果一个比赛因为权限没有设置好，导致选手用一个题目的任意文件读取漏洞，或者一个root注入+load_file直接读取到所有题目的源文件。结果好好一个ctf就瞬间变成代码审计比赛了。</p>
<p>所以沙盒环境是这类ctf必不可少的了，沙盒可以是近几年的docker，前几年的“虚拟主机”，或者只是简陋的open_basedir，有总比没有强。Linux沙盒具体怎么布置可以看我的文章：<a href="https://www.leavesongs.com/PENETRATION/nginx-safe-dir.html" target="_blank">https://www.leavesongs.com/PENETRATION/nginx-safe-dir.html</a>，我就不再赘述了。建议就是，一个题目放在一个独立的虚拟主机里。</p>
<p>在同一个题目中，服务权限设置也是极为重要。</p>
<p>比如一个题目是将flag藏在后台管理员密码位置，那么你可以用0x02里说的法方法，这样防范搅屎棍：</p>
<ol>
<li>管理员不能修改密码</li>
<li>不能删除管理员</li>
<li>不能增加管理员</li>
</ol>
<p>一旦有忘记的就悲剧了。那么，不妨从根本上解决这个问题：直接去除当前数据库用户对于管理员表的“增”、“删”、“改”权限。在mysql里就是类似GRANT select ON db.adminTO&nbsp;xxx@localhost，只给予select权限。当然，具体情况具体分析，可以制定出更细致的权限规划。</p>
<p>在pwn中，也有同样的问题。我们遇到了一个需要用户执行命令的题目，在选手成功完成执行命令的目标以后，顺手写了个循环kill，将pwn自己的服务杀掉了，导致其他队伍不能继续做题。这确实是个棘手的问题，因为pwn fork出的进程权限正常情况下是和pwn一样的，那么不管你再怎么给pwn降权，你也避免不了用户直接kill掉pwn进程。</p>
<p>我能想到的有这样三种解决方法：</p>
<ol>
<li>重命名或删掉kill、pkill、skill之类的可执行程序</li>
<li>将/usr/bin、/bin、/usr/local/bin等目录的other权限设置为0</li>
<li>使用selinux ，设置security context</li>
</ol>
<p>法1最简单，但可能考虑不周的，毕竟linux命令那么多。法2比较粗暴，可能导致正常的操作都执行不了。法3应该是最合适的，但配置起来也最麻烦。这个需要看个人能力与ctf的复杂程度、重要性。</p>
<h1 id="toc_0x04"><a href="https://tttang.com/archive/820/#toc_0x04">0x04防御第三招——文件权限层</a></h1>
<hr>
<p>如果ctf涉及到文件操作（读取、上传、删除、修改、重命名）的话，就得合理设置文件权限了。</p>
<p>首先，要先了解自己的题目对于文件的操作具体可以允许到怎样的程度：是读取、还是修改，是否允许getshell。这里有个劝告，CTF初赛鱼龙混扎，尽量不要允许选手getshell。Getshell以后，搅屎棍就有无数种方法让你的游戏没法继续进行。</p>
<p>但有时候，题目的考点就是文件上传漏洞，或者任意文件操作漏洞，不getshell怎么验证选手是否达到要求？我这里以此次的web2为例子：web2-400的最终目的是用户getshell，利用的是一个任意文件重命名漏洞，将正常文件重命名为.php后getshell。实际上我这题，最终要检测的是“选手是否成功将文件重命名成.php后缀”。</p>
<p>所以实际上是可以不允许选手真正getshell的，我的做法是：</p>
<ol>
<li>
<p>整站，只有指向index.php和th3r315adm1n.php两个文件的请求才会发送给fastcgi执行：</p>
<p><a href="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/d1cc53b1cb793ad6bff2cf39f040a93aaa284a44.jpg" class="image"><img alt="" src="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/d1cc53b1cb793ad6bff2cf39f040a93aaa284a44.jpg"></a></p>
<p>这样就有效的保证了任意其他php文件都无法执行，这一步主要是为了保证服务器的安全。</p>
</li>
<li>
<p>所有其他以.php为后缀的请求，如果该文件存在，我就认为用户成功getshell了。这时就将请求rewrite到flag文本文件里，用户得到flag：</p>
<p><a href="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/84488bbe854feb8ec0fd38af55aa211778401ef9.jpg" class="image"><img alt="" src="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/84488bbe854feb8ec0fd38af55aa211778401ef9.jpg"></a></p>
<p>因为我这个环境，原本整个web目录只有两个php文件，如果发现存在第三个php文件，那么就肯定是用户的webshell了。</p>
</li>
<li>
<p>所有请求为“flag-”开头，以“.txt”结尾的，全部返回403。这是为了防止有人直接猜到flag文件名：</p>
<p><a href="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/dfb3e4c61d21fb5fb11a9692e1a556f9ef5773d2.jpg" class="image"><img alt="" src="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/dfb3e4c61d21fb5fb11a9692e1a556f9ef5773d2.jpg"></a></p>
<p>这三步下来，就完成了一个“getshell”漏洞的配置，模拟了getshell的情况，却并不真正getshell。</p>
</li>
</ol>
<p>那么，一个文件操作造成的getshell，除了防止选手真正getshell，还需要防范什么？</p>
<p>当然是防范搅屎棍。搅屎棍有一千种方式可以让游戏玩不了：删除/覆盖/重命名正常文件、将正常文件mv走，甚至是“帮助”主办方修改flag，或者修改漏洞文件。对付起来也很简单，我将所有已存在的文件（正常文件）的权限全部改成755，所有者改成root：</p>
<p><a href="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/b93a3b879134148d0496f8e9c6e547e7b5227b26.jpg" class="image"><img alt="" src="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/b93a3b879134148d0496f8e9c6e547e7b5227b26.jpg"></a></p>
<p>这样即使有任意文件操作漏洞，也没权限修改正常文件了。</p>
<p>但大多数cms都会涉及缓存、上传目录、备份目录等等需要写的目录，如果也设置成不可写，cms就运行不了了。比如这次题目，后台有个静态文件下载功能，我不得不将css、js、img等目录的所有者设置为www，使静态目录可写。</p>
<p>熟悉linux权限的同学应该知道，一个文件是否允许被删除，是要看其所在目录的权限。如果我对他所在的目录有写权限，我就可以将其删掉，即使这个文件不属于我。所以，通过后台的删除功能，搅屎棍可以将网站静态文件“删光光”，直接影响后面的选手做题体验。</p>
<p>这种情况怎么办？Linux下的文件有一些“隐藏属性”，我们可以通过lsattr来查看，chattr来修改：</p>
<p><a href="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/c3f71859406c467236310c217ed35df117d07136.jpg" class="image"><img alt="" src="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/c3f71859406c467236310c217ed35df117d07136.jpg"></a></p>
<p>如上图，这是我配置的js目录文件的隐藏权限。</p>
<p>我将所有已存在的js文件全部加上了i标志（chattr +i *），i的意思就是，不允许对文件进行任何修改（包括删除）。</p>
<p>这时候我们可以试试rm：</p>
<p><a href="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/8c216f9e543b4b1039b1d6a596ee2a70d6d55b6e.jpg" class="image"><img alt="" src="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/8c216f9e543b4b1039b1d6a596ee2a70d6d55b6e.jpg"></a></p>
<p>如图，root用户也没法删除flag文件了。</p>
<p>这就有效地保证了网站文件的安全，搅屎棍没法破坏网站结构与正常功能。巧妙地利用这些系统自带的权限控制能力，就能有效地防范搅屎棍啦！</p>
<h1 id="toc_0x05"><a href="https://tttang.com/archive/820/#toc_0x05">0x05防御第四招——对抗报复社会型搅屎棍</a></h1>
<hr>
<p>这类搅屎棍就是真正的“坏人”了，损人不利己，是直接来捣蛋的。比如自己拿下了flag，然后就把flag通过官方QQ群、IRC等渠道告诉所有人，直接破坏游戏的可玩性与公平性。还有比赛的时候DDOS比赛服务器的人。（那是跟你有多大仇）对于这类人，我觉得也没什么好说，该封号的封号，该拉黑的拉黑，尽量让他无法接触参赛选手。同时，服务器的日志要多看看，异常状态可以及时发觉。推荐一个实时日志查看工具——ngxtop：</p>
<p><a href="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/f316fefc8f7c4c593886315632d3e18ecc777c17.jpg" class="image"><img alt="" src="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/f316fefc8f7c4c593886315632d3e18ecc777c17.jpg"></a></p>
<p>源码和使用方法可以github上搜。</p>
<p>如果主办方保持一个好的态度，对参赛选手有足够的尊重与耐心，一般是不会出现这类搅屎棍的。归根到底，CTF是一个玩耍与学习的活动，不管是主办方还是参赛者，都可以通过比赛学到很多东西。保持一个良好的心态处理问题，慢慢积累经验，收获都会大大的。</p>
<p>XDCTF2015的一些writeup和资料：</p>
<ul>
<li>选手writeup：<a href="http://t.cn/RyleXYm" target="_blank">http://t.cn/RyleXYm</a>&nbsp;密码: imwg</li>
<li>web2 writeup：<a href="https://github.com/phith0n/XDCTF2015" target="_blank">https://github.com/phith0n/XDCTF2015</a></li>
</ul></article>
    </div>
  </div>

  <div class="gx-card">
    <div class="gx-card-header d-flex mb-4">
      <div class="mr-auto"><h3 class="card-heading">评论</h3></div>
    </div>

    
      <div class="media media-list" id="comment-9203">
        <div class="bg-primary size-50 user-avatar border-0 mr-3">
                  <h3 class="m-0 text-white">J</h3>
              </div>
        <div class="media-body">
          <a href="https://tttang.com/user/just_joker"><span class="h3 author mr-1">just_joker</span></a>
          <span class="time">2015-10-08 16:03:00</span>
          <div class="pt-1">
            <p class="card-text font-14 autowrap">赞，。<br></p>
          </div>
        </div>
      </div>
    
      <div class="media media-list" id="comment-9202">
        <img class="user-avatar size-50 mr-3" src="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/509e4182-15cf-481d-bb8e-abc9a6a58ace.png">
        <div class="media-body">
          <a href="https://tttang.com/user/Knight"><span class="h3 author mr-1">Knight</span></a>
          <span class="time">2015-10-08 16:40:53</span>
          <div class="pt-1">
            <p class="card-text font-14 autowrap">XDCTF刚好是国庆，就没玩,看看writeup算了。<br></p>
          </div>
        </div>
      </div>
    
      <div class="media media-list" id="comment-9201">
        <div class="bg-primary size-50 user-avatar border-0 mr-3">
                  <h3 class="m-0 text-white">R</h3>
              </div>
        <div class="media-body">
          <a href="https://tttang.com/user/Rainism"><span class="h3 author mr-1">Rainism</span></a>
          <span class="time">2015-10-08 17:10:24</span>
          <div class="pt-1">
            <p class="card-text font-14 autowrap">真良心<br></p>
          </div>
        </div>
      </div>
    
      <div class="media media-list" id="comment-9200">
        <div class="bg-secondary size-50 user-avatar border-0 mr-3">
                  <h3 class="m-0 text-white">B</h3>
              </div>
        <div class="media-body">
          <a href="https://tttang.com/user/Blood_Zero"><span class="h3 author mr-1">Blood_Zero</span></a>
          <span class="time">2015-10-08 17:55:06</span>
          <div class="pt-1">
            <p class="card-text font-14 autowrap">P牛大赞，就是有点难，没有搞出来几道题！<br></p>
          </div>
        </div>
      </div>
    
      <div class="media media-list" id="comment-9199">
        <div class="bg-danger size-50 user-avatar border-0 mr-3">
                  <h3 class="m-0 text-white">X</h3>
              </div>
        <div class="media-body">
          <a href="https://tttang.com/user/xsser"><span class="h3 author mr-1">xsser</span></a>
          <span class="time">2015-10-08 19:55:47</span>
          <div class="pt-1">
            <p class="card-text font-14 autowrap">有意思<br></p>
          </div>
        </div>
      </div>
    
      <div class="media media-list" id="comment-9198">
        <div class="bg-info size-50 user-avatar border-0 mr-3">
                  <h3 class="m-0 text-white">W</h3>
              </div>
        <div class="media-body">
          <a href="https://tttang.com/user/winterFire"><span class="h3 author mr-1">winterFire</span></a>
          <span class="time">2015-10-09 00:45:44</span>
          <div class="pt-1">
            <p class="card-text font-14 autowrap">这个有意思哈哈哈<br></p>
          </div>
        </div>
      </div>
    
      <div class="media media-list" id="comment-9197">
        <div class="bg-primary size-50 user-avatar border-0 mr-3">
                  <h3 class="m-0 text-white">H</h3>
              </div>
        <div class="media-body">
          <a href="https://tttang.com/user/HackBraid"><span class="h3 author mr-1">HackBraid</span></a>
          <span class="time">2015-10-09 09:04:44</span>
          <div class="pt-1">
            <p class="card-text font-14 autowrap">辛苦，题目质量真的很高<br></p>
          </div>
        </div>
      </div>
    
      <div class="media media-list" id="comment-9196">
        <div class="bg-secondary size-50 user-avatar border-0 mr-3">
                  <h3 class="m-0 text-white">嘿</h3>
              </div>
        <div class="media-body">
          <a href="https://tttang.com/user/%E5%98%BFME"><span class="h3 author mr-1">嘿ME</span></a>
          <span class="time">2015-10-09 09:51:22</span>
          <div class="pt-1">
            <p class="card-text font-14 autowrap">可不可以这样啊，让每个队伍的flag都不一样。<br>队伍得到的flag为  加密算法(队伍名，flag)。<br></p>
          </div>
        </div>
      </div>
    
      <div class="media media-list" id="comment-9195">
        <div class="bg-secondary size-50 user-avatar border-0 mr-3">
                  <h3 class="m-0 text-white">Z</h3>
              </div>
        <div class="media-body">
          <a href="https://tttang.com/user/zhangfei"><span class="h3 author mr-1">zhangfei</span></a>
          <span class="time">2015-10-09 13:23:54</span>
          <div class="pt-1">
            <p class="card-text font-14 autowrap">方法不错，[email&nbsp;protected]/* &lt;![CDATA[ */!function(t,e,r,n,c,a,p){try{t=document.currentScript||function(){for(t=document.getElementsByTagName('script'),e=t.length;e--;)if(t[e].getAttribute('data-cfhash'))return t[e]}();if(t&amp;&amp;(c=t.previousSibling)){p=t.parentNode;if(a=c.getAttribute('data-cfemail')){for(e='',r='0x'+a.substr(0,2)|0,n=2;a.length-n;n+=2)e+='%'+('0'+('0x'+a.substr(n,2)^r).toString(16)).slice(-2);p.replaceChild(document.createTextNode(decodeURIComponent(e)),c)}p.removeChild(t)}}catch(u){}}()/* ]]&gt; */ <br></p>
          </div>
        </div>
      </div>
    
      <div class="media media-list" id="comment-9194">
        <div class="bg-warning size-50 user-avatar border-0 mr-3">
                  <h3 class="m-0 text-white">R</h3>
              </div>
        <div class="media-body">
          <a href="https://tttang.com/user/Riatre"><span class="h3 author mr-1">Riatre</span></a>
          <span class="time">2015-10-10 23:19:31</span>
          <div class="pt-1">
            <p class="card-text font-14 autowrap">将owner设置成www其实是有问题的。如果有命令执行的条件的话，可以直接通过chmod 0000 .的方法搅屎。<br>可以考虑root:www，然后权限给775。再加上chattr +i。<br></p>
          </div>
        </div>
      </div>
    
      <div class="media media-list" id="comment-9193">
        <div class="bg-danger size-50 user-avatar border-0 mr-3">
                  <h3 class="m-0 text-white">A</h3>
              </div>
        <div class="media-body">
          <a href="https://tttang.com/user/Annabelle"><span class="h3 author mr-1">Annabelle</span></a>
          <span class="time">2015-10-12 13:00:36</span>
          <div class="pt-1">
            <p class="card-text font-14 autowrap">从文章获得启发，《CTF搅屎棍入门指南》<br></p>
          </div>
        </div>
      </div>
    
      <div class="media media-list" id="comment-9192">
        <div class="bg-success size-50 user-avatar border-0 mr-3">
                  <h3 class="m-0 text-white">故</h3>
              </div>
        <div class="media-body">
          <a href="https://tttang.com/user/%E6%95%85%E6%BB%A8"><span class="h3 author mr-1">故滨</span></a>
          <span class="time">2015-10-14 17:20:51</span>
          <div class="pt-1">
            <p class="card-text font-14 autowrap">赞。学弟。<br></p>
          </div>
        </div>
      </div>
    
      <div class="media media-list" id="comment-9191">
        <img class="user-avatar size-50 mr-3" src="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/877e2574-8dae-44c7-be2f-5052b7d2691c.jpg">
        <div class="media-body">
          <a href="https://tttang.com/user/Mark"><span class="h3 author mr-1">Mark</span></a>
          <span class="time">2015-10-14 22:55:43</span>
          <div class="pt-1">
            <p class="card-text font-14 autowrap">从文章获得启发，《CTF搅屎棍入门指南》<br></p>
          </div>
        </div>
      </div>
    
      <div class="media media-list" id="comment-9190">
        <div class="bg-warning size-50 user-avatar border-0 mr-3">
                  <h3 class="m-0 text-white">路</h3>
              </div>
        <div class="media-body">
          <a href="https://tttang.com/user/%E8%B7%AF%E4%BA%BA%E7%94%B2"><span class="h3 author mr-1">路人甲</span></a>
          <span class="time">2015-10-26 12:50:57</span>
          <div class="pt-1">
            <p class="card-text font-14 autowrap">曾经我是多么单纯，自从看了这篇《CTF搅屎棍入门指南》...<br></p>
          </div>
        </div>
      </div>
    
      <div class="media media-list" id="comment-9189">
        <div class="bg-secondary size-50 user-avatar border-0 mr-3">
                  <h3 class="m-0 text-white">昵</h3>
              </div>
        <div class="media-body">
          <a href="https://tttang.com/user/%E6%98%B5%E7%A7%B0"><span class="h3 author mr-1">昵称</span></a>
          <span class="time">2015-12-21 19:04:30</span>
          <div class="pt-1">
            <p class="card-text font-14 autowrap">昵称在此一游，原来可以这样<br></p>
          </div>
        </div>
      </div>
    

    
      <div class="alert alert-warning fade show border" role="alert">
        <h3 class="alert-heading">请先登录</h3>
        <p>你需要先<a href="https://tttang.com/auth/login/">登录</a>后才能发表评论。</p>
      </div>
    

  </div>

    </div>
    <div class="col-md-3 col-sm-12">
      
  


<div class="gx-card text-center mb-4 author-card">
  <div class="gx-card-header-color bg-grey lighten-4">
    <a href="https://tttang.com/user/phith0n" class="no-decoration"><img class="user-avatar size-100 " src="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/cf74b58d-d739-4216-bd1b-db709be5e995.jpg"></a>
      <div class="gx-card-hd-content">
          <h4 class="mb-1 mt-2 font-weight-bold"><a href="https://tttang.com/user/phith0n" class="no-decoration color-black">phith0n</a></h4>
          <p class="sub-heading">一个想当文人的黑客</p>
      </div>
  </div>
  <div class="gx-card-body ">
    
    <a href="https://twitter.com/%3Csvg%3E" class="no-decoration" target="_blank">
      <img src="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/twitter.svg" class="size-40" alt="twitter" data-toggle="tooltip" data-placement="top" title="" data-original-title="@&lt;svg&gt;">
    </a>
    

    
    <a href="https://weibo.com/101yx" class="no-decoration" target="_blank">
      <img src="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/weibo.svg" class="size-40" alt="weibo" data-toggle="tooltip" data-placement="top" title="" data-original-title="@101yx">
    </a>
    

    
    <a href="https://github.com/phith0n" class="no-decoration" target="_blank">
      <img src="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/github.svg" class="size-40" alt="github" data-toggle="tooltip" data-placement="top" title="" data-original-title="@phith0n">
    </a>
    

      <img src="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/wechat.svg" class="size-40 icon-social" alt="wechat" data-toggle="tooltip" data-placement="top" title="" data-original-title="暂无">
  </div>
</div>
  



<div class="gx-card mb-4">
  <div class="gx-card-header d-flex">
      <div class="mr-auto">
          <h3 class="card-heading d-inline-block mb-0">随机分类</h3>
      </div>
  </div>

  <div class="gx-card-body">
    
    
    <div class="media project-list">
        <span class="circle-shape bg-success"></span>
        <div class="media-body">
            <a class="project-name" href="https://tttang.com/sort/logic/">逻辑漏洞</a>
            <span class="meta-date">文章：15 篇</span>
        </div>
    </div>
    
    <div class="media project-list">
        <span class="circle-shape bg-info"></span>
        <div class="media-body">
            <a class="project-name" href="https://tttang.com/sort/hardware/">硬件与物联网</a>
            <span class="meta-date">文章：40 篇</span>
        </div>
    </div>
    
    <div class="media project-list">
        <span class="circle-shape bg-danger"></span>
        <div class="media-body">
            <a class="project-name" href="https://tttang.com/sort/Operation/">运维安全</a>
            <span class="meta-date">文章：62 篇</span>
        </div>
    </div>
    
    <div class="media project-list">
        <span class="circle-shape bg-danger"></span>
        <div class="media-body">
            <a class="project-name" href="https://tttang.com/sort/front/">前端安全</a>
            <span class="meta-date">文章：29 篇</span>
        </div>
    </div>
    
    <div class="media project-list">
        <span class="circle-shape bg-success"></span>
        <div class="media-body">
            <a class="project-name" href="https://tttang.com/sort/cryptology/">密码学</a>
            <span class="meta-date">文章：13 篇</span>
        </div>
    </div>
    
  </div>
</div>

  


<div class="gx-card mb-4">
  <div class="gx-card-header d-flex mb-2">
      <div class="m-auto">
          <h3 class="card-heading">扫码关注公众号</h3>
      </div>
  </div>
  <div class="table-responsive border-0">
      <img src="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/offical_account_qrcode.jpg" width="100%" alt="WeChat Offical Account QRCode">
  </div>
</div>
  




<div class="gx-card mb-4">
  <div class="gx-card-header d-flex mb-2">
      <div class="mr-auto">
          <h3 class="card-heading">最新评论</h3>
      </div>
  </div>
  <div class="table-responsive border-0">
      <table class="default-table table-sm table remove-table-border mb-0 ">
          <tbody>
          
          
            <tr>
                <td class="pl-0 size-50 vtop">
                  <a class="no-decoration color-black" href="https://tttang.com/archive/1613/#comment-12405"><div class="bg-info size-50 user-avatar border-0 ">
                  <h3 class="m-0 text-white">A</h3>
              </div></a>
                </td>
                <td>
                    <h4 class="user-name"><a class="no-decoration color-black" href="https://tttang.com/archive/1613/#comment-12405">Alexei</a></h4>
                  <p class="user-description">大哥tql</p>
                </td>
            </tr>
          
            <tr>
                <td class="pl-0 size-50 vtop">
                  <a class="no-decoration color-black" href="https://tttang.com/archive/1876/#comment-12404"><img class="user-avatar size-50 " src="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/a291a3b2-f051-4584-9166-d094cdc93cd7.jpg"></a>
                </td>
                <td>
                    <h4 class="user-name"><a class="no-decoration color-black" href="https://tttang.com/archive/1876/#comment-12404">Article_kelp</a></h4>
                  <p class="user-description">漏洞的触发依赖于merge这一类型的赋值函数，这样看来没有merge也就没有该漏</p>
                </td>
            </tr>
          
            <tr>
                <td class="pl-0 size-50 vtop">
                  <a class="no-decoration color-black" href="https://tttang.com/archive/1876/#comment-12403"><div class="bg-primary size-50 user-avatar border-0 ">
                  <h3 class="m-0 text-white">G</h3>
              </div></a>
                </td>
                <td>
                    <h4 class="user-name"><a class="no-decoration color-black" href="https://tttang.com/archive/1876/#comment-12403">GTL-JU</a></h4>
                  <p class="user-description">这个漏洞，如果没有类似于merge这种函数不就无法利用了？</p>
                </td>
            </tr>
          
            <tr>
                <td class="pl-0 size-50 vtop">
                  <a class="no-decoration color-black" href="https://tttang.com/archive/1890/#comment-12402"><img class="user-avatar size-50 " src="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/d54919aa-7d79-43db-9921-ce8db5900488.jpg"></a>
                </td>
                <td>
                    <h4 class="user-name"><a class="no-decoration color-black" href="https://tttang.com/archive/1890/#comment-12402">合天网安实验室</a></h4>
                  <p class="user-description">学到了</p>
                </td>
            </tr>
          
            <tr>
                <td class="pl-0 size-50 vtop">
                  <a class="no-decoration color-black" href="https://tttang.com/archive/1665/#comment-12401"><div class="bg-warning size-50 user-avatar border-0 ">
                  <h3 class="m-0 text-white">J</h3>
              </div></a>
                </td>
                <td>
                    <h4 class="user-name"><a class="no-decoration color-black" href="https://tttang.com/archive/1665/#comment-12401">janusna</a></h4>
                  <p class="user-description">楼主你好。关于widows端的微信数据库在得道密匙后可以通过数据库软件直接打开查</p>
                </td>
            </tr>
          
          </tbody>
      </table>
  </div>
</div>

  


<script src="https://hm.baidu.com/hm.js?488692445c2accc5a4654070cee8a18a"></script><script src="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/jquery.min.js"></script>

<div class="gx-card text-center mb-4 author-card " id="catalogue-container">
    <div class="gx-card-header d-flex mb-2">
        <div class="mr-auto">
            <h3 class="card-heading">目录</h3>
        </div>
    </div>
    <div id="catalogue"><h1 id="toc_0x00"><a href="https://tttang.com/archive/820/#toc_0x00">0x00 背景</a></h1><h1 id="toc_0x01"><a href="https://tttang.com/archive/820/#toc_0x01">0x01 保证题目质量</a></h1><h1 id="toc_0x02"><a href="https://tttang.com/archive/820/#toc_0x02">0x02 防御第一招——代码层</a></h1><h1 id="toc_0x03"><a href="https://tttang.com/archive/820/#toc_0x03">0x03防御第二招——服务权限层</a></h1><h1 id="toc_0x04"><a href="https://tttang.com/archive/820/#toc_0x04">0x04防御第三招——文件权限层</a></h1><h1 id="toc_0x05"><a href="https://tttang.com/archive/820/#toc_0x05">0x05防御第四招——对抗报复社会型搅屎棍</a></h1></div>
</div>

  <link rel="stylesheet" href="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/catalogue.css">


  <script src="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/catalogue.js"></script>



    </div>
  </div>
</div>

<footer class="bg-dark text-center text-white">






































  <!-- Copyright -->
  <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2);">
    © 2023 Copyright：跳跳糖
    <a class="text-white" href="https://beian.miit.gov.cn/" target="_blank">京ICP备2021026487号</a>
    <span style="padding:0 8px" data-v-7b827852="">|</span>
    <a rel="nofollow" class="text-white" target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010502047964">京公网安备 11010502047964号
        <img src="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/beian.jpg" style="display:inline-block;width:14px;height:12px;position:relative;top:-2px;left:3px">
    </a>
  </div>
  <!-- Copyright -->
</footer>


<div class="menu-backdrop fade"></div>

<script src="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/jquery.min.js"></script>
<script src="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/bootstrap.bundle.min.js"></script>
<script src="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/bigSlide.min.js"></script>


  <script src="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/jquery.magnific-popup.min.js"></script>

<script src="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/functions.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="./CTF主办方指南之对抗搅屎棍 - 跳跳糖_files/js" nonce=""></script>
<script nonce="">
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-CDRBLZT3C8');

  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?488692445c2accc5a4654070cee8a18a";
    hm.nonce = 'PijcHMtRRByunMlnvCxmBA\u003D\u003D';
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>



<bookmark-sidebar-x77yyfn3uxm id="redeviation-bs-sidebar" class="notranslate" aria-hidden="true" data-theme="default" data-pos="left"><template shadowrootmode="closed"><iframe style="margin:0;padding: 0;border: none;width: 100%;height: 100%;"></iframe></template></bookmark-sidebar-x77yyfn3uxm><div id="redeviation-bs-indicator" data-theme="default" class="redeviation-bs-fullHeight redeviation-bs-visible" data-pos="left" style="height: 100%; top: 0%;"><div><span></span></div></div></body></html>